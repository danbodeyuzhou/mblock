!function(e){function t(t){for(var o,a,r=t[0],i=t[1],s=t[2],c=0,l=[];c<r.length;c++)a=r[c],Object.prototype.hasOwnProperty.call(N,a)&&N[a]&&l.push(N[a][0]),N[a]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);for(x&&x(t);l.length;)l.shift()();return k.push.apply(k,s||[]),n()}function n(){for(var e,t=0;t<k.length;t++){for(var n=k[t],o=!0,a=1;a<n.length;a++){var r=n[a];0!==N[r]&&(o=!1)}o&&(k.splice(t--,1),e=L(L.s=n[0]))}return e}var o=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!w[e]||!O[e])return;for(var n in O[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(E[n]=t[n]);0==--T&&0===b&&R()}(e,t),o&&o(e,t)};var a,r=!0,i="50676005446d3a480f97",s=1e4,c={},l=[],d=[];function p(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:a!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var o=0;o<e.length;o++)t._acceptedDependencies[e[o]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:C,apply:A,status:function(e){if(!e)return h;u.push(e)},addStatusHandler:function(e){u.push(e)},removeStatusHandler:function(e){var t=u.indexOf(e);t>=0&&u.splice(t,1)},data:c[e]};return a=void 0,t}var u=[],h="idle";function m(e){h=e;for(var t=0;t<u.length;t++)u[t].call(null,e)}var f,E,g,T=0,b=0,S={},O={},w={};function I(e){return+e+""===e?+e:e}function C(e){if("idle"!==h)throw new Error("check() is only allowed in idle status");return r=e,m("check"),(t=s,t=t||1e4,new Promise((function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var o=new XMLHttpRequest,a=L.p+""+i+".hot-update.json";o.open("GET",a,!0),o.timeout=t,o.send(null)}catch(e){return n(e)}o.onreadystatechange=function(){if(4===o.readyState)if(0===o.status)n(new Error("Manifest request to "+a+" timed out."));else if(404===o.status)e();else if(200!==o.status&&304!==o.status)n(new Error("Manifest request to "+a+" failed."));else{try{var t=JSON.parse(o.responseText)}catch(e){return void n(e)}e(t)}}}))).then((function(e){if(!e)return m("idle"),null;O={},S={},w=e.c,g=e.h,m("prepare");var t=new Promise((function(e,t){f={resolve:e,reject:t}}));for(var n in E={},N)v(n);return"prepare"===h&&0===b&&0===T&&R(),t}));var t}function v(e){w[e]?(O[e]=!0,T++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=L.p+""+e+"."+i+".hot-update.js",document.head.appendChild(t)}(e)):S[e]=!0}function R(){m("ready");var e=f;if(f=null,e)if(r)Promise.resolve().then((function(){return A(r)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var n in E)Object.prototype.hasOwnProperty.call(E,n)&&t.push(I(n));e.resolve(t)}}function A(t){if("ready"!==h)throw new Error("apply() is only allowed in ready status");var n,o,a,r,s;function d(e){for(var t=[e],n={},o=t.map((function(e){return{chain:[e],id:e}}));o.length>0;){var a=o.pop(),i=a.id,s=a.chain;if((r=y[i])&&!r.hot._selfAccepted){if(r.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:i};if(r.hot._main)return{type:"unaccepted",chain:s,moduleId:i};for(var c=0;c<r.parents.length;c++){var l=r.parents[c],d=y[l];if(d){if(d.hot._declinedDependencies[i])return{type:"declined",chain:s.concat([l]),moduleId:i,parentId:l};-1===t.indexOf(l)&&(d.hot._acceptedDependencies[i]?(n[l]||(n[l]=[]),p(n[l],[i])):(delete n[l],t.push(l),o.push({chain:s.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];-1===e.indexOf(o)&&e.push(o)}}t=t||{};var u={},f=[],T={},b=function(){};for(var S in E)if(Object.prototype.hasOwnProperty.call(E,S)){var O;s=I(S);var C=!1,v=!1,R=!1,A="";switch((O=E[S]?d(s):{type:"disposed",moduleId:S}).chain&&(A="\nUpdate propagation: "+O.chain.join(" -> ")),O.type){case"self-declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(C=new Error("Aborted because of self decline: "+O.moduleId+A));break;case"declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(C=new Error("Aborted because of declined dependency: "+O.moduleId+" in "+O.parentId+A));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(O),t.ignoreUnaccepted||(C=new Error("Aborted because "+s+" is not accepted"+A));break;case"accepted":t.onAccepted&&t.onAccepted(O),v=!0;break;case"disposed":t.onDisposed&&t.onDisposed(O),R=!0;break;default:throw new Error("Unexception type "+O.type)}if(C)return m("abort"),Promise.reject(C);if(v)for(s in T[s]=E[s],p(f,O.outdatedModules),O.outdatedDependencies)Object.prototype.hasOwnProperty.call(O.outdatedDependencies,s)&&(u[s]||(u[s]=[]),p(u[s],O.outdatedDependencies[s]));R&&(p(f,[O.moduleId]),T[s]=b)}var k,P=[];for(o=0;o<f.length;o++)s=f[o],y[s]&&y[s].hot._selfAccepted&&T[s]!==b&&P.push({module:s,errorHandler:y[s].hot._selfAccepted});m("dispose"),Object.keys(w).forEach((function(e){!1===w[e]&&function(e){delete N[e]}(e)}));for(var D,M,x=f.slice();x.length>0;)if(s=x.pop(),r=y[s]){var U={},_=r.hot._disposeHandlers;for(a=0;a<_.length;a++)(n=_[a])(U);for(c[s]=U,r.hot.active=!1,delete y[s],delete u[s],a=0;a<r.children.length;a++){var j=y[r.children[a]];j&&((k=j.parents.indexOf(s))>=0&&j.parents.splice(k,1))}}for(s in u)if(Object.prototype.hasOwnProperty.call(u,s)&&(r=y[s]))for(M=u[s],a=0;a<M.length;a++)D=M[a],(k=r.children.indexOf(D))>=0&&r.children.splice(k,1);for(s in m("apply"),i=g,T)Object.prototype.hasOwnProperty.call(T,s)&&(e[s]=T[s]);var q=null;for(s in u)if(Object.prototype.hasOwnProperty.call(u,s)&&(r=y[s])){M=u[s];var F=[];for(o=0;o<M.length;o++)if(D=M[o],n=r.hot._acceptedDependencies[D]){if(-1!==F.indexOf(n))continue;F.push(n)}for(o=0;o<F.length;o++){n=F[o];try{n(M)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:s,dependencyId:M[o],error:e}),t.ignoreErrored||q||(q=e)}}}for(o=0;o<P.length;o++){var B=P[o];s=B.module,l=[s];try{L(s)}catch(e){if("function"==typeof B.errorHandler)try{B.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:s,error:n,originalError:e}),t.ignoreErrored||q||(q=n),q||(q=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:s,error:e}),t.ignoreErrored||q||(q=e)}}return q?(m("fail"),Promise.reject(q)):(m("idle"),new Promise((function(e){e(f)})))}var y={},N={0:0},k=[];function L(t){if(y[t])return y[t].exports;var n=y[t]={i:t,l:!1,exports:{},hot:p(t),parents:(d=l,l=[],d),children:[]};return e[t].call(n.exports,n,n.exports,function(e){var t=y[e];if(!t)return L;var n=function(n){return t.hot.active?(y[n]?-1===y[n].parents.indexOf(e)&&y[n].parents.push(e):(l=[e],a=n),-1===t.children.indexOf(n)&&t.children.push(n)):l=[],L(n)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return L[e]},set:function(t){L[e]=t}}};for(var r in L)Object.prototype.hasOwnProperty.call(L,r)&&"e"!==r&&"t"!==r&&Object.defineProperty(n,r,o(r));return n.e=function(e){return"ready"===h&&m("prepare"),b++,L.e(e).then(t,(function(e){throw t(),e}));function t(){b--,"prepare"===h&&(S[e]||v(e),0===b&&0===T&&R())}},n.t=function(e,t){return 1&t&&(e=n(e)),L.t(e,-2&t)},n}(t)),n.l=!0,n.exports}L.e=function(e){var t=[],n=N[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=N[e]=[t,o]}));t.push(n[2]=o);var a,r=document.createElement("script");r.charset="utf-8",r.timeout=120,L.nc&&r.setAttribute("nonce",L.nc),r.src=function(e){return L.p+"chunks/mblock."+{13:"7567bbd0dffb735eb699",14:"d17a489564d8f5489685",15:"02a6f6acb83b44646513",16:"aeb47bd5be7a22ceadf7",17:"15274091b7a21c0ea6ec",18:"819e0d9f0f6fbae3f003",19:"f525143080adda1b79a4",20:"af05115d843038fd716e",21:"7e8846ee31fa56014227",22:"31f54c394a568dcae724",23:"c87439e2b8df63479671",24:"f727d3d95c0e08cbf21d",25:"d5ff16ef87d9967baab6",26:"e4a6e4fe2e71f732c4b3",27:"e36d02f80d5436a51afa",28:"dc2aea7bed9cc7acd1f4",29:"7e2fe0ff544e925cbf30",30:"efb83f90123f710015cf",31:"7666ff68f0b4efd0841b",32:"815a022a6626d6cfa76f",33:"6bd37f0287b1d12499b5",34:"ce7f831388ae8645b5af",35:"72fc9389f443ee6d2b74",36:"debc75c25a9446fc7367",37:"02932450b87daa691da1",38:"ce40493bbbce8a9754a8",39:"349092d17e19c79d49d6",40:"559a5d894a7be4137d6d"}[e]+".js"}(e);var i=new Error;a=function(t){r.onerror=r.onload=null,clearTimeout(s);var n=N[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",i.name="ChunkLoadError",i.type=o,i.request=a,n[1](i)}N[e]=void 0}};var s=setTimeout((function(){a({type:"timeout",target:r})}),12e4);r.onerror=r.onload=a,document.head.appendChild(r)}return Promise.all(t)},L.m=e,L.c=y,L.d=function(e,t,n){L.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},L.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},L.t=function(e,t){if(1&t&&(e=L(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(L.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)L.d(n,o,function(t){return e[t]}.bind(null,o));return n},L.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return L.d(t,"a",t),t},L.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},L.p="",L.oe=function(e){throw e},L.h=function(){return i};var P=window.webpackJsonp=window.webpackJsonp||[],D=P.push.bind(P);P.push=t,P=P.slice();for(var M=0;M<P.length;M++)t(P[M]);var x=D;k.push([551,2,3,8,10,7,5,1,6,12,4,11,9]),n()}({102:function(e,t,n){"use strict";n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return h})),n.d(t,"f",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return E}));var o=n(29),a=n(7),r=n(13),i=n(20),s=n(5),c=n(42),l=n(17),d=n(15);const p="UPDATER_CHECKER",u="SET_UPDATER_FIRMWARE_DATA",h="EXEC_DOWNLOAD_UPDATE",m="UPDATER_FIRMWAREN",f="REMIND_UPDATE",E="IGNORE_UPDATE_VERSION",g={connectType:"updater",cmd:"check_update",params:{}};let T=null;t.g={checker:(e=!1)=>{const t={type:p,payload:{isAuto:e,isChecking:!0}},n=Object(l.parseRoute)("/updater/app/checker");return async(i,s)=>{i(t),e||r.a.location.pathname===n||r.a.push(n);try{const p=await(()=>{let e=a.b.version?a.b.version.split("-")[0]:"";return e=d.a.isForAppStore?null:e,new Promise((t,n)=>{const r={url:a.b.domain.mblock+"mblock/isupdate",burl:a.b.domain.mblock+"mblock/firmware",version:"v"+e,lang:Object(c.d)()||Object(l.getNavigatorLang)()},i=o.default.serviceChannel,s=()=>{const e=setTimeout(()=>{n({code:10031})},3e3);i.sendMessage(Object.assign({},g,{params:r}),(o,a)=>{clearTimeout(e),o?n(o):t(a)})};i.getChannelConnected()?s():setTimeout(()=>{s()},1e3)})})();if(t.payload={code:0,model:{...p},isChecking:!1},i(t),e){const{updater:e}=s(),{isRemind:t}=e;!1!==t&&r.a.location.pathname!==n&&r.a.push(n)}}catch(e){t.payload={code:Number(e.code||e),isChecking:!1},i(t)}}},download:(e,t)=>{clearTimeout(T);const n={type:h,payload:{status:s.a.UPLOAD_STATUS.READY,percent:0}},r=(e,t=2e3)=>{T=setTimeout(()=>{n.payload=null,e(n)},t)},i=e=>{n.payload.status=s.a.UPLOAD_STATUS.FAILED,t&&t(),e(n),r(e,1e4)};return async t=>{t(n);try{await(e=>new Promise((t,n)=>{o.default.updater("update",{url:a.b.domain.mblock+"mblock/isupdate",version:a.b.version},(e,o)=>e?n(e):t(o),e)}))((o,a)=>{if(o)return i(t);a<100?n.payload.status=s.a.UPLOAD_STATUS.PROCESSING:(n.payload.status=s.a.UPLOAD_STATUS.DONE,e&&e(),r(t)),n.payload.percent=a,t(n)})}catch(e){i(t)}}},remind:(e=!1)=>(i.a.setEnableRemind(e),{type:f,payload:e}),ignore:e=>{let t=i.a.ingoreVersions;return null===t&&(t=[]),-1===t.indexOf(e)&&t.push(e),i.a.setIngoreVersions(t),{type:E,payload:t}},firmware:e=>({type:m,payload:e}),getFirmwareVersion:()=>new Promise((e,t)=>{o.default.updater("version",{},(n,o)=>n?t(n):e(o))})}},103:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));const o="SET_OPERATE_STATUS",a="VISIBLE_CHANGE";t.c={setOperate:e=>({type:o,payload:{operate:e}}),visibleChange:(e,t)=>({type:o,payload:{[e]:t}})}},104:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i}));const o={logining:!0,userInfo:null},a=(e=o,t)=>{switch(t.type){case"PASSPORT_UPDATE_LOGINING_STATE":return Object.assign(Object.assign({},e),{logining:t.value});case"PASSPORT_UPDATE_USER_INFO":return Object.assign(Object.assign({},e),{userInfo:t.value});default:return e}},r=e=>({type:"PASSPORT_UPDATE_USER_INFO",value:e}),i=e=>({type:"PASSPORT_UPDATE_LOGINING_STATE",value:e})},113:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(0),a=n.n(o),r=n(63);function i(e){const t=e["MENU.FILE.UPLOAD.FAIL"],n=e["BUTTON.CLOSE.TEXT"],o={div:{display:"inline-block"},secSpan:{margin:"0 5px"},lastSpan:{cursor:"pointer"}},i=a.a.createElement("div",{className:"upload-file",style:o.div},a.a.createElement("span",null,t),a.a.createElement("span",{className:"mid-part",style:o.secSpan},"|"),a.a.createElement("span",{onClick:()=>r.a.destroy(),style:o.lastSpan},n));r.a.error(i,0)}},1134:function(e,t){},1136:function(e,t){},1141:function(e,t,n){var o=n(310);"string"==typeof o&&(o=[[e.i,o,""]]);var a={transform:void 0},r=n(88)(o,a);o.locals&&(e.exports=o.locals),o.locals||e.hot.accept(310,(function(){var t=n(310);"string"==typeof t&&(t=[[e.i,t,""]]),r(t)})),e.hot.dispose((function(){r()}))},1142:function(e,t,n){var o=n(311);"string"==typeof o&&(o=[[e.i,o,""]]);var a={transform:void 0},r=n(88)(o,a);o.locals&&(e.exports=o.locals),o.locals||e.hot.accept(311,(function(){var t=n(311);"string"==typeof t&&(t=[[e.i,t,""]]),r(t)})),e.hot.dispose((function(){r()}))},1143:function(e,t,n){var o=n(312);"string"==typeof o&&(o=[[e.i,o,""]]);var a={transform:void 0},r=n(88)(o,a);o.locals&&(e.exports=o.locals),o.locals||e.hot.accept(312,(function(){var t=n(312);"string"==typeof t&&(t=[[e.i,t,""]]),r(t)})),e.hot.dispose((function(){r()}))},1144:function(e,t,n){var o=n(313);"string"==typeof o&&(o=[[e.i,o,""]]);var a={transform:void 0},r=n(88)(o,a);o.locals&&(e.exports=o.locals),o.locals||e.hot.accept(313,(function(){var t=n(313);"string"==typeof t&&(t=[[e.i,t,""]]),r(t)})),e.hot.dispose((function(){r()}))},1145:function(e,t,n){var o=n(314);"string"==typeof o&&(o=[[e.i,o,""]]);var a={transform:void 0},r=n(88)(o,a);o.locals&&(e.exports=o.locals),o.locals||e.hot.accept(314,(function(){var t=n(314);"string"==typeof t&&(t=[[e.i,t,""]]),r(t)})),e.hot.dispose((function(){r()}))},1146:function(e,t,n){var o=n(315);"string"==typeof o&&(o=[[e.i,o,""]]);var a={transform:void 0},r=n(88)(o,a);o.locals&&(e.exports=o.locals),o.locals||e.hot.accept(315,(function(){var t=n(315);"string"==typeof t&&(t=[[e.i,t,""]]),r(t)})),e.hot.dispose((function(){r()}))},1147:function(e,t,n){var o=n(316);"string"==typeof o&&(o=[[e.i,o,""]]);var a={transform:void 0},r=n(88)(o,a);o.locals&&(e.exports=o.locals),o.locals||e.hot.accept(316,(function(){var t=n(316);"string"==typeof t&&(t=[[e.i,t,""]]),r(t)})),e.hot.dispose((function(){r()}))},1148:function(e,t,n){var o=n(317);"string"==typeof o&&(o=[[e.i,o,""]]);var a={transform:void 0},r=n(88)(o,a);o.locals&&(e.exports=o.locals),o.locals||e.hot.accept(317,(function(){var t=n(317);"string"==typeof t&&(t=[[e.i,t,""]]),r(t)})),e.hot.dispose((function(){r()}))},1149:function(e,t,n){var o=n(318);"string"==typeof o&&(o=[[e.i,o,""]]);var a={transform:void 0},r=n(88)(o,a);o.locals&&(e.exports=o.locals),o.locals||e.hot.accept(318,(function(){var t=n(318);"string"==typeof t&&(t=[[e.i,t,""]]),r(t)})),e.hot.dispose((function(){r()}))},115:function(e,t,n){"use strict";var o=n(0),a=n.n(o),r=n(16),i=n.n(r),s=n(4),c=n.n(s),l=n(1174),d=n(1169),p=n(1179),u=n(1175),h=n(1164),m=n(1165),f=n(1176),E=n(1166),g=n(67),T=n(1163),b=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};const S=["input","number","checkbox","radio","select"];class O extends a.a.Component{constructor(e){super(e),this.state={objOptions:{},isLoading:!1,loading:{},values:this.mapFieldsValue(e.config.fields)}}componentWillReceiveProps(e){const{values:t}=this.state,n=this.mapFieldsValue(e.config.fields);c.a.isEqual(t,n)||this.setState({values:n})}mapFieldsValue(e){const t={};return e.forEach(e=>{c.a.isEmpty(e.type)||(t[e.id]=e.value)}),t}fieldText(e){const{formatMessage:t}=this.props;if(e&&!c.a.isEmpty(e)){let n="div",o="",r={};c.a.isString(e)?o=e:c.a.isObject(e)&&(n=e.tag||"div",o=e.text,r=e.style||{}),o=t({id:o,defaultMessage:o});let i={__html:o},s=a.a.createElement("div",{dangerouslySetInnerHTML:i});return a.a.createElement(n,{style:r},s)}return null}fieldContent(e){const{type:t,value:n,props:o={},onChange:r}=e,{formatMessage:i}=this.props,{values:s}=this.state;if(!c.a.isUndefined(t)&&!c.a.isUndefined(n)&&!c.a.isEmpty(t))switch(t.toLowerCase()){case"image":return a.a.createElement("p",null,a.a.createElement("img",{style:{maxWidth:"100%",display:"block"},alt:"is a picture",src:n}));case"text":return a.a.createElement("p",null,i({id:n.toString(),defaultMessage:n.toString()}));case"input":return a.a.createElement(l.a,Object.assign({},o,{style:{width:"100%"},defaultValue:s[e.id]||e.value,onChange:t=>this.fieldValue(e.id,t.target.value,r)}));case"number":return a.a.createElement(d.a,{style:{width:"100%"}});case"checkbox":return a.a.createElement(p.a,null);case"radio":return a.a.createElement(u.a,null);case"select":return this.selectField(e)}return null}transProps(e={},t){const{objOptions:n={},values:o}=this.state,{onBlur:a=(()=>{}),onSearch:r=(()=>{}),onSelect:i=(()=>{}),onDeselect:s=(()=>{}),onFocus:c=(()=>{}),onPopupScroll:l=(()=>{}),onInputKeyDown:d=(()=>{}),onMouseEnter:p=(()=>{}),onMouseLeave:u=(()=>{}),onChange:h=(()=>{})}=e,m=b(e,["onBlur","onSearch","onSelect","onDeselect","onFocus","onPopupScroll","onInputKeyDown","onMouseEnter","onMouseLeave","onChange"]),f=e=>{e instanceof Array&&e.length>0&&(n[t]=e,this.setState({objOptions:n}))},E=e=>{o[t]=e,this.setState({values:o})};return Object.assign({onBlur:()=>{a()},onFocus:()=>{c()},onSearch:e=>{r(e,f)},onSelect:e=>{i(e,E)},onDeselect:(...e)=>{s(...e)},onPopupScroll:()=>{l()},onInputKeyDown:(...e)=>{d(...e)},onMouseEnter:(...e)=>{p(...e)},onMouseLeave:(...e)=>{u(...e)},onChange:e=>{E(e)}},m)}selectField(e){const{values:t,objOptions:n}=this.state,{props:o,id:r}=e;return a.a.createElement(h.a,Object.assign({style:{width:"100%"},value:t[e.id]||e.value},this.transProps(o,r)),this.fieldSelectOptions(n[r]||e.options))}fieldSelectOptions(e){const{formatMessage:t}=this.props,n=[],o=e=>{try{for(let o=0;o<e.length;o++){const r=e[o];let i=c.a.isString(r)?r:r.text,s=c.a.isString(r)?r:r.value.toString();n.push(a.a.createElement(h.a.Option,{key:o,value:s},t({id:i,defaultMessage:i})))}}catch(e){}};if(c.a.isFunction(e)){const t=e();t instanceof Promise?t.then(e=>{o(e)}):o(t)}else c.a.isArray(e)&&o(e);return n}fieldValue(e,t,n){const{values:o}=this.state;return o[e]=t,this.setState({values:o}),c.a.isFunction(n)&&n(t),t}field(e,t){const{layout:n={span:24,style:{}}}=e,{span:o,style:r}=n,i={id:e.id||`cfgUIField${t}`,key:t,span:o,style:r};if(e.type&&-1!==S.indexOf(e.type)){const{formatMessage:t}=this.props,n=e.label||"";return a.a.createElement(m.a,Object.assign({},i),a.a.createElement(f.a.Item,{label:t({id:n,defaultMessage:n}),extra:e.info},this.fieldContent(e)))}return a.a.createElement(m.a,Object.assign({},i),this.fieldText(e.label),this.fieldContent(e),this.fieldText(e.info))}content(e){try{if(e&&!c.a.isEmpty(e))return a.a.createElement(E.a,{type:"flex",gutter:16},e.map((e,t)=>this.field(e,t)))}catch(e){}return null}changeLoading(e,t){const{loading:n}=this.state;n[e]=t,this.setState({isLoading:t,loading:n})}handleButtonClick(e){const{id:t,handle:n}=e,o={values:this.state.values,button:this[t],close:this.props.onCancel||(()=>{})};if(n&&c.a.isFunction(n)){const e=n(o);e instanceof Promise&&(this.changeLoading(t,!0),e.then(()=>{this.changeLoading(t,!1)}).catch(e=>{}))}else o.close()}footer(e){return e&&!c.a.isEmpty(e)?a.a.createElement("section",{className:"button-container"},e.map((e,t)=>{const{id:n,type:o="primary",ghost:r,style:i={}}=e,{loading:s}=this.state,c=s[n],l={type:o,ghost:r,style:i,key:t,ref:e=>this[n]=e,loading:c,onClick:()=>this.handleButtonClick(e)},{formatMessage:d}=this.props;let p=e.text;return c&&(p=e.loadingText||e.text),p=d({id:p,defaultMessage:p}),a.a.createElement(g.a,Object.assign({},l),p)})):null}render(){const{visible:e,onCancel:t,config:n}=this.props,{formatMessage:o}=this.props,{isLoading:r}=this.state;if(n&&!c.a.isEmpty(n)){const{title:i,width:s=480,maskClosable:c=!1,closable:l=!0,fields:d,buttons:p}=n,u=!r&&l;let h=i;return i&&(h=o({id:i,defaultMessage:i})),a.a.createElement(T.a,{title:h,destroyOnClose:!0,className:"custom-modal",width:s,visible:e,keyboard:u,maskClosable:c,closable:u,footer:this.footer(p),onCancel:t},this.content(d))}return null}}class w extends a.a.Component{constructor(e){super(e),this.state={visible:!1,config:e.config}}componentDidMount(){this._changeVisible(!0)}_changeVisible(e){const{visible:t}=this.state;t!==e&&this.setState({visible:e})}open(e){c.a.isEqual(e,this.state.config)||this.setState({config:e}),this._changeVisible(!0)}show(){this._changeVisible(!0)}close(){this._changeVisible(!1)}render(){const{formatMessage:e}=this.props,{visible:t,config:n}=this.state,o={config:n,visible:t,formatMessage:e,onCancel:this.close.bind(this)};return a.a.createElement(O,Object.assign({},o))}}var I=n(99);n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return C}));const C={},v=(e,t,n=!0)=>{let o=C[e];if(!o){const n=((e,t)=>{let n=null;const o=a.a.createElement(w,{config:t,formatMessage:I.a,ref:t=>{n=C[e]={open:t.open.bind(t),show:t.show.bind(t),close:t.close.bind(t)}}}),r=document.createElement("section");return r.setAttribute("id",e),document.body.appendChild(r),i.a.render(o,r),n})(e,t);if(!n)return;o=n}return!0===n&&o.open(t),o}},1150:function(e,t,n){var o=n(319);"string"==typeof o&&(o=[[e.i,o,""]]);var a={transform:void 0},r=n(88)(o,a);o.locals&&(e.exports=o.locals),o.locals||e.hot.accept(319,(function(){var t=n(319);"string"==typeof t&&(t=[[e.i,t,""]]),r(t)})),e.hot.dispose((function(){r()}))},1151:function(e,t,n){"use strict";n.r(t);n(4);var o=n(3),a=n(15),r=n(17),i=n(30),s=n(21),c=n(72),l=n(51);n(1152).default(s.a),n(1153).default(s.a),n(1154).default(s.a),n(64).default(s.a),s.a.dispatch(Object(l.updateSupportedLangNames)()),a.a.isInternational&&setTimeout(()=>Object(r.loadDynamicScript)("https://apis.google.com/js/platform.js",!1,!0),300),o.default.on("Login",()=>{(e=>{e&&setTimeout(async()=>{await s.a.dispatch(i.a.getProjects()),s.a.dispatch(i.a.setInfoBaseProjects())},500)})(!0)}),o.default.on("SwitchLanguage",()=>{setTimeout(()=>{Object(c.e)(s.a)},0)}),n(1161)},1152:function(e,t,n){"use strict";n.r(t),function(e){var o=n(4),a=n.n(o),r=n(63),i=n(3),s=n(13),c=n(5),l=n(18),d=n(143),p=n(22),u=n(29),h=n(41),m=n(115),f=n(537);const E=c.a.CONNECT_STATUS;t.default=t=>{const n={timer_:null,setup:(e,o=2e3)=>{const{connect:a}=t.getState(),{status:r}=a;n.timer_=setInterval(()=>{r!==E.CONNECT_SUCCESS?r!==E.CONNECT_SUCCESS&&r!==E.CONNECTING&&r!==E.NOT_SERVICE&&t.dispatch(h.k.discovery(e)):clearInterval(n.timer_)},o)},stop:()=>{clearInterval(n.timer_)}};i.default.on("ServerConnected",(e,n)=>{const{type:o}=t.getState().connect;t.dispatch(h.k.status(o)),l.a.instance.resize(),n||i.default.emit("SyncConnectState",c.a.SYNC_CONNECT_STATE_TYPE.SERVER_OFFLINE,!1)}),i.default.on("ConnectBroken",(e,n=!0)=>{const{connect:o,intlr:a}=t.getState();if(e||(e=o.device),o.isSoftDisconnect||t.dispatch(h.k.disconnect(o.type,o.connectionInfo&&o.connectionInfo.connectionId,e,n)),n){r.a.warning(a.messages["CONNECT.STATUS.DISCONNECTED"]),s.a.replace("/");for(const e in m.b)m.b[e].close()}}),i.default.on("DeviceConnected",(n,o,r)=>{if(!n)return;const s=n.rawPort,d=a.a.extend({},s,{dataEventMap:{},write:function(t,n){if(e.isBuffer(t)){const e=[];for(let n=0;n<t.length;++n)e[n]=t[n];s.write(e,"utf8",n)}else s.write(t,"utf8",n)},on:(t,n)=>{if("data"==t){const t=t=>{if(t instanceof Array){const o=new e(t.length);for(let e=0;e<o.length;++e)o[e]=t[e];n(o)}else if("Buffer"==t.type&&t.data instanceof Array){const o=new e(t.data.length);for(let e=0;e<o.length;++e)o[e]=t.data[e];n(o)}else n(null)};return d.dataEventMap[n.name]=t,s.on("data",t)}return s.on(t,n)},removeListener:(e,t)=>{if("data"==e){const n=d.dataEventMap[t.name];s.removeListener(e,n)}else s.removeListener(e,t)},open:e=>{s.open(e)},set:(e,t)=>{s.set(e,t)},close:(...e)=>{s.close(...e)},drain:async e=>{await s.drain(e)},flush:async e=>{await s.flush(e)}});l.a.instance.setTransporterRawPort(d),window.currentPort=d,(()=>{const{connect:e}=t.getState(),n=e.connectionInfo&&e.connectionInfo.connectionId;u.default.addDataListener(e.type,n,e=>{i.default.emit("ConnectReceive",null,e)}),u.default.addErrorListener(e.type,n,(e,t=!0)=>{i.default.emit("ConnectBroken",{address:n},t)})})(),i.default.emit("SyncConnectState",c.a.SYNC_CONNECT_STATE_TYPE.CONNECTED,n,o),((e,t,n)=>{!0!==n&&i.default.emit("LogConnectDevice",{name:e},!0,t)})(n.deviceId,o,r)}),i.default.on("DeviceDisconnected",(e,n,o=!1)=>{if(o){const{connect:n}=t.getState(),{devices:o}=n;!a.a.isEmpty(o)&&e&&(e=a.a.find(o,{address:e.address}))}e&&e.deviceId&&e.name&&(Object(d.a)(e,!1,n),Object(d.b)(e,!1),i.default.emit("LogDisconnectDevice",e,o?"passive":""))}),i.default.on("AutoConnect",(e,o={deviceId:"haloboard",name:"haloboard"},r)=>{n.stop(),n.setup(e,1e3);const i=setInterval(()=>{const{connect:e}=t.getState(),{type:s,current:l,scanData:d,scanStatus:u}=e;if(u===c.a.SCAN_STATUS.SCAN_SUCCESS&&(l||!a.a.isEmpty(d[s]))){clearInterval(i);const e=Object(p.c)(),c=e.options?e.options.connect.ble:{},u=a.a.find(d[s],{comName:l})||d[s][0];t.dispatch(h.k.connect(o,s,{...u,...c},()=>{n.stop(),r.success&&r.success()},()=>{n.stop(),r.fail&&r.fail()}))}},1010)}),i.default.on("UploadFirmwareComplete",(e,t,n)=>{i.default.emit("LogUpdateFirmware",t,"")}),i.default.on("CheckFirmwareVersion",async(e,{info:n})=>{try{t.dispatch(h.k.setDeviceInfo({...e,firmware:n}))}catch(e){}}),i.default.on("SyncConnectState",(e,n,o)=>{if(!1===n){Object(p.f)().forEach(e=>{Object(d.a)(e,!1,o)})}else{const{devices:r}=t.getState().connect;if(e===c.a.SYNC_CONNECT_STATE_TYPE.CONNECTED)if(a.a.isObject(n)&&a.a.isEmpty(r))Object(d.a)(n,!0,o);else{const e=Object(p.f)();let t=null;e.forEach(e=>{e.name===n.name?t=e:Object(d.a)(e,!1,o)}),t&&Object(d.a)(t,!0,o)}}}),i.default.on("MlinkConnected",e=>{t.dispatch(f.a.setIsArmOS())})}}.call(this,n(24).Buffer)},1153:function(e,t,n){"use strict";n.r(t);var o=n(4),a=n.n(o),r=n(63),i=n(14),s=n(13),c=(n(144),n(15),n(5)),l=(n(7),n(3)),d=n(18),p=n(22),u=n(41),h=n(72),m=n(19),f=n(29);t.default=e=>{let t=null;const n=function(e){e&&s.a.location.pathname!==e&&s.a.replace(e)},o=e=>{Object(p.i)(e&&e.exts)};l.default.on("MscratchReady",()=>{l.default.emit("CheckDisableBlocks",0),i.c.onReady()}),l.default.on("SetSender",(t,n,o)=>{const{connect:a}=e.getState();n instanceof Object&&(o=n),a.connectionInfo&&a.connectionInfo.connectionId&&f.default.send(a.type,a.connectionInfo.connectionId,t,o,()=>{})}),l.default.on("ConnectReceive",(e,t)=>{d.a.instance.doReceived(t)}),l.default.on("ProjectEndLoad",()=>{l.default.emit("CheckDisableBlocks",1),l.default.emit("SyncConnectState",c.a.SYNC_CONNECT_STATE_TYPE.PROJECT,!1),setTimeout(()=>{m.a.setSaved()},300)}),l.default.on("ClickConnect",e=>{f.default.isInstall(),t&&clearInterval(t),t=setTimeout(()=>{f.default.isInstall()?(clearInterval(t),n(`/connect?deviceId=${e.deviceId}&name=${e.name}`)):n("/noserver")},300)}),l.default.on("ClickDisconnect",t=>{const{connect:n}=e.getState();n.connectionInfo,e.dispatch(u.k.disconnect(n.type,n.connectionInfo&&n.connectionInfo.connectionId,t))}),l.default.on("ClickExtList",()=>{l.default.emit("OpenExtensionCenter"),s.a.push("/exts")}),l.default.on("ClickDeviceList",()=>{s.a.push("/devices")}),l.default.on("ClickUploadCode",()=>{Object(h.f)(e)}),l.default.on("ClickUploadOnlineFirmware",()=>{"/"===s.a.location.pathname&&(s.a.push("/updater/firmware/progress"),l.default.emit("uploadFirmwarePrepare"))}),l.default.on("ClickUpdateFirmware",e=>{s.a.push(`/updater/firmware?${(e=>e?`deviceId=${e.deviceId}&name=${e.name}`:"")(e)}`)}),l.default.on("FlyoutBlockClicked",t=>{const{type:n,disabled:o}=t,{intlr:a}=e.getState();-1!==c.a.LOGIN_AVAILABLE_BLOCKS.indexOf(n)&&o&&(0===n.indexOf("iot.")?r.a.warn(a.messages["BLOCK.USE.NEED.LOGINANDOPEN"],2):r.a.warn(a.messages["BLOCK.USE.NEED.LOGIN"],2))}),l.default.on("ClickedOpenSprite",()=>{s.a.push("/sprites")}),l.default.on("ClickedOpenSoundRecorder",()=>{d.a.instance.openRecordSound()}),l.default.on("ExtsFound",o),l.default.on("AddSprite",async(t,n,o=!1,i)=>{let s=!0;const{intlr:l}=e.getState();let u;switch(0===t.indexOf("user_")&&(u=r.a.loading(l.messages["PROJECT.LOADING_TIP"],0)),t){case c.a.SPRITE_TYPE.DEVICES:s=await Object(p.h)(n),!s&&r.a.warn(l.messages["NETWORK.ERR.MSG"],2);break;case c.a.SPRITE_TYPE.LIBS:case c.a.SPRITE_TYPE.USER_LIBS:await d.a.instance.addSprite(n);break;case c.a.SPRITE_TYPE.COSTUMES:case c.a.SPRITE_TYPE.USER_COSTUMES:await d.a.instance.addCostume(n);break;case c.a.SPRITE_TYPE.BACKDROPS:case c.a.SPRITE_TYPE.USER_BACKDROPS:await d.a.instance.addBackdrop(n);break;case c.a.SPRITE_TYPE.SOUNDS:case c.a.SPRITE_TYPE.USER_SOUNDS:await d.a.instance.addSound(n)}u&&u(),o&&d.a.instance.costumeEditorShow(),a.a.isFunction(i)&&i(s)}),l.default.on("ImportSpriteFromZip",async t=>{const{intlr:n}=e.getState(),a=r.a.loading(n.messages["PROJECT.LOADING_TIP"],0),i=await d.a.instance.importSprite(t,()=>{s.a.replace("/")},e=>{if(e&&e.length)return r.a.error(n.messages["IMPORT.EXTINPROJECT.FAIL"],2);r.a.error(n.messages["SPRITE.LOAD.FAIL.MSG"],2)});a&&a(),o(i)}),window.MbApi||(window.MbApi={}),window.MbApi.enableBlocks=e=>{d.a.instance.enableBlocks(e)},window.MbApi.disableBlocks=e=>{d.a.instance.disableBlocks(e)},window.MbApi.isLogin=()=>{const{userInfo:t}=e.getState().passport;return Boolean(t)},l.default.on("UploadCodeSuccess",e=>{l.default.emit("LogUploadCode",Object(p.b)().id,!0,e?"retry":"")}),l.default.on("UploadCodeFailed",e=>{l.default.emit("LogUploadCode",Object(p.b)().id,!1,e?"retry":"")}),l.default.on("LocaleDataUpdated",(e,t)=>{t&&t.mscratchMsgs&&d.a.instance.addLocaleData(e,t.mscratchMsgs,t.locale)}),l.default.on("SwitchLanguage",e=>{d.a.instance.changeLanguage(e)})}},1154:function(e,t,n){"use strict";n.r(t);var o=n(4),a=n.n(o),r=n(3),i=n(7),s=n(14),c=n(103),l=n(18),d=n(19),p=n(64),u=n(72),h=n(5),m=n(13),f=(n(144),n(63)),E=n(48);t.default=e=>{const t=e=>{l.a.instance.setTurboMode(e)},n=e=>{l.a.instance.shrinkStage(e)},o=e=>{l.a.instance.setCompanionMode(e)},g={"MENU.FILE.NEW.WEB":p.onNew,"MENU.SHOW_WEB_PROJECT_PANEL":()=>{m.a.replace("/projects")},"MENU.FILE.SAVEAS.WEB":()=>{m.a.replace("/web/saveas")},"MENU.FILE.IMPORT":p.onImport,"MENU.FILE.EXPORT":p.onExport,"MENU.EDIT.TURBO":()=>t(!0),"MENU.EDIT.TURBO.OFF":()=>t(!1),"MENU.EDIT.SHRINK":()=>n(!0),"MENU.EDIT.SHRINK.OFF":()=>n(!1),"MENU.EDIT.COMPANION.OPEN":()=>o(!0),"MENU.EDIT.COMPANION.CLOSE":()=>o(!1),"MENU.HELP.GUIDE":()=>{const{intlr:t}=e.getState(),n=a.a.has(i.b.link.guide,t.langKey)?t.langKey:"en",o=i.b.link.guide[n];s.c.openLink(null,o)},"MENU.HELP.UPDATER.CHECKER":()=>{Object(u.a)(e,!1)},"MENU.OTHER.VERSION.INTRODUCE":()=>{n(!1),m.a.push("/character")},"MENU.OTHER.DRIVER.INSTALL":()=>{s.c.installCh340().then(()=>{}).catch(e=>{f.a.warn(Object(E.b)({id:"MSG.99999"}))})},"MENU.OTHER.JOIN":()=>{const{intlr:t}=e.getState(),n=a.a.has(i.b.link.join,t.langKey)?t.langKey:"en",o=i.b.link.join[n];s.c.openLink(null,o)}};r.default.on("onWebSckSave",a.a.throttle(()=>{if(!d.a.isLoaded)return;const{isShowLoadingPage:t}=e.getState().project;t||Object(p.onShortcutkey)("save")},300,{leading:!1}));r.default.on("onWebSckOpen",()=>{const{saveStatus:t}=e.getState().project;if(d.a.isLoaded&&t!==h.a.PROJECT_SAVE_STATUS.DOING&&"/"===m.a.location.pathname){const{userInfo:t}=e.getState().passport;t?m.a.replace("/projects"):m.a.replace("/login")}}),r.default.on("ClickMenu",e=>{a.a.has(g,e)&&g[e]()}),r.default.on("SetUndoRedoOperate",t=>{const{operate:n}=e.getState().menu;a.a.isEqual(n,t)||e.dispatch(c.c.setOperate(t))}),r.default.on("CanHideOpenedMenu",()=>{const{user:t}=e.getState().menu;if(t){const e=document.querySelector("#userMenuTrigger");e&&e.click()}})}},1156:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(16),i=n.n(r),s=n(26),c=n(4),l=n.n(c),d=n(1170),p=n(1173),u=n(1178),h=n(1171),m=n(5),f=n(3),E=n(15),g=n(14),T=n(7),b=n(528),S=n.n(b),O=n(529),w=n.n(O);class I extends o.Component{constructor(...e){var t,n,o;super(...e),o=()=>{const e=E.a.isInternational?T.b.link.mblock_homePage.en:T.b.link.mblock_homePage.zh;g.c.openLink(null,e)},(n="handleClick")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}render(){const e=T.b.logo;return e?e instanceof Element?a.a.createElement("div",{className:"header-logo",dangerouslySetInnerHTML:{__html:e.outerHTML}}):a.a.createElement("div",{className:"header-logo"},e):a.a.createElement("div",{className:"header-logo",onClick:this.handleClick},a.a.createElement("img",{src:E.a.isInternational?w.a:S.a,width:E.a.isInternational?"198":"170",height:"50"}))}}var C=I,v=n(1177),R=n(1180),A=n(52),y=n(51),N=n(13),k=n(34);var L=Object(s.connect)(e=>({intlr:e.intlr,project:e.project}),e=>({change:t=>e(Object(y.change)(t))}))(e=>{const t=async({key:t,item:n})=>{k.a.trackingSwitchLanguage(t),"checkLangUpdate"!==t?t&&n&&e.change(t):N.a.replace("/langchecker")};return a.a.createElement("section",{className:"cell-item"},a.a.createElement(R.a,{overlayClassName:`language-dropdown ${e.intlr.rtl?"rtl":""}`,disabled:(()=>{const{project:t}=e,{isShowLoadingPage:n,saveStatus:o}=t;return!(!n&&o!==m.a.PROJECT_SAVE_STATUS.DOING)})(),trigger:["hover"],overlay:(()=>{const{intlr:n}=e,{supportedLangs:o}=n,r=T.b.supportedLangKeysList||o&&Object.keys(o)||[],i=n.langKey;return a.a.createElement(v.a,{className:"header-dropdown-menu",subMenuOpenDelay:.1,onClick:t},r.map(e=>a.a.createElement(v.a.Item,{style:e===i&&{backgroundColor:"rgba(0, 0, 0, 0.1174)"},key:`${e}`},o[e].name)),(()=>{const{intlr:t}=e;return!E.a.isForAppStore?a.a.createElement(v.a.Item,{style:{borderTop:"1px solid rgba(255, 255, 255, 0.2)"},key:"checkLangUpdate"},t.messages["MENU.LANG.CHECK.UPDATE"]):null})())})()},a.a.createElement(A.a,{type:"icon-language"})))}),P=n(103),D=n(30),M=n(19),x=n(17),U=n(63),_=n(113);function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const q="MENU.LANGUAGE",F="MENU.FILE.OPEN.WEB",B="MENU.FILE.SAVE.WEB",G="MENU.FILE.SAVEAS.WEB",H="MENU.FILE.ADAPT.SAVE",V="MENU.FILE.EXPORT",z="MENU.HELP.GUIDE",K="MENU.HELP.ABOUT",W="MENU.HELP.FEEDBACK";class Y extends a.a.Component{constructor(...e){super(...e),j(this,"disabled",e=>{const{menu:t}=this.props,{operate:n}=t;return!(!l.a.has(e,"operate")||!l.a.has(n,e.operate))&&!n[e.operate]}),j(this,"menuItem",e=>{const{intlr:t,project:n}=this.props,{menus:o}=e;if(!l.a.isEmpty(o))return a.a.createElement(v.a.SubMenu,{className:"header-dropdown-menu",key:e.key,title:t.messages[e.key]},o.map(e=>this.menuItem(e)));const r=["MENU.FILE.SAVE.WEB",H];if(n.isForThirdPlatform&&-1!==r.indexOf(e.key))return null;if(!E.a.isInternational&&-1!==["MENU.FILE.PUBLISH.TO"].indexOf(e.key))return null;const i=g.c.has("shortcutkey")&&!l.a.isEmpty(e.shortcutKey);return a.a.createElement(v.a.Item,{key:e.key,link:e.link,disabled:this.disabled(e)},a.a.createElement("span",{className:"menu-label"},t.messages[e.key]),i&&a.a.createElement("span",null,Object(x.hasDarwin)()?e.shortcutKey[1]:e.shortcutKey[0]))}),j(this,"updateMenus",(e,t)=>{const n=(e,t,n)=>e.map(e=>(e.key===t&&(e.key=n),e));return{isSelfProject:e=>n(e,"MENU.FILE.ADAPT.SAVE","MENU.FILE.SAVE.WEB"),notSelfProject:e=>n(e,"MENU.FILE.SAVE.WEB","MENU.FILE.ADAPT.SAVE")}[t?"isSelfProject":"notSelfProject"](e)}),j(this,"mainMenu",()=>{const{project:e}=this.props,{isSelfProject:t}=e,n=T.b.headerDropdownMenus;return a.a.createElement(v.a,{className:"header-dropdown-menu",subMenuOpenDelay:.1,onClick:l.a.throttle(this.handleMenuClick,300,{leading:!1})},this.updateMenus(n.file,t).map(e=>this.menuItem(e)))}),j(this,"handleSaveListMenuClick",e=>{const{userInfo:t,intlr:n,project:o,saveProject:a}=this.props,{isShowLoadingPage:r,saveStatus:i,name:s}=o;if(r||i===m.a.PROJECT_SAVE_STATUS.DOING)return;e="function"==typeof e?e:void 0;const{isSelfProject:c,projectId:l}=o;Object(x.isOnline)()?t?c?a(!1,{name:s},e):a(!1,{name:s,isSelfProject:!1,isShare:!0,projectId:M.a.getCorrectId(l)},()=>{N.a.replace("/")}):N.a.replace("/login"):Object(_.a)(n.messages)}),j(this,"handleMenuClick",async({key:e,item:t})=>{const{intlr:n,project:o,saveProject:a}=this.props,{saveStatus:r}=o;if(e&&t){const{change:i,visibleChange:s,userInfo:c}=this.props,{link:l}=t.props,d=0===e.indexOf(F),p=0===e.indexOf(B),u=0===e.indexOf(G),h=0===e.indexOf(H),E=0===e.indexOf(q),g=0===e.indexOf(V),T=0===e.indexOf(z),b=0===e.indexOf(K),S=0===e.indexOf(W);if(!(r!==m.a.PROJECT_SAVE_STATUS.DOING||g||T||b||S))return;if("MENU.FILE.PUBLISH.TO"===e){if(!c)return void N.a.replace("/login");const e=function(e){M.a.saveAsThirdPlatformProject(e),N.a.replace("/help/shareprojectto")};a(!1,{name:o.name},e)}if((d||p||u)&&!Object(x.isOnline)()){const e=d?"MSG.99999":"MENU.FILE.UPLOAD.FAIL";d?U.a.error(n.messages[e]):Object(_.a)(n.messages)}else(d||p||u)&&!c?N.a.replace("/login"):E?i(e.replace(q,"")):l?N.a.push(l):h?this.handleSaveListMenuClick():f.default.emit("ClickMenu",e);s("main",!1)}return!0})}render(){const{visibleChange:e,project:t,intlr:n}=this.props,{isShowLoadingPage:o}=t;return a.a.createElement(R.a,{disabled:!!o,trigger:["hover"],overlay:this.mainMenu(),overlayClassName:`file-dropdown ${n.rtl?"rtl":""}`,onVisibleChange:t=>e("main",t)},a.a.createElement("div",{className:"cell-item",title:n.messages["MENU.FILE"]},a.a.createElement(A.a,{type:"icon-file",style:{fontSize:16,transform:"none"}}),a.a.createElement("span",null,n.messages["MENU.FILE"])))}}var X=Object(d.d)(Object(s.connect)(e=>({intlr:e.intlr,menu:e.menu,project:e.project,userInfo:e.passport.userInfo}),e=>({change:t=>e(Object(y.change)(t)),visibleChange:(t,n)=>e(P.c.visibleChange(t,n)),saveProject:(t,n,o)=>e(D.a.saveProject(t,n,o))}))(Y)),J=n(18),$=n(48);function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Z extends a.a.Component{constructor(e){super(e),Q(this,"handleMenuClick",({key:e,item:t})=>{if(e&&t){const{link:n}=t.props;n?History.push(n):f.default.emit("ClickMenu",e)}return!0}),Q(this,"disabled",e=>{const{menu:t}=this.props,{operate:n}=t;return!(!l.a.has(e,"operate")||!l.a.has(n,e.operate))&&!n[e.operate]}),Q(this,"mainMenu",()=>{const{intlr:e}=this.props,{isTurboMode:t,isShrinkMode:n,isCompanionMode:o}=this.state,{langKey:r}=e,i=T.b.headerDropdownMenus,s=t?"MENU.EDIT.TURBO":"MENU.EDIT.TURBO.OFF",c=n?"MENU.EDIT.SHRINK":"MENU.EDIT.SHRINK.OFF",l=o?"MENU.EDIT.COMPANION.OPEN":"MENU.EDIT.COMPANION.CLOSE",d=i.edit.filter(e=>{let t=!0;return T.b.showCompanionSwitch||(t=t&&!["MENU.EDIT.COMPANION.OPEN","MENU.EDIT.COMPANION.CLOSE"].includes(e.key)),t=t&&![s,c,l].includes(e.key),t});return a.a.createElement(v.a,{className:"header-dropdown-menu",subMenuOpenDelay:.1,onClick:this.handleMenuClick},d.map(e=>a.a.createElement(v.a.Item,{key:e.key,link:e.link,className:"menu-cell",style:e.name===r&&{backgroundColor:"var(--PRIMARY-COLOR)"},disabled:this.disabled(e)},a.a.createElement("span",{className:"menu-label"},a.a.createElement($.a,{id:e.key})),a.a.createElement("span",{className:"menu-label shortcutkey"},e.shortcutKey||""))))}),Q(this,"isForbidden",()=>{const{project:e}=this.props,{isShowLoadingPage:t,saveStatus:n}=e;return!(!t&&n!==m.a.PROJECT_SAVE_STATUS.DOING)}),this.state={isTurboMode:!1,isShrinkMode:!1,isCompanionMode:J.a.mscratch&&J.a.mscratch.extensions.isCompanionMode}}componentDidMount(){f.default.on("ToggleTurboMode",e=>{this.setState({isTurboMode:e})}),f.default.on("ToggleShrinkMode",e=>{this.setState({isShrinkMode:e})}),f.default.on("ToggleCompanionMode",e=>{this.setState({isCompanionMode:e})})}render(){const{intlr:e}=this.props,t=`edit-dropdown ${e.rtl?"rtl":""}`;return a.a.createElement(R.a,{disabled:this.isForbidden(),trigger:["hover"],overlay:this.mainMenu(),overlayClassName:t},a.a.createElement("div",{className:"cell-item",title:e.messages["MENU.EDIT"],style:{margin:0}},a.a.createElement(A.a,{type:"icon-Edit-banshou",style:{fontSize:16,transform:"none"}}),a.a.createElement("span",null,e.messages["MENU.EDIT"])))}}var ee=Object(s.connect)(e=>({intlr:e.intlr,menu:e.menu,project:e.project}),e=>({change:t=>e(Object(y.change)(t))}))(Z),te=n(1174),ne=n(32);function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ae extends a.a.Component{constructor(...e){super(...e),oe(this,"handleSaveListMenuClick",e=>{const{userInfo:t,intlr:n,project:o,exportProject:a,saveProject:r}=this.props,{isShowLoadingPage:i,saveStatus:s,isSelfProject:c,projectId:l,name:d,projectType:p}=o;if(!i&&s!==m.a.PROJECT_SAVE_STATUS.DOING){if(e="function"==typeof e?e:void 0,p===m.a.PROJECT_TYPE.LOCAL&&E.a.isPC)return a();if(t){if(Object(x.isOnline)())return E.a.isWeb&&!c?r(!1,{name:`${d}-${n.messages["MENU.FILE.ADAPT"]}`,isSelfProject:!1,isShare:!0,projectId:M.a.getCorrectId(l)},()=>{N.a.replace("/")}):void r(!1,{name:d},e);Object(_.a)(n.messages)}else N.a.replace("/login")}}),oe(this,"saveMessage",()=>{const{intlr:e,project:t}=this.props,{saveStatus:n,saveProgress:o}=t;switch(n){case m.a.PROJECT_SAVE_STATUS.SUCCESS:return a.a.createElement("span",{className:"editor-header-save"},e.messages["MENU.FILE.SAVE.SUCCESS"]);case m.a.PROJECT_SAVE_STATUS.FAILURE:return a.a.createElement("span",{className:"editor-header-save"},e.messages["MENU.FILE.SAVE.FAIL"]);case m.a.PROJECT_SAVE_STATUS.DOING:return a.a.createElement("span",{className:"editor-header-save"},`${e.messages["MENU.FILE.SAVEING"]}${o}%`);default:return""}})}async componentWillReceiveProps(e){await M.a.isProjectCanBeVisited(e.project.projectId)}render(){const{intlr:e,project:t}=this.props,{isSelfProject:n,isShare:o,projectId:r,saveStatus:i}=t;let s=e.messages["MENU.FILE.SAVE"];const c=i===m.a.PROJECT_SAVE_STATUS.DOING;return a.a.createElement("button",{className:`${c?"saving-operation":"save-operation"}`,onClick:l.a.throttle(this.handleSaveListMenuClick,300,{leading:!1})},c?a.a.createElement(ne.a,{type:"loading"}):a.a.createElement(A.a,{type:"icon-save",style:{fontSize:16}}),!i&&a.a.createElement("span",{className:"save-msg"},s),i&&a.a.createElement("span",{className:"save-tip"},this.saveMessage()))}}var re=Object(s.connect)(e=>({intlr:e.intlr,userInfo:e.passport.userInfo,project:e.project}),e=>({exportProject:()=>e(D.a.exportProject()),saveProject:(t,n,o)=>e(D.a.saveProject(t,n,o))}))(ae);function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class se extends a.a.Component{constructor(...e){super(...e),ie(this,"state",{value:this.props.intlr.messages["FILENAME.EMPTY"],isFocusInput:!1}),ie(this,"handleRenameChange",e=>{let t=e.target.value;l.a.trim(t).length>48&&(x.showErrorMessage.bind(this)("PROJECT.NAME.MAX.LENGTH.TEXT"),t=t.substring(0,48)),this.setState({value:t})}),ie(this,"handlePressEnter",()=>{this.renameInput.blur()}),ie(this,"handleRenameFocus",()=>{this.setState({isFocusInput:!0})}),ie(this,"handleRename",e=>{const t=e.target.value,{project:n,intlr:o,renameProject:a}=this.props,{projectType:r,projectId:i}=n,s=Date.parse(new Date)/1e3;let c=l.a.trim(t);if(c===n.name)return void this.setState({isFocusInput:!1});if(!Object(x.isOnline)()&&"list"===r)return this.setState({value:n.name||M.a.getNewProjectName(o.messages["FILENAME.EMPTY"],n.projects),isFocusInput:!1}),void x.showErrorMessage.bind(this)("MSG.99999");if(l.a.isEmpty(c))return x.showErrorMessage.bind(this)("RENAME.ERR.NULL.MSG"),this.setState({value:n.name||M.a.getNewProjectName(o.messages["FILENAME.EMPTY"],n.projects),isFocusInput:!1});if(/^[-+\.]+/.test(c))return x.showErrorMessage.bind(this)("RENAME.ERR.PREFIX.MSG"),void this.setState({value:n.name},()=>this.renameInput.select());if(/[\^\\%&/*~'/?///</>/|/"/(/)/$#,@:;&]+/.test(c))return x.showErrorMessage.bind(this)("RENAME.ERR.CONTAIN.MSG"),void this.setState({value:n.name},()=>this.renameInput.select());if(/(^(con)$)|^(con)[/.\s]*\.|(^(prn)$)|^(prn)[/.\s]*\.|(^(aux)$)|^(aux)[/.\s]*\.|(^(nul)$)|^(nul)[/.\s]*\.|(^(com)[0-9]$)|^(com)[0-9]\..*|(^(lpt)[0-9]$)|^(lpt)[0-9][/.\s]*\./i.test(c)){const e=t.match(/con|prn|aux|nul|com[0-9]|lpt[0-9]/i)[0];return U.a.error(e+o.messages["RENAME.ERR.KEY.MSG"]),void this.setState({value:n.name},()=>this.renameInput.select())}c=M.a.getNewProjectName(c,n.projects),this.setState({value:c,isFocusInput:!1}),M.a.isConfirmName=!0,a(i,c,s)}),ie(this,"renameInputRef",e=>{this.renameInput=e&&e.input,this.renameInput&&this.renameInput.select()}),ie(this,"projectName",()=>{const{project:e}=this.props,{name:t,projectStatus:n,isShowLoadingPage:o,saveStatus:r}=e,{value:i,isFocusInput:s}=this.state,c=e.isForThirdPlatform||n===m.a.PROJECT_STATUS.WILL_DOWNLOAD||o||r===m.a.PROJECT_SAVE_STATUS.DOING;return s?a.a.createElement(te.a,{className:"input-rename",ref:this.renameInputRef,defaultValue:t,value:i,disabled:c,onChange:this.handleRenameChange,onPressEnter:this.handlePressEnter,onBlur:this.handleRename}):a.a.createElement("div",{className:"input-rename",onClick:c?null:this.handleRenameFocus},t)})}componentWillReceiveProps(e){const{project:t}=e;this.state.value!==t.name&&t.name&&this.setState({value:t.name})}saveMessage(){const{intlr:e,project:t}=this.props,{saveStatus:n}=t;switch(n){case m.a.PROJECT_SAVE_STATUS.SUCCESS:return a.a.createElement("span",{className:"editor-header-save-success"},e.messages["MENU.FILE.SAVE.SUCCESS"]);case m.a.PROJECT_SAVE_STATUS.FAILURE:return a.a.createElement("span",{className:"editor-header-save-failure"},e.messages["MENU.FILE.SAVE.FAIL"]);case m.a.PROJECT_SAVE_STATUS.DOING:return a.a.createElement("span",{className:"editor-header-saving"},e.messages["MENU.FILE.SAVEING"]);default:return""}}render(){const{isFocusInput:e,value:t}=this.state,{isForThirdPlatform:n,isSelfProject:o}=this.props.project,r={value:t,isFocusInput:e};return a.a.createElement("section",{className:"header-cell",style:{overflow:"initial"}},this.projectName(),a.a.createElement(h.a,{className:"header-divider",type:"vertical"}),n&&!o?null:a.a.createElement(re,r))}}var ce=Object(s.connect)(e=>({project:e.project,intlr:e.intlr}),e=>({renameProject:(t,n,o,a)=>e(D.a.renameProject(t,n,o,a))}))(se),le=n(72),de=n(20),pe=n(67);function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class he extends o.Component{constructor(...e){super(...e),ue(this,"handlePublishClick",()=>{this.handleSaveListMenuClick(async()=>{const{project:e,intlr:t}=this.props,{projectId:n}=e;Object(le.b)();const o=E.a.isInternational?"en":"zh";try{const e=await M.a.get_url_token({_HEADER_:{utoken:de.a.token}});if(e&&n){const t=T.b.link.project_share[o]+n+"?urltoken="+e.urltoken;N.a.push(`/list/project/shareSuccess/${n}`),g.c.openLink(null,t)}}catch(e){U.a.warn(t.messages["MSG.99999"])}})}),ue(this,"handleSaveListMenuClick",e=>{const{userInfo:t,intlr:n,project:o,saveProject:a}=this.props,{isShowLoadingPage:r,saveStatus:i,isSelfProject:s,isShare:c,projectId:l,name:d}=o;r||i===m.a.PROJECT_SAVE_STATUS.DOING||(e="function"==typeof e?e:void 0,Object(x.isOnline)()?t?a(!1,{name:d},e):N.a.replace("/login"):Object(_.a)(n.messages))}),ue(this,"publish",()=>{const{intlr:e,project:t,userInfo:n}=this.props,{projectId:o,projectType:r,isForThirdPlatform:i}=t,s="local"!==r&&M.a.getCorrectId(o),{isSelfProject:c,isShare:l}=t,d=a.a.createElement(pe.a,{onClick:()=>{const{isShowLoadingPage:e,saveStatus:t}=this.props.project;e||t===m.a.PROJECT_SAVE_STATUS.DOING||this.handlePublishClick()},className:"editor-header-publish"},e.messages["BUTTON.SHARE"]),p=a.a.createElement(pe.a,{onClick:()=>{const{isShowLoadingPage:e}=this.props.project,t=E.a.isInternational?"en":"zh";e||g.c.openLink(null,`${T.b.link.project_view[t]}${s}`)},className:"editor-header-publish"},a.a.createElement(A.a,{type:"icon-chakanzuopin",className:"icon-chakanzuopin",style:{fontSize:16}}),e.messages["MENU.FILE.VIEW_WORKS"]);return fe[n?"isLogin":"notLogin"]({isSelfProject:c,isShare:l,isForThirdPlatform:i,view_works:p,publish:d,correctId:s})})}render(){return a.a.createElement("section",{className:"header-cell",style:{overflow:"initial"}},this.publish())}}var me=Object(s.connect)(e=>({project:e.project,userInfo:e.passport.userInfo,intlr:e.intlr}),e=>({saveProject:(t,n,o)=>e(D.a.saveProject(t,n,o))}))(he);const fe={notLogin:e=>{const{projectId:t,correctId:n,view_works:o,publish:a,isForThirdPlatform:r,isShare:i}=e;let s=null;return s=r?null:a,s},isLogin:e=>Ee.after(ge)(e)},Ee=e=>{const{isSelfProject:t,isShare:n,view_works:o,publish:a}=e;return!!t&&(n?o:a)},ge=e=>{const{view_works:t,publish:n,isShare:o}=e;let a=t;return a=n,a};Function.prototype.after=function(e){const t=this;return function(){const n=t.apply(this,arguments);return n||e.apply(this,arguments)}};var Te=Object(s.connect)(e=>({intlr:e.intlr}))(e=>{const t=e.intlr.messages["MENU.COURSES"];return a.a.createElement("section",{className:"cell-item",title:t,onClick:e=>(e=>{const t=T.b.link.courses[E.a.isInternational?"en":"zh"];g.c.openLink(e,t)})(e)},a.a.createElement(A.a,{type:"icon-kechengziyuan",style:{fontSize:20}}),a.a.createElement("span",null,t))});n(1141);var be=({rtl:e})=>{E.a.isInternational;return a.a.createElement("div",{className:`mcode-link-wrapper ${e?"rtl":""}`},a.a.createElement("div",{className:"mcode-link",onClick:e=>{g.c.openMcode()}},a.a.createElement($.a,{id:"MCODE.LINK"})))};function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Oe extends a.a.Component{constructor(...e){super(...e),Se(this,"handleMenuClick",({key:e,item:t})=>{if(e&&t){const{link:n}=t.props;if(n){if(!Object(x.isOnline)()){const{intlr:e}=this.props;return void U.a.error(e.messages["MSG.99999"])}N.a.push(n)}else f.default.emit("ClickMenu",e)}return!0}),Se(this,"disabled",e=>{const{menu:t}=this.props,{operate:n}=t;return!(!l.a.has(e,"operate")||!l.a.has(n,e.operate))&&!n[e.operate]}),Se(this,"mainMenu",()=>{const{intlr:e}=this.props,t=T.b.headerDropdownMenus;return a.a.createElement(v.a,{className:"header-dropdown-menu",subMenuOpenDelay:.1,onClick:this.handleMenuClick},t.tutorials.map(t=>a.a.createElement(v.a.Item,{key:t.key,link:t.link,disabled:this.disabled(t)},a.a.createElement("span",{className:"menu-label"},e.messages[t.key]))))})}render(){const{intlr:e}=this.props;return a.a.createElement(R.a,{trigger:["hover"],overlay:this.mainMenu(),overlayClassName:`tutorial-dropdown ${e.rtl?"rtl":""}`},a.a.createElement("div",{className:"cell-item",title:e.messages["MENU.TUTORIAL"]},a.a.createElement(A.a,{type:"icon-course",style:{fontSize:16,transform:"none"}}),a.a.createElement("span",null,e.messages["MENU.TUTORIAL"])))}}var we=Object(s.connect)(e=>({intlr:e.intlr,menu:e.menu,project:e.project}))(Oe);var Ie=Object(s.connect)(e=>({intlr:e.intlr}))(e=>{return a.a.createElement("section",{className:"cell-item",title:e.intlr.messages["MENU.HELP.FEEDBACK"],onClick:()=>{N.a.replace("/help/feedback")}},a.a.createElement(A.a,{type:"icon-feedback",style:{fontSize:16}}),a.a.createElement("span",null,e.intlr.messages["MENU.HELP.FEEDBACK"]))});function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ve extends a.a.Component{constructor(...e){super(...e),Ce(this,"handleMenuClick",({key:e,item:t})=>{if(e&&t){const{link:n}=t.props;if(e.includes("MENU.OTHER")){const{isShowLoadingPage:e,saveStatus:t}=this.props.project;if(e||t===m.a.PROJECT_SAVE_STATUS.DOING)return}n?N.a.push(n):f.default.emit("ClickMenu",e)}return!0}),Ce(this,"disabled",e=>{const{menu:t}=this.props,{operate:n}=t;return!(!l.a.has(e,"operate")||!l.a.has(n,e.operate))&&!n[e.operate]}),Ce(this,"mainMenu",()=>{const{intlr:e}=this.props,t=T.b.headerDropdownMenus;return a.a.createElement(v.a,{className:"header-dropdown-menu",subMenuOpenDelay:.1,onClick:this.handleMenuClick},t.other.map(t=>{let n=!0;E.a.isForAppStore&&(n=!(!0===t.disableInAppstore));const o=t.key;let r=e.messages[o];if("MENU.OTHER.VERSION.INTRODUCE"===o){const e="5.4.0-11231403".split("-")[0];r=r&&r.format(e)}return n?a.a.createElement(v.a.Item,{key:t.key,link:t.link,disabled:this.disabled(t)},a.a.createElement("span",{className:"menu-label"},r)):null}))})}render(){const{intlr:e}=this.props;return a.a.createElement(R.a,{trigger:["hover"],overlay:this.mainMenu(),overlayClassName:`other-dropdown ${e.rtl?"rtl":""}`},a.a.createElement("div",{className:"cell-item",style:{margin:0}},a.a.createElement(A.a,{type:"icon-more",style:{fontSize:16,transform:"none"}})))}}var Re=Object(s.connect)(e=>({intlr:e.intlr,menu:e.menu,project:e.project}))(ve),Ae=n(1172),ye=n(44),Ne=n.n(ye),ke=n(21),Le=n(104),Pe=n(185),De=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};var Me=new class{init(){const{intlr:e}=ke.a.getState();Ne.a.env=ye.CLIENT_ENV.PROD,Ne.a.mode=ye.PAGE_MODE.WIN,Ne.a.lang=e.langKey,Ne.a.platform=E.a.isPC?ye.MAKEBLOCK_PLATFORM.MBLOCK_PC:ye.MAKEBLOCK_PLATFORM.MBLOCK_WEB,Ne.a.intl=E.a.isInternational,Ne.a.redirect="",window.passport=Ne.a,this.getUserInfo()}setLogin(e,t){e?(f.default.emit("Login"),Object(Pe.b)(Object.assign({},t))):(f.default.emit("Logout"),Object(Pe.b)({}))}getUserInfo(){return De(this,void 0,void 0,(function*(){const e=de.a.token;if(e){Ne.a.token=e,ke.a.dispatch(Object(Le.b)(!0));try{const e=yield Ne.a.userInfo();e.intl=Boolean(E.a.isInternational),ke.a.dispatch(Object(Le.c)(e)),de.a.setToken(Ne.a.token||"")}catch(e){Ne.a.token=null,de.a.removeToken(),ke.a.dispatch(Object(Le.c)(null))}}ke.a.dispatch(Object(Le.b)(!1))}))}},xe=n(532),Ue=n.n(xe),_e=n(533),je=n.n(_e);function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Fe extends a.a.Component{constructor(e){super(e),qe(this,"handleUserMenuClick",async({key:e})=>{const{visibleChange:t}=this.props;return"MENU.PROJECTS"===e?this.handleClickMyProjects():"USER.ACCOUNT"===e?this.handleClickAccount():"USER.HOME_PAGE"===e?this.handleClickHomePage():"USER.CLOUD_SERVICE_KEY"===e?N.a.push("/cloudServiceKey"):"USER.LOGOUT"===e&&this.handleClickLogout(),t("user",!1),!0}),qe(this,"userDropdownMenu",()=>{const{intlr:e}=this.props,{messages:t}=e,n=T.b.headerDropdownMenus.user;return a.a.createElement(v.a,{className:`header-dropdown-menu ${e.rtl?"rtl":""}`,onClick:this.handleUserMenuClick},n.map(e=>a.a.createElement(v.a.Item,{key:e.key},a.a.createElement($.a,{id:e.key}))))}),qe(this,"handleLogin",()=>{N.a.replace("/login")}),qe(this,"userMenu",()=>{const{menu:e,userInfo:t,visibleChange:n,project:o,intlr:r}=this.props,{isShowLoadingPage:i,saveStatus:s}=o;return a.a.createElement(R.a,{disabled:!(!i&&s!==m.a.PROJECT_SAVE_STATUS.DOING),trigger:["hover"],overlay:this.userDropdownMenu(),onVisibleChange:e=>n("user",e),overlayClassName:`account-dropdown ${r.rtl?"rtl":""}`},a.a.createElement("span",{id:"userMenuTrigger",className:`user-menu menu-trigger ${e.user?"active":""}`},a.a.createElement(Ae.a,{icon:"user",size:30,src:Object(x.safeHttps)(t.headpic)||Ue.a})))}),Me.init()}componentDidUpdate(e){!e.userInfo&&this.props.userInfo?f.default.emit("Login"):e.userInfo&&!this.props.userInfo&&f.default.emit("Logout")}handleClickMyProjects(){const{project:e}=this.props,{isShowLoadingPage:t,saveStatus:n}=e;t||n===m.a.PROJECT_SAVE_STATUS.DOING||(Object(x.isOnline)()?f.default.emit("ClickMenu","MENU.SHOW_WEB_PROJECT_PANEL"):U.a.error(Object($.b)({id:"MSG.99999"})))}async handleClickHomePage(){const e=`${E.a.isInternational?T.b.link.homepage.en:T.b.link.homepage.zh}`;try{const t=await M.a.get_url_token({_HEADER_:{utoken:de.a.token}});if(t){const n=`${e}?urltoken=${t.urltoken}`;g.c.openLink(null,n)}}catch(e){U.a.warn(Object($.b)({id:"MSG.99999"}))}}async handleClickLogout(){try{await Ne.a.logout(),this.props.updateUserInfo(null),de.a.removeToken(),U.a.success(Object($.b)({id:"USER.LOGOUT.SUCCESS.MSG"}))}catch(e){U.a.error(Object($.b)({id:"USER.LOGOUT.FAIL.MSG"}))}}handleClickAccount(){const{intlr:e}=this.props;Ne.a.lang=e.langKey,Ne.a.intl=E.a.isInternational,g.c.openLink(null,Ne.a.profile)}render(){const{logining:e,userInfo:t}=this.props;return a.a.createElement("section",{className:"header-cell",style:{minWidth:"40px"}},t?this.userMenu():a.a.createElement("span",{className:"user-menu menu-trigger",onClick:e?null:this.handleLogin},a.a.createElement(Ae.a,{icon:e?"loading":null,src:e?null:je.a})))}}var Be=Object(s.connect)(e=>({menu:e.menu,project:e.project,intlr:e.intlr,logining:e.passport.logining,userInfo:e.passport.userInfo}),e=>({updateLoginingState:t=>e(Object(Le.b)(t)),updateUserInfo:t=>e(Object(Le.c)(t)),visibleChange:(t,n)=>e(P.c.visibleChange(t,n))}))(Fe);class Ge extends a.a.Component{constructor(e){super(e)}render(){const{intlr:e,project:t}=this.props,n=t.projectType===m.a.PROJECT_TYPE.LOCAL,o=e.messages["MENU.FILE.LOCALFILE"];return a.a.createElement("section",{className:"header-cell"},n&&a.a.createElement("span",{className:"editor-header-local",title:o},o))}}var He=Object(s.connect)(e=>({intlr:e.intlr,project:e.project}))(Ge),Ve=n(161);n(1142);class ze extends a.a.Component{constructor(e){super(e)}componentDidMount(){Object(Ve.a)("Command+O, Ctrl+O",e=>{f.default.emit("onWebSckOpen"),e.preventDefault()}),Object(Ve.a)("Command+S, Ctrl+S",e=>{f.default.emit("onWebSckSave"),e.preventDefault()})}render(){const{project:e,rtl:t}=this.props,{isForThirdPlatform:n,isSelfProject:o}=e;return a.a.createElement(u.a.Header,{className:"header header-web",dir:t?"rtl":"ltr"},a.a.createElement("section",{className:"header-cell",style:{minWidth:"49.2em"}},a.a.createElement(C,null),a.a.createElement(L,null),a.a.createElement(X,null),a.a.createElement(ee,null),a.a.createElement(h.a,{className:"header-divider",type:"vertical"}),a.a.createElement(ce,null),n&&!o?null:a.a.createElement(me,null),a.a.createElement(He,null)),a.a.createElement("section",{className:"header-cell"},a.a.createElement(Te,null),a.a.createElement(we,null),a.a.createElement(Ie,null),a.a.createElement(Re,null),a.a.createElement(Be,null),a.a.createElement(be,{rtl:t})),a.a.createElement("input",{id:"OpenProjectTarget",type:"file",accept:Array.from(m.a.PROJECT_SUFFIX,e=>`.${e}`).join(","),hidden:!0}))}}var Ke=Object(d.d)(Object(s.connect)(e=>({project:e.project,langKey:e.intlr.langKey}))(ze)),We=n(22),Ye=n(78),Xe=n(228);n(1143);function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const $e="dragload-holder-show";class Qe extends a.a.Component{constructor(e){super(e),Je(this,"addListener",()=>{const e=e=>{const t=e.dataTransfer.types;return!(l.a.isArray(t)&&-1===t.indexOf("Files"))};for(var t in this.listeners={drop:t=>(this.preventDefault(t),e(t)&&(this.dragOpenFile(t.dataTransfer.files[0]),this.hideHolder()),!1),dragover:t=>(this.preventDefault(t),e(t)&&this.showHolder(),!1),dragleave:e=>(this.preventDefault(e),this.hideHolder(),!1),dragend:e=>(this.preventDefault(e),this.hideHolder(),!1)},this.listeners)document.body.addEventListener(t,this.listeners[t])}),Je(this,"removeListener",()=>{for(var e in this.listeners)document.body.removeEventListener(e,this.listeners[e])}),Je(this,"preventDefault",e=>{e.preventDefault(),e.stopPropagation()}),Je(this,"hideHolder",()=>{""!==this.state.showClass&&this.setState({showClass:""})}),Je(this,"showHolder",()=>{""===this.state.showClass&&this.setState({showClass:$e})}),Je(this,"dragOpenFile",e=>{this.props.dragOpenFile(e)}),this.state={showClass:""},this.listeners={}}componentDidMount(){this.addListener()}componentWillUnmount(){this.removeListener()}render(){return a.a.createElement("div",{ref:e=>this.dragloadHolder=e,className:`dragload-holder ${this.state.showClass}`},a.a.createElement("span",null,this.props.intlr.messages["DRAG.HOLDER.TEXT"]))}}var Ze=Object(s.connect)(e=>({intlr:e.intlr}),e=>({dragOpenFile:t=>e(D.a.dragOpenFile(t))}))(Qe),et=(n(1144),n(1145),n(1146),n(65));class tt extends a.a.Component{constructor(e){super(e),this.state={content:"",blockImg:"",createdByName:"",time:"",errorContent:"",noContent:"",loading:!1},this.needGetContent=!1,this.handleRetry=this.handleRetry.bind(this),this.handleContentClick=this.handleContentClick.bind(this)}handleRetry(){this.getContent(this.props)}getTypeAndOpcode(e){let t="",n="";return"device"===e.type?t=e.id:(n=e.id.split("."),1===n.length?(t="sprite",n=n[0]):(t=n[0],n=n[1])),{type:t,opcode:n}}formatDate(e){const t=new Date(1e3*e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+t.getDate()}getContent(e){this.setState({loading:!0});const t="zh"===e.langKey?"zh":"en",{type:n,opcode:o}=this.getTypeAndOpcode(e);f.default.emit("LogBlockDoc",{extensionName:n,blockName:o}),et.default.BlockHelp.getContent(n,o,t).then(e=>{e&&e.content[t]?this.setState({content:e.content[t],blockImg:e.blockImg&&(e.blockImg[t]||""),createdByName:e.createdByName||"mblock",time:this.formatDate(e.modifiedAt),errorContent:"",noContent:"",loading:!1}):this.setState({noContent:Object($.b)({id:"BLOCK.HELP.NO.HELP"}),errorContent:"",content:"",loading:!1})}).catch(e=>{this.setState({errorContent:Object($.b)({id:"MSG.99999"}),noContent:"",content:"",loading:!1})})}renderLoading(){return a.a.createElement("div",{className:"block-help-loading"},a.a.createElement(ne.a,{type:"loading"}))}handleContentClick(e){"A"===e.target.nodeName&&e.target.href&&g.c.openLink(e,e.target.href)}componentDidUpdate(e){if(this.needGetContent=!0,e.targets.editingTarget!==this.props.targets.editingTarget||e.langKey!==this.props.langKey)return e.active&&e.onClose(),void(this.needGetContent=!1);e.active&&this.props.active&&e.id===this.props.id&&(this.needGetContent=!1),this.props.active||(this.needGetContent=!1),this.needGetContent&&this.getContent(this.props)}render(){if(this.state.loading)return this.renderLoading();const e=Object($.b)({id:"BLOCK.HELP.EDIT.TIME"});return a.a.createElement("div",{className:"help-wrapper ql-snow",onClick:this.handleContentClick},this.state.content&&a.a.createElement("div",{className:`help-header ${this.props.rtl?"rtl":""}`},"device"===this.props.type?a.a.createElement("div",{className:"header-img"},a.a.createElement("img",{src:this.state.blockImg,alt:""})):a.a.createElement("div",{className:"header-img",dangerouslySetInnerHTML:{__html:this.state.blockImg}}),a.a.createElement("div",{className:"sub-info"},a.a.createElement("p",{className:"author"},Object($.b)({id:"EXTENSION.DEVELOPER"}),": ",this.state.createdByName),a.a.createElement("p",{className:"edit-time"},this.state.time+" "+e))),this.state.content&&a.a.createElement("div",{className:"help-content ql-editor",dangerouslySetInnerHTML:{__html:this.state.content}}),this.state.errorContent&&a.a.createElement("div",{className:"help-content ql-editor"},a.a.createElement("span",null,this.state.errorContent),a.a.createElement("span",{className:"retry-btn",onClick:this.handleRetry},Object($.b)({id:"BUTTON.RETRY.TEXT"}))),this.state.noContent&&a.a.createElement("div",{className:"help-content ql-editor"},this.state.noContent))}}class nt extends a.a.Component{constructor(e){super(e)}componentDidMount(){if(this.init(),f.default.on("file_download_error",()=>{U.a.error(Object($.b)({id:"UPDATER.PROGRESS.ERROR"}))}),f.default.on("MscratchReady",()=>{"function"==typeof this.props.onReady&&this.props.onReady(),J.a.instance.setBlockHelpComponent(tt)}),f.default.on("OpenCompanionCategoryNotice",e=>{U.a.warn(Object($.b)({id:"COMPANION.CATEGORY.DISABLE",values:[e]}))}),!1===T.b.enableProjectLoadingPage){const e=document.getElementById("loadingWrapper");e&&e.remove()}}shouldComponentUpdate(e){return this.props.uploading!==e.uploading}async init(){try{E.a.enablePreview?this.previewInit():E.a.isWeb?await this.webInit():E.a.isPC&&await this.pcInit()}catch(e){J.a.instance.clear()}}previewInit(){J.a.instance.inject("mscratchContainer"),Ye.a.autoLoadPreviewExts(),this.props.initProjectInfo()}async webInit(){let e=await M.a.loadRemoteProjectFromUrl(),t=null;l.a.isPlainObject(e)&&(t=e,e=e.data);const n=await J.a.instance.inject("mscratchContainer",e)||{exts:T.b.defaultExts};n&&n.exts&&Object(We.i)(n.exts),e?this.props.updateRemoteProjectFromUrl(t):this.props.initProjectInfo()}async pcInit(){let e=null;const t=await Object(Xe.b)();t&&(e=t.data);const n=await J.a.instance.inject("mscratchContainer",e)||{exts:T.b.defaultExts};n&&n.exts&&Object(We.i)(n.exts),t&&t.filePath?this.props.updateLocalProjectInfo(t.filePath):this.props.initProjectInfo()}render(){return a.a.createElement(u.a,{className:"mscratch-container-box"},this.props.uploading>0&&a.a.createElement("div",{className:"upload-loading"},a.a.createElement(ne.a,{type:"loading",spin:!0}),a.a.createElement($.a,{id:"PROJECT.LOADING_TIP"})),a.a.createElement(Ze,null),a.a.createElement("div",{id:"mscratchContainer",className:"mscratch-container"}))}}var ot=Object(s.connect)(e=>({project:e.project,uploading:e.assets.uploading}),e=>({updateRemoteProjectFromUrl:t=>e(D.a.updateRemoteProjectFromUrl(t)),initProjectInfo:()=>e(D.a.initProjectInfo()),updateLocalProjectInfo:t=>D.a.updateLocalProjectInfo(e,t)}))(nt);function at(e){return class extends a.a.Component{componentDidMount(){k.a.trackingScreenView(N.a.location.pathname)}render(){return a.a.createElement(e,this.props)}}}const rt=e=>{const t=Object(o.lazy)(e);return t.preload=e,t},it={Passport:rt(()=>n.e(28).then(n.bind(null,1270))),CloudServiceKey:rt(()=>n.e(31).then(n.bind(null,1271))),Ifttt:rt(()=>n.e(40).then(n.bind(null,1272))),Connect:rt(()=>n.e(19).then(n.bind(null,1292))),NoDriver:rt(()=>n.e(22).then(n.bind(null,1273))),ConnectUnable:rt(()=>n.e(33).then(n.bind(null,1274))),ConfirmSave:rt(()=>n.e(32).then(n.bind(null,1275))),Upload:rt(()=>Promise.resolve().then(n.bind(null,534))),UpdaterAppRestart:rt(()=>n.e(37).then(n.bind(null,1276))),UpdaterFirmware:rt(()=>n.e(38).then(n.bind(null,1277))),UpdaterFirmwareNotMatch:rt(()=>n.e(39).then(n.bind(null,1278))),UpdaterFirmwareProgress:rt(()=>n.e(30).then(n.bind(null,1279))),Extensions:rt(()=>n.e(14).then(n.bind(null,1291))),Sprites:rt(()=>n.e(13).then(n.bind(null,1293))),Devices:rt(()=>n.e(18).then(n.bind(null,1294))),SaveAs:rt(()=>n.e(34).then(n.bind(null,1280))),WebSaveAs:rt(()=>n.e(35).then(n.bind(null,1281))),About:rt(()=>n.e(23).then(n.bind(null,1282))),Feedback:rt(()=>n.e(15).then(n.bind(null,1283))),Project:rt(()=>n.e(17).then(n.bind(null,1284))),Demo:rt(()=>n.e(16).then(n.bind(null,1285))),ProjectDelete:rt(()=>n.e(36).then(n.bind(null,1286))),UpdaterAppChecker:rt(()=>n.e(29).then(n.bind(null,1287))),UpdaterDriverChecker:rt(()=>n.e(21).then(n.bind(null,1295))),ShareProjectTo:rt(()=>n.e(27).then(n.bind(null,1296))),LangChecker:rt(()=>n.e(24).then(n.bind(null,1288))),NoServer:rt(()=>n.e(25).then(n.bind(null,1289))),DefaultEditor:rt(()=>n.e(26).then(n.bind(null,1290))),Character:rt(()=>n.e(20).then(n.bind(null,1297)))},st=()=>{Object.keys(it).forEach(e=>{(window.requestIdleCallback||window.setTimeout)(()=>{it[e].preload()})})};var ct=it,lt=n(534);const dt=[{url:"/login",component:at(ct.Passport),exact:!0},{url:"/updater/app/checker",component:ct.UpdaterAppChecker,exact:!0},{url:"/updater/driver/checker",component:at(ct.UpdaterDriverChecker),exact:!0},{url:"/cloudServiceKey",component:ct.CloudServiceKey},{url:"/user/ifttt",component:ct.Ifttt},{url:"/projects",component:at(ct.Project)},{url:"/demos",component:at(ct.Demo)},{url:"/help/about",component:at(ct.About)},{url:"/help/feedback",component:at(ct.Feedback)},{url:"/help/shareprojectto",component:at(ct.ShareProjectTo)},{url:"/connect",component:ct.Connect},{url:"/nodriver",component:ct.NoDriver},{url:"/noserver",component:ct.NoServer},{url:"/device/unrecognized",component:ct.ConnectUnable},{url:"/upload/code",component:lt.default},{url:"/confirm/save/:type",component:ct.ConfirmSave},{url:"/updater/app/restart",component:ct.UpdaterAppRestart},{url:"/updater/firmware",component:ct.UpdaterFirmware,exact:!0},{url:"/updater/firmware/notmatch",component:ct.UpdaterFirmwareNotMatch,exact:!0},{url:"/updater/firmware/progress",component:ct.UpdaterFirmwareProgress,exact:!0},{url:"/exts",component:ct.Extensions,exact:!0},{url:"/sprites",component:ct.Sprites,exact:!0},{url:"/backdrops",component:ct.Sprites,exact:!0},{url:"/costumes",component:ct.Sprites,exact:!0},{url:"/sounds",component:ct.Sprites,exact:!0},{url:"/devices",component:ct.Devices},{url:"/project/saveas/:type/:name",component:ct.SaveAs},{url:"/web/saveas",component:ct.WebSaveAs},{url:"/projects/delete/:id",component:at(ct.ProjectDelete)},{url:"/langchecker",component:ct.LangChecker},{url:"/defaultEditor",component:ct.DefaultEditor},{url:"/character",component:ct.Character}];var pt=e=>{const{userInfo:t,location:n}=e;return a.a.createElement(o.Suspense,{fallback:null},dt.map(e=>e.isPrivate&&!t?a.a.createElement(d.a,{key:e.url,to:{pathname:"/login",state:{from:n}}}):a.a.createElement(d.b,{exact:e.exact,key:e.url,path:e.url,component:e.component})))};const ut=Object(x.detectWebGLContext)();var ht=e=>{if(ut)return null;const{intlr:{langKey:t,messages:n}}=e,o=T.b.link.faq[t]||T.b.link.faq.en;return a.a.createElement("section",{style:{position:"fixed",zIndex:2001,top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",backgroundColor:"rgba(255, 255, 255, .75)",fontSize:"2rem"}},a.a.createElement(ne.a,{style:{fontSize:"200%"},type:"meh-o"}),a.a.createElement("a",{href:o,rel:"nofollow me noopener noreferrer",target:"_blank",onClick:e=>g.c.openLink(e,o)},a.a.createElement("p",{style:{margin:"2rem"}},n["WEBGL.NOT.SUPPORT"])))},mt=(n(1148),n(535)),ft=n.n(mt);class Et extends a.a.Component{constructor(e){super(e)}render(){return a.a.createElement("span",{id:"copyright"},a.a.createElement("img",{src:ft.a}))}}var gt=Object(d.d)(Et),Tt=n(504);n(1150);function bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class St extends a.a.Component{constructor(e){super(e),bt(this,"openCharacterModal",()=>{E.a.isFirstStartup&&N.a.replace("/character")}),bt(this,"onMscratchReady",()=>{N.a.listen(()=>{J.a.mscratch.workspace.hideChaff()})}),this.state={enableTutorial:!1}}componentDidMount(){k.a.trackingScreenView("/"),st(),this.openCharacterModal()}render(){const{intlr:e,userInfo:t,location:n}=this.props,{enableTutorial:r}=this.state;return a.a.createElement(d.c,{history:N.a},a.a.createElement(p.a,{locale:"ja-jph"===e.langKey?"ja":e.langKey,messages:e.messages,onError:"NOOP"},a.a.createElement(u.a,{className:"root-layout"},T.b.showHeader&&a.a.createElement(Ke,{rtl:e.rtl}),a.a.createElement(ot,{onReady:this.onMscratchReady}),a.a.createElement(pt,{userInfo:t,location:n}),T.b.showCopyrightLogo&&a.a.createElement(gt,null),r&&t&&a.a.createElement(o.Suspense,{fallback:null},a.a.createElement(ct.Tutorial,null)),T.a.getGuiChildren().map((e,t)=>a.a.createElement(e,{key:"guiChild"+t})),a.a.createElement("a",{id:"DownloadFileTarget",style:{visibility:"hidden",zIndex:-100,position:"absolute"}}),a.a.createElement(Tt.a,null),a.a.createElement(ht,{intlr:e}))))}}var Ot=Object(s.connect)(e=>({userInfo:e.passport.userInfo,intlr:e.intlr}))(St),wt=n(23),It=n(29),Ct=n(76),vt=n(85),Rt=n(115);window.alert=function(e="",t="info",n=2,o){e&&U.a[t](e,n,o)};var At,yt=n(42);At=ke.a,window.MbApi||(window.MbApi={}),window.MbApi.IotService=et.default.IotService,window.MbApi.LocalStoreService=de.a,window.MbApi.getToken=()=>de.a.token,window.MbApi.getCommonHeader=()=>({accesstoken:de.a.accessToken,token:de.a.token}),window.MbApi.getUserInfo=()=>At.getState().passport.userInfo,window.MbApi.getDeviceType=()=>"1",window.MbApi.getDeviceId=()=>de.a.get(m.a.CONNECT_DEVICE_ID_KEY),window.MbApi.cloudListDomain=()=>Object(x.translateRequestUrlForEU)(wt.default.domainconfig.iot),window.MbApi.weatherDomain=()=>Object(x.translateRequestUrlForEU)(wt.default.domainconfig.weather),window.MbApi.airDomain=()=>Object(x.translateRequestUrlForEU)(wt.default.domainconfig.air),window.MbApi.getServiceChannel=()=>It.default.serviceChannel,window.MbApi.middlewares={compiler:(e,t,n="arduino")=>{It.default.compiler({type:n,context:e},t)},uploadFlash:(e={hex:"",lib:"",board:""},t,n="arduino")=>{try{const{connect:o}=At.getState(),a=l.a.filter(o.devices,{deviceId:e.board});if(!l.a.isEmpty(a)&&l.a.isArray(a)){const o=a[0].address;delete e.board,It.default.flash({type:n,context:{path:o,...e}},t)}}catch(e){}},uploadMicrobit:(e,t,n="upload")=>{It.default.microbit(n,e,t)}},window.MbApi.projectChange=()=>{f.default.emit("ProjectChange")},window.MbApi.getExtResPath=Ct.a,window.MbApi.require=Ct.e,window.MbApi.Emitter=f.default,window.MbApi.isWeb=E.a.isWeb,window.MbApi.dialog=(e,t)=>Object(Rt.a)(e,t),window.MbApi.message=(e="",t="info",n=2,o)=>{const a=At.getState().intlr.messages;l.a.has(a,e)&&(e=a[e]),e&&U.a[t](e,n,o)},window.MbApi.getServiceKey=(e="",t={})=>et.default.UserService.accesstoken(),window.MbApi.registerFirmwareDriver=vt.a.addFirmwareDriver.bind(vt.a),window.MbApi.registerUploadDriver=vt.a.addUploadDriver.bind(vt.a),window.MbApi.registerUploadMiddleware=vt.a.addMiddleware.bind(vt.a);const Nt=function(e){new Promise(e=>{const t=Object(yt.c)()||"en";ke.a.dispatch(Object(y.change)(t)),f.default.once("LocaleDataUpdated",()=>{ke.a.dispatch(D.a.hideLoadingPage()),ke.a.dispatch(Object(y.updateReadyStatus)(!0)),Promise.resolve().then(e)})}).then(()=>{(e=>{i.a.render(a.a.createElement(s.Provider,{store:ke.a},a.a.createElement(Ot,null)),document.querySelector(e))})(e)})};var kt=n(56);class Lt{constructor(e){this.MscratchService=e,f.default.on("project_end_rendered",async e=>{"function"==typeof this.projectLoadedHandler&&this.projectLoadedHandler(e),kt.c.waitInitExtDir&&await kt.c.waitInitExtDir,Lt.progressListener&&Lt.progressListener(100,1)}),f.default.on("file_download",this.onDownloadingProject.bind(this)),f.default.on("file_download_error",this.onDownloadProjectFailed.bind(this)),Lt.progressListener&&this.MscratchService.project.onProcess(e=>{T.b.enableProjectLoadingPage&&Lt.progressListener(e.complete,e.total||1)})}onDownloadingProject(e){if(!T.b.enableProjectLoadingPage)return;const t=e;Lt.progressListener&&Lt.progressListener(.7*t)}onDownloadProjectFailed(){T.b.enableProjectLoadingPage&&Lt.progressListener&&Lt.progressListener(-1)}reset(){this.MscratchService.clear()}export(e){this.MscratchService.export(null,null,e)}async exportToBlob(){return await this.MscratchService.getProjectJson()}exportToJsonString(){return this.MscratchService.getProjectJsonString()}async import(e,t){if(e=e||(()=>{}),t=t||(()=>{}),!document.querySelector("#OpenProjectTarget")){const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("id","OpenProjectTarget"),e.setAttribute("hidden",!0),document.body.appendChild(e)}const n=await Object(x.openProjectTarget)("#OpenProjectTarget"),o=await this.MscratchService.useWebRead(n);try{const t=await this.MscratchService.renderProject(o.data,e);t.exts&&Object(We.i)(t.exts)}catch(e){t(e)}"function"==typeof this.projectLoadedHandler&&this.projectLoadedHandler({projectName:n&&n.name.slice(0,n.name.lastIndexOf("."))})}getCover(){return this.MscratchService.getProjectCoverPic()}async renderFromArrayBuffer(e,t,n){this.renderFromData(e,t,n)}async renderFromData(e,t,n){if(e){t=t||(()=>{}),n=n||(()=>{});try{const n=await this.MscratchService.renderProject(e,t);n&&n.exts&&Object(We.i)(n.exts)}catch(e){n(e)}}}async renderFromUrl(e,t,n){const o=await Object(x.readFile)(e);this.renderFromData(o,t,n)}onLoadingProject(e){"function"==typeof e&&this.MscratchService.project.onProcess(t=>{T.b.enableProjectLoadingPage&&e(t.complete,t.total)})}fetchMblockCloudProjectData(e,t){if(!e)return null;try{const n=`cloudProjectId=${e.split("/project/")[1]}`;M.a.loadRemoteProjectFromUrl(n).then(e=>{t(e)})}catch(e){t(null)}}getName(){return ke.a.getState().project.name}onLoadedProject(e){this.projectLoadedHandler=e}static setLoadingListener(e){Lt.progressListener=e}registerProjectLoader(e){return M.a.registerProjectLoader(e)}async loadExtByIds(e){return Array.isArray(e)?await Object(We.i)(e):null}}var Pt=Lt;var Dt=class{setLogin(e,t){Me.setLogin(e,t)}};var Mt=class{constructor(e){this.MscratchService=e,this.setTheme(T.b.primaryColor)}registerDriverBtn(e){const t={downloadDriverBtn:e};T.a.setConfig(t)}setTheme(e){let t=e;t||(t=T.b.primaryColor);/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)&&this.MscratchService.setPrimaryColor(t)}};var xt=class{constructor(){}getDriverDownloadLink(){let e="zh"===ke.a.getState().intlr.langKey?"zh":"en";return T.b.link.driver[e]}};var Ut=class{constructor(){this.config={},this.onInit(()=>{window.mediaWindow.ctx.registBeforeOpenHandler(this.config.onBeforeOpen),window.mediaWindow.ctx.registBeforeCloseHandler(this.config.onBeforeClose)})}setConfig(e){this.config=e,e.onOpen&&this.onOpen(e.onOpen),e.onClose&&this.onClose(e.onClose)}onInit(e,t){return Object(f.genEvent)("MediaWindowInit")(e,t)}onOpen(e,t){return Object(f.genEvent)("MediaWindowOpen")(e,t)}onClose(e,t){return Object(f.genEvent)("MediaWindowClose")(e,t)}open(){f.default.emit("OpenMediaWindow")}close(){f.default.emit("CloseMediaWindow")}};class _t{static onForbidden(e){return Object(f.genEvent)("CognitiveServiceForbidden")(e)}static onLimited(e){return Object(f.genEvent)("CognitiveServiceLimit")(e)}static onError(e){return Object(f.genEvent)("CognitiveServiceError")(e)}}var jt=class{constructor(){this.mediaWindow=new Ut,this.cognitive=_t}};n(245);var qt=class{constructor(e){this.MscratchService=e,this.storage=e.mscratch.storage}onAssetLoaded(e){this.MscratchService.onAssetLoaded(e)}};var Ft=class{constructor(e){this.MscratchService=e,this.storage=e.mscratch.storage}addWebStore(e,t,n){this.MscratchService.addWebStore(e,t,n)}prependWebStore(e,t,n){this.MscratchService.prependWebStore(e,t,n)}getAssetTypes(){return this.MscratchService.mscratch.storage.AssetType}addWebProjectStore(e,t,n){this.MscratchService.addWebProjectStore(e,t,n)}getAssets(){return this.MscratchService.getAssets()}onTargetsUpdate(e){if("function"==typeof e)return this.MscratchService.mscratch.vm.scratchVM.addListener("targetsUpdate",e),()=>this.MscratchService.mscratch.vm.scratchVM.removeListener("targetsUpdate",e)}};new class{constructor(){this.saveProjectToCloud=()=>{const{project:e}=ke.a.getState(),{name:t}=e;ke.a.dispatch(D.a.saveProject(!1,{name:t}))}}};new class{constructor(){this.initUserInfo=()=>{Me.init()}}};var Bt=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};const Gt={sprite:[],costume:[],backdrop:[],sound:[]},Ht=(e,t,n=!0)=>Bt(void 0,void 0,void 0,(function*(){const o=Gt[t];if(o){const a=o.findIndex(t=>t.md5===e.md5);return-1===a?n&&("svg"===e.dataFormat?e.src=e.encodeDataURI("image/svg+xml"):e.src=window.URL.createObjectURL(new Blob([e.data.buffer]))):(e=Object.assign(o[a],e),o.splice(a,1)),o.unshift(e),"sprite"===t&&Ht(e,"costume",!1),e}return!1}));var Vt={basepath:e=>e.url?e.url:e.src?e.src:void 0,sprites:()=>Bt(void 0,void 0,void 0,(function*(){return Gt.sprite})),backdrops:()=>Bt(void 0,void 0,void 0,(function*(){return Gt.backdrop})),costumes:()=>Bt(void 0,void 0,void 0,(function*(){return Gt.costume})),sounds:()=>Bt(void 0,void 0,void 0,(function*(){return Gt.sound})),onCreate:Ht,onDelete:(e,t)=>Bt(void 0,void 0,void 0,(function*(){const{md5:n}=e,o=Gt[t];if(o&&n){const t=o.findIndex(e=>e.md5===n);return-1!==t&&o.splice(t,1),e}return!1})),autoCreateWebStore:!0},zt=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};const Kt={sprite:[],backdrop:[],costume:[],sound:[]},Wt=g.c.file?`${g.c.file.userSpritePath}/`:"",Yt={sprite:`${Wt}sprite.json`,backdrop:`${Wt}backdrop.json`,costume:`${Wt}costume.json`,sound:`${Wt}sound.json`},Xt=e=>zt(void 0,void 0,void 0,(function*(){if(Yt[e])try{const t=yield fetch(Yt[e]).then(e=>e.json());return Kt[e]=t,t}catch(e){return[]}return[]})),Jt=e=>zt(void 0,void 0,void 0,(function*(){const t=Kt[e],n=Yt[e];if(t&&n)try{return yield g.c.write(n,JSON.stringify(t)),!0}catch(e){}return!1})),$t=(e,t,n=!1)=>zt(void 0,void 0,void 0,(function*(){Kt[e]=yield Xt(e);const o=Kt[e];if(o){const a=o.findIndex(e=>e.md5===t.md5);return n?-1===a||(o.splice(a,1),yield Jt(e)):-1!==a||(o.unshift({name:t.name,md5:t.md5,type:e}),yield Jt(e))}return!1}));var Qt={basepath:Wt,sprites:()=>zt(void 0,void 0,void 0,(function*(){return Xt("sprite")})),backdrops:()=>zt(void 0,void 0,void 0,(function*(){return Xt("backdrop")})),costumes:()=>zt(void 0,void 0,void 0,(function*(){return Xt("costume")})),sounds:()=>zt(void 0,void 0,void 0,(function*(){return Xt("sound")})),onCreate:(e,t)=>zt(void 0,void 0,void 0,(function*(){if(e.name&&e.md5&&e.data)try{yield g.c.uploadToLocal({path:[Wt,e.md5]},e.data);let n=yield $t(t,{name:e.name,md5:e.md5,type:t});return"sprite"===t&&n&&(n=yield $t("costume",{name:e.name,md5:e.md5,type:"costume"})),!!n&&e}catch(e){}return!1})),onDelete:(e,t)=>zt(void 0,void 0,void 0,(function*(){if(e.md5){let n=!0;const o=Kt.costume,a=Kt.sprite,r=Kt.backdrop;if("sprite"===t?n=!o.find(t=>t.md5===e.md5)&&!r.find(t=>t.md5===e.md5):"costume"===t?n=!a.find(t=>t.md5===e.md5)&&!r.find(t=>t.md5===e.md5):"backdrop"===t&&(n=!a.find(t=>t.md5===e.md5)&&!o.find(t=>t.md5===e.md5)),n)try{yield g.c.removeFromLocal({path:[Wt,e.md5]})}catch(e){return!1}if(yield $t(t,e,!0))return e}return!1}))};const Zt={basepath:"static/resource/scratch/",sprites:"static/sprites/makeblock/sprites.json",backdrops:"static/sprites/makeblock/backdrops.json",costumes:"static/sprites/makeblock/costumes.json",sounds:"static/sprites/makeblock/sounds.json",tags:"static/sprites/tags.json",autoCreateWebStore:!0},en={basepath:"static/resource/scratch/",sprites:"static/sprites/scratch/sprites.json",backdrops:"static/sprites/scratch/backdrops.json",costumes:"static/sprites/scratch/costumes.json",sounds:"static/sprites/scratch/sounds.json",autoCreateWebStore:!0},tn=function(e){de.a.lang||de.a.setLang(e)};class nn{constructor(e,t){this.setConfig(e||{});const n=new J.a;this.project=new Pt(n),this.account=new Dt,this.uiHelper=new Mt(n),this.helper=new xt,this.services=new jt,this.sprite=new qt(n),this.scratch=new Ft(n),this.version=E.a.appVersion,this.setupApp(),t&&this.inject(t)}setupApp(){n(1151)}setConfig({defaultLang:e,...t}){t=t||{};const n=Object.assign({spriteAssetConfig:[Zt,en],userSpriteAssetConfig:E.a.isPC?Qt:Vt},t);T.a.setConfig(n),"string"==typeof e&&tn(e)}initTheme(){this.uiHelper.setTheme(T.b.primaryColor)}inject(e){Nt(e)}setLang(e){ke.a.dispatch(Object(y.change)(e))}onReady(e){return Object(f.genEvent)("MscratchReady")(e)}emitAutoConnect(e,t,n){f.default.emit("AutoConnect",e,t,n)}get lang(){return ke.a.getState().intlr.langKey}static getConnectHashPath(e,t,n=0){return`/connect/${e}?deviceId=${t}&name=${t}${n||""}`}static replaceRouter(e){"string"==typeof e&&N.a.replace(e)}static get version(){return E.a.appVersion}static appendGuiChild(e,t){T.a.appendGuiChild(e,t)}static setProjectLoadingListener(e){Pt.setLoadingListener(e)}static get MakeblockAssets(){return Zt}static get ScratchAssets(){return en}static get UserAssets(){return Vt}}window.MBlock=nn;t.default=nn},1159:function(e,t,n){"use strict";n.r(t);var o=n(25),a=n(4),r=n.n(a),i=n(40);class s extends i.EventEmitter{constructor(e,t,n){super(),this.connectType="serialport",this.options=t,t||(this.options={connectType:this.connectType,baudRate:115200,highWaterMark:0}),this.writeWaiting=null,this.options.port=e,o.a.createListeners("serialport","onReceive",e=>{e.error?"disconnect"===e.error?(this.emit("disconnect",e.error,this.isOpen),this.isOpen=!1):"close"===e.error?(this.emit("disconnect",e.error,this.isOpen),this.isOpen=!1):(this.emit("error",e.error,this.isOpen),this.isOpen=!1):this.emit("data",e.data)}),o.a.addDisconnectListener(e=>{this.emit("disconnect",e,this.isOpen),this.isOpen=!1}),r.a.isFunction(n)&&n(),this.isOpen=!1}static list(e,t){o.a.sendMessage({connectType:"serialport",cmd:"getDevices",params:{options:this.options}},(e,n)=>{if(e)return t(e,[]);const o=[];n.forEach(e=>{e.productId||(e.productId="",e.vendorId=""),e.manufacturer=e.manufacturer||"",o.unshift(e)}),t(e,o)})}open(e){return o.a.sendMessage({connectType:this.connectType,cmd:"open",params:{options:this.options}},t=>{this.isOpen=!t,e(t)}),this}close(e,t){return new Promise(n=>{o.a.sendMessage({connectType:this.connectType,cmd:"close",params:{options:this.options}},(o,a)=>{!0!==t&&this.emit("disconnect",o,this.isOpen),this.isOpen=!1,r.a.isFunction(e)&&e(o,a),n()})})}write(e,t,n,a){return"function"==typeof n&&(a=n,n=null),new Promise(i=>{o.a.sendMessage({connectType:this.connectType,cmd:"write",params:{options:Object.assign({},this.options,n),data:e,encode:t}},(e,t)=>{"disconnect"===e&&(this.emit("disconnect",e,this.isOpen),this.isOpen=!1),r.a.isFunction(a)&&a(e,t),i()})})}set(e,t){return new Promise((n,a)=>{o.a.sendMessage({connectType:this.connectType,cmd:"set",params:{options:this.options,data:e}},(e,o)=>{"disconnect"===e&&(a(e),this.emit("disconnect",e,this.isOpen),this.isOpen=!1),r.a.isFunction(t)&&t(e,o),n()})})}drain(e){return new Promise(t=>{o.a.sendMessage({connectType:this.connectType,cmd:"drain",params:{options:this.options}},(n,o)=>{"disconnect"===n&&(this.emit("disconnect",n,this.isOpen),this.isOpen=!1),r.a.isFunction(e)&&e(n,o),t()})})}flush(e){return new Promise(t=>{o.a.sendMessage({connectType:this.connectType,cmd:"flush",params:{options:this.options}},(n,o)=>{"disconnect"===n&&(this.emit("disconnect",n,this.isOpen),this.isOpen=!1),r.a.isFunction(e)&&e(n,o),t()})})}connectAttempt(e){return new Promise(t=>{o.a.sendMessage({connectType:this.connectType,cmd:"connect_attempt",params:{options:this.options,esp32r0_delay:e}},(e,n)=>{"disconnect"===e&&(this.emit("disconnect",e,this.isOpen),this.isOpen=!1),t()})})}}var c=s;class l extends i.EventEmitter{constructor(e,t,n){super(),this.connectType="ble",this.options=t,t||(this.options={connectType:this.connectType}),this.options.port=e,this.isOpen=!1,this.initListeners(),r.a.isFunction(n)&&n()}initListeners(){o.a.createListeners("ble","onReceive",e=>{e.error?"disconnect"===e.error?this.disconnect(e.error):"close"===e.error?this.disconnect(e.error):"reportBleType"===e.error?"dualmode"===e.data.type&&this.disconnect(e.error):this.disconnect(e.error):this.emit("data",e.data)}),o.a.addDisconnectListener(e=>{this.disconnect(e)})}disconnect(e){this.emit("disconnect",e,this.isOpen),this.isOpen=!1}static list(e,t){o.a.sendMessage({connectType:"ble",cmd:"getDevices",params:{options:this.options}},(e,n)=>{if(e)return t(e,[]);t(e,n)})}open(e){return o.a.sendMessage({connectType:this.connectType,cmd:"open",params:{options:{...this.options}}},t=>{this.isOpen=!t,e(t)}),this}close(e){return new Promise(t=>{o.a.sendMessage({connectType:this.connectType,cmd:"close",params:{options:this.options}},(n,o)=>{this.emit("disconnect",n,this.isOpen),this.isOpen=!1,r.a.isFunction(e)&&e(n,o),t()})})}write(e,t,n,a){return new Promise(i=>{o.a.sendMessage({connectType:this.connectType,cmd:"write",params:{options:Object.assign({},this.options,n),data:e,encode:t}},(e,t)=>{"disconnect"===e&&this.disconnect(e),r.a.isFunction(a)&&a(e,t),i()})})}set(e,t){return new Promise(n=>{o.a.sendMessage({connectType:this.connectType,cmd:"set",params:{options:this.options,data:e}},(e,o)=>{"disconnect"===e&&this.disconnect(e),r.a.isFunction(t)&&t(e,o),n()})})}flush(e){return new Promise(t=>{o.a.sendMessage({connectType:this.connectType,cmd:"flush",params:{options:this.options}},(n,o)=>{"disconnect"===n&&this.disconnect(n),r.a.isFunction(e)&&e(n,o),t()})})}connectAttempt(e){}}var d=l;const p={vendorId:1046,productId:65535},u=e=>{if(e&&e.data&&30===e.data.length){const t=e.data[0];t>0&&(e.data=e.data.splice(1,t))}return e};class h extends i.EventEmitter{constructor(e,t,n){super(),this.connectType="hid",this.options=t,t||(this.options={connectType:this.connectType,...p}),this.options.port=e,o.a.createListeners("hid","onReceive",e=>{e.error?"disconnect"===e.error?(this.emit("disconnect",e.error,this.isOpen),this.isOpen=!1):"close"===e.error?(this.emit("disconnect",e.error,this.isOpen),this.isOpen=!1):(this.emit("error",e.error,this.isOpen),this.isOpen=!1):this.emit("data",u(e.data))}),o.a.addDisconnectListener(e=>{this.emit("disconnect",e,this.isOpen),o.a.destroyListeners("hid","onReceive"),this.isOpen=!1}),r.a.isFunction(n)&&n(),this.isOpen=!1}static list(e,t){o.a.sendMessage({connectType:"hid",cmd:"getDevices",params:{}},(e,n)=>{if(e)return t(e,[]);const o=[];n.forEach(e=>{e.productId&&o.unshift(e)}),t(e,o)})}open(e){return o.a.sendMessage({connectType:this.connectType,cmd:"open",params:{options:this.options}},t=>{this.isOpen=!t,e(t)}),this}close(e,t){return new Promise(n=>{o.a.sendMessage({connectType:this.connectType,cmd:"close",params:{options:this.options}},(o,a)=>{!0!==t&&this.emit("disconnect",o,this.isOpen),this.isOpen=!1,r.a.isFunction(e)&&e(o,a),n()})})}write(e,t,n,a){return new Promise(i=>{o.a.sendMessage({connectType:this.connectType,cmd:"write",params:{options:Object.assign({},this.options,n),data:e,encode:t}},(e,t)=>{"disconnect"===e&&(this.emit("disconnect",e,this.isOpen),this.isOpen=!1),r.a.isFunction(a)&&a(e,t),i()})})}}var m=h,f=n(219);n.d(t,"default",(function(){return E})),n.d(t,"SerialPort",(function(){return c})),n.d(t,"BLE",(function(){return d})),n.d(t,"Hid",(function(){return m})),n.d(t,"Wifi",(function(){return f.a}));const E=new class{constructor(){this.client=o.a.client}getChannelConnected(){return o.a.getConnected()}isNeedMlinkUpdate(){return o.a.isNeedMlinkUpdate}getUseMlinkVersion(){return o.a.getUseMlinkVersion()}close(){o.a.close()}addListener(e,t,n){o.a.createListeners(e,t,e=>{n(e.error,e.data)})}removeListener(e,t){o.a.destroyListeners(e,t)}sendMessage(e,t){o.a.sendMessage(e,t)}}},1160:function(e,t,n){"use strict";n.r(t);var o=n(144),a=n(13);class r{constructor(e){this.listener=null,this.preprocessor=e}addListener(e){this.listener=e}removeListener(e){this.listener=null}fire(e){this.listener&&(this.preprocessor&&(e=this.preprocessor(e)),this.listener(e))}}let i="jmmkbcfakiendpnceenfanaebjenjene";var s=new class{constructor(){this.isAppInstalled,this.messageHandleMap={},this.port=chrome.runtime?chrome.runtime.connect(i,{name:"mBlock.hardware"}):null,this.port?(this.port.onMessage.addListener(e=>{this.messageHandleMap[`${e.connectType}.${e.method}`]&&this.messageHandleMap[`${e.connectType}.${e.method}`].fire(e)}),o.a.isChromeOS&&this.sendMessage({cmd:"getVersion"},(e,t)=>{t&&"mBlock.hardware"==t.version?this.isAppInstalled=!0:this.isAppInstalled=!1})):this.isAppInstalled=!1}showNoDriverTip(){setTimeout(()=>{let e="/nochromedriver";a.a.location.pathname!==e&&a.a.replace(e)},3e3)}createListeners(e,t,n){let o=new r(n);return this.messageHandleMap[`${e}.${t}`]=o,o}sendMessage(e,t){chrome.runtime.sendMessage(i,e,e=>{chrome.runtime.lastError&&t(chrome.runtime.lastError,null),0==e.errcode?t(null,e.resp):t({errcode:e.errocode,errmsg:e.errmsg},{})})}isConnected(){return this.isAppInstalled}};const c="serialport";var l=new class{constructor(){this.onReceive=s.createListeners(c,"onReceive",e=>e.info),this.onReceiveError=s.createListeners(c,"onReceiveError",e=>e.info)}getDevices(e){s.sendMessage({connectType:c,cmd:"getDevices",params:{}},(t,n)=>{e(n.ports)})}connect(e,t,n){s.sendMessage({connectType:c,cmd:"connect",params:{path:e,options:t}},(e,t)=>{n(t.connection)})}disconnect(e,t){s.sendMessage({connectType:c,cmd:"disconnect",params:{connectionId:e}},(e,n)=>{t(n.result)})}send(e,t,n){s.sendMessage({connectType:c,cmd:"send",params:{connectionId:e,data:t}},(e,t)=>{n(t.sendInfo)})}flush(e,t){s.sendMessage({connectType:c,cmd:"flush",params:{connectionId:e}},(e,n)=>{t(n.result)})}update(e,t,n){s.sendMessage({connectType:c,cmd:"update",params:{connectionId:e}},(e,t)=>{n(t.result)})}setPaused(e,t,n){s.sendMessage({connectType:c,cmd:"setPaused",params:{connectionId:e}},(e,t)=>{n()})}getInfo(e,t){s.sendMessage({connectType:c,cmd:"getInfo",params:{connectionId:e}},(e,n)=>{t(n.connectionInfo)})}getConnections(e){s.sendMessage(extensionId,{connectType:c,cmd:"getConnections",params:{connectionId:connectionId}},(t,n)=>{e(n.connectionInfos)})}setControlSignals(e,t,n){s.sendMessage({connectType:c,cmd:"setControlSignals",params:{connectionId:e,signals:t}},(e,t)=>{n(t.result)})}getControlSignals(e,t){s.sendMessage({connectType:c,cmd:"getControlSignals",params:{connectionId:e}},(e,n)=>{t(n.signals)})}setBreak(e,t){s.sendMessage({connectType:c,cmd:"setBreak",params:{connectionId:e}},(e,n)=>{t(n.result)})}clearBreak(e,t){s.sendMessage({connectType:c,cmd:"clearBreak",params:{connectionId:e}},(e,n)=>{t(n.result)})}},d=n(527),p=n.n(d);n.d(t,"default",(function(){return h})),n.d(t,"SerialPort",(function(){return m}));let u={serialport:l};let h=new class{constructor(){}getChromeSerialPort(){return u.serialport}getPort(e){if(e in u)return this.getChromeSerialPort()}sendMessage(e,t){s.sendMessage(e,t)}getChannelConnected(){return s.isConnected()}};class m extends p.a.SerialPort{constructor(e,t,n){t||(t={connectType:"serialport",baudRate:115200}),t.serial=h.getPort(t.connectType),super(e,t,!1,n)}static list(e,t){h.getPort(e).getDevices((function(e){let n=new Array(e.length);for(let t=0;t<e.length;t++)n[t]={comName:e[t].path,manufacturer:e[t].displayName,serialNumber:"",pnpId:"",locationId:"",vendorId:"0x"+(e[t].vendorId||0).toString(16),productId:"0x"+(e[t].productId||0).toString(16)};t(chrome.runtime.lastError,n)}))}}},1161:function(e,t,n){"use strict";n.r(t);var o=n(321),a=n(21),r=n(3),i=n(5),s=n(14),c=n(13),l=n(18),d=n(4),p=n.n(d),u=n(30),h=n(64),m=n(72),f=n(19),E=n(20),g=n(29),T=n(51),b=n(76);let S=E.a.enableRemind;S=null===S||""===S||S,(e=>{const t=i.a.CONNECT_STATUS;let n=null;let o=null;const a=()=>{const{isShowLoadingPage:n}=e.getState().project;n||(()=>{const{connect:n}=e.getState();return n.status===t.CONNECT_SUCCESS})()&&Object(m.f)()};r.default.on("RestartApp",()=>{f.a.isSaved()?s.c.restart():c.a.push({pathname:"/confirm/save/restart"})}),r.default.on("OpenLinkedFile",async t=>{t&&l.a.isReady&&e.dispatch(u.a.openProject(t,i.a.PROJECT_TYPE.LOCAL))}),r.default.on("ConfirmCloseWindow",()=>{f.a.isSaved()?s.c.closeWindow():c.a.push({pathname:"/confirm/save/close"})}),r.default.on("SckNewFile",()=>{const{isShowLoadingPage:t}=e.getState().project;t||(null!==o&&clearTimeout(o),o=setTimeout(()=>{Object(h.onNew)()},200))}),r.default.on("SckOpenFile",()=>{const{isShowLoadingPage:t}=e.getState().project;t||(null!==n&&clearTimeout(n),n=setTimeout(()=>{Object(h.onOpen)(null,{projectType:i.a.PROJECT_TYPE.LOCAL})},200))}),r.default.on("SckSave",p.a.throttle(()=>{const{isShowLoadingPage:t}=e.getState().project;t||Object(h.onShortcutkey)("save")},300,{leading:!1})),r.default.on("SckSaveas",()=>{const{passport:t,project:n}=e.getState(),{isShowLoadingPage:o}=n;o||(t.userInfo?Object(h.onShortcutkey)("saveas"):c.a.replace("/login"))}),r.default.on("SckUploadCode",a),r.default.on("SckUploadCodeDtr",()=>{l.a.instance.isDtr=!0,a()})})(a.a),o.a.syncBuiltin().then(()=>{const e=a.a.getState().intlr.langKey;a.a.dispatch(Object(T.change)(e)),a.a.dispatch(Object(T.updateSupportedLangNames)()),o.a.syncRemote()}),g.default.isInstall(),S&&Object(m.a)(a.a,!0),Object(b.f)().then(e=>{const t=window.MbApi.file;e&&t&&e.config({isNode:!1,paths:{exts:t.extDirPath,vs:t.appRootPath+"/vs"}},!0)})},13:function(e,t,n){"use strict";var o=n(105);const a=Object(o.a)();a.location.search||"/"===a.location.pathname||a.replace("/"),t.a=a},137:function(e,t,n){"use strict";var o=n(23),a=n(15);t.a=new class{constructor(){this.domain=()=>o.default.domainconfig.extservice[a.a.getInternational];const e={getLocalExtList:{method:"get",local:!0,loadJosn:!0,url:":extDirName/:fileName"},list:{domain:()=>o.default.domainconfig.ext[a.a.getInternational],method:"post",url:"ext/list?pageNumber=:pageNumber&pageSize=:pageSize"},getNewRemoteExtList:{method:"get",url:"api/mblock/:mblockVersion/ext/:type",domain:this.domain},getExtVersionList:{method:"get",url:"api/mblock/:mblockVersion/extApi/supportVersion",domain:this.domain},getPublishedExtList:{method:"get",url:"api/publish/ext/list?ap=:appName&v=:version&t=:type&ids=:ids&target=:device&s=:searchText&pageNumber=:pageNumber&pageSize=:pageSize&category=:category",domain:this.domain},getExtTagList:{method:"get",url:"api/ext-category/list",domain:this.domain}};o.default.configToRequestAction.call(this,e,o.default)}}},14:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var o=n(4),a=n.n(o),r=n(3),i=n(7),s=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};class c{static get MbApi(){return window.MbApi}static get file(){return window.MbApi.file}static get session(){return window.MbApi.session}static has(e){return a.a.has(window,`window.MbApi.${e}`)}static openLink(e,t){t&&(e&&e.preventDefault(),this.has("openLink")?this.MbApi.openLink(t):window.open(t))}static select(e){if(this.has("file"))return this.file.select(e)}static read(e,t){if(this.has("file"))return this.file.open(e,t);throw new Error("not in electron")}static searchExistByJson(e,t,n=!1,o){if(t=t||[],this.has("file"))return this.file.searchExistByJson(e,t,n,o);throw new Error("not in electron")}static searchExistInJson(e,t){if(this.has("file"))return this.file.searchExistInJson(e,t);throw new Error("not in electron")}static save(e,t,n){if(this.has("file"))return this.file.save(t,e,n);throw new Error("not in electron")}static procFilePath(e){if(this.has("file"))return this.file.procFilePath(e);throw new Error("not in electron")}static uncompress(e){if(this.has("file"))return this.file.uncompress(e);throw new Error("not in electron")}static rename(e,t){if(this.has("file"))return this.file.rename(e,t);throw new Error("not in electron")}static write(e,t){if(this.has("file"))return this.file.write(e,t);throw new Error("not in electron")}static writeJson(e,t){if(this.has("file"))return this.file.writeJson(e,t);throw new Error("not in electron")}static stat(e){if(this.has("file"))return this.file.stat(e);throw new Error("not in electron")}static uploadToLocal(e,t,n){if(this.has("file"))return this.file.uploadToLocal(e,t,n);throw new Error("not in electron")}static removeFromLocal(e){if(this.has("file"))return this.file.removeFromLocal(e);throw new Error("not in electron")}static removeDir(e){if(this.has("file"))return this.file.removeDir(e);throw new Error("not in electron")}static closeWindow(){if(this.has("closeWindow")){n(29).default.disconnect(void 0,void 0,()=>{this.MbApi.closeWindow()})}}static openMcode(){if(this.has("openMcode"))return this.MbApi.openMcode();throw new Error("not in electron")}static restart(){this.has("restart")&&this.MbApi.restart()}static locationPathname(e){return location.href.replace(/(index.html)?#.*/,e).replace(/\\/g,"/")}static onReady(){this.has("onReady")&&this.MbApi.onReady()}static md5(e){if(this.has("file"))return this.file.md5(e);throw new Error("not in electron")}static abortDownload(e){if(this.has("file"))return this.file.abortDownload(e);throw new Error("not in electron")}static downloadFile(e,t,n,o){if(this.has("file"))return this.file.downloadFile(e,t,n,o);throw new Error("not in electron")}static saveDialog(e){if(this.has("file"))return this.file.saveDialog(e)}static copy(e,t){if(this.has("file"))return this.file.copy(e,t);throw new Error("not in electron")}static clearGoogleLoginCookie(){if(this.has("session"))return this.session.cookies.remove("https://www.google.com","SID")}static checkCh340(){if(this.has("checkCh340"))return this.MbApi.checkCh340();throw new Error("not in electron")}static downloadCh340(){if(this.has("downloadCh340"))return this.MbApi.downloadCh340();throw new Error("not in electron")}static installCh340(){if(this.has("installCh340"))return this.MbApi.installCh340();throw new Error("not in electron")}static setDefaultWindow(e){if(this.has("setDefaultWindow"))return this.MbApi.setDefaultWindow(e);throw new Error("not in electron")}static getDefaultWindow(){if(this.has("getDefaultWindow"))return this.MbApi.getDefaultWindow();throw new Error("not in electron")}}c.has("file")&&(i.a.updatePath(c.file.userSpritePath,"userSpriteBasepath"),i.a.updatePath(c.file.userProjectPath,"userProjectBasepath","userProjectFilePath"),i.a.updatePath(c.file.userCoverImagePath,"userCoverImageBasepath","userCoverImageFilePath"),i.a.updatePath(c.file.extDirPath,"extDirPath"),i.a.updatePath(c.file.langDirPath,"langDirPath"),i.a.updatePath(c.file.userTempPath,"userTempPath"),i.a.updatePath(c.file.appRootPath,"appRootPath"),c.file.addListeners(r.default)),c.has("shortcutkey")&&window.MbApi.shortcutkey(r.default);const l=(e,t)=>{if(!(e instanceof Array&&t instanceof Array))return!1;if(e.length<t.length)return!1;const n=a.a.intersection(e,t);return 0!==n.length&&n.length===t.length},d=e=>{try{let t=0;e=a.a.trimStart(e.toLowerCase(),"v");const n=a.a.split(e,"."),o=n.length;if(3==o)for(let e=0;e<o;e++){t+=parseInt(n[e])*Math.pow(1e3,o-e-1)}return t}catch(e){return 0}},p=(e,t)=>s(void 0,void 0,void 0,(function*(){if(t&&t.length>0){return(yield c.md5(e))==t}return!0}))},140:function(e,t,n){"use strict";var o=n(23),a=n(20),r=n(14),i=n(15),s=n(7),c=n(128),l=n.n(c);t.a=new class{constructor(){this.client=null,o.default.configToRequestAction.call(this,{downloadToken:{method:"POST",url:"project/accesstoken"},uploadToken:{method:"get",url:"cloud/token/upload"},uploadImgToken:{method:"get",url:"cloud/token/coverupload"},uploadAttachToken:{method:"get",url:"cloud/token/attachmentupload"}},o.default)}get domain(){return o.default.domainconfig.cloud[i.a.getInternational]}fetchFileUrl(e){return new l.a({region:e.region,accessKeyId:e.accessKeyId,accessKeySecret:e.accessKeySecret,stsToken:e.stsToken,bucket:e.bucket}).signatureUrl(e.commitId,{expires:3600,response:{"content-disposition":'attachment; filename="'+e.localName+'"'}})}downloadFile(e,t){const n=this.fetchFileUrl(e),o=s.b.userProjectFilePath+e.localName+".mblock";r.c.downloadFile(n,o,e.localName,(e,n)=>t(e,n))}downloadCoverImage(e,t){const{url:n,filePath:o,fileName:a}=e;r.c.downloadFile(n,o,a,e=>t(e))}uploadFile(e){const{config:t,file:n,info:o,option:r}=e,{region:i,accessKeyId:s,accessKeySecret:c,stsToken:d,bucket:p,commitId:u,callbackUrl:h}=t,{projectId:m,projectName:f,localName:E,createdAt:g,coverImage:T,isSelfProject:b}=o,S=new l.a({region:i,accessKeyId:s,accessKeySecret:c,stsToken:d,bucket:p});let O="adapt";return b&&(O=Number(m)>0?"edit":"create"),this.client=S,S.multipartUpload(u,n,{...r,callback:{url:h,body:"coverImage=${x:coverImage}&utoken=${x:utoken}&pid=${x:pid}&fileName=${x:fileName}&fsize=${size}&bucket=${bucket}&object=${object}&etag=${etag}&size=${size}&commitId=${x:commitId}&handle=${x:handle}&projectName=${x:projectName}&projectId=${x:projectId}&createdAt=${x:createdAt}",customValue:{utoken:a.a.token,pid:"1",commitId:u,fileName:E,handle:O,projectName:f,projectId:String(m),coverImage:T||"null",createdAt:String(g)}}})}uploadCoverImg(e,t,n){const{region:o,accessKeyId:a,accessKeySecret:r,stsToken:i,bucket:s,commitId:c}=e,d=new l.a({region:o,accessKeyId:a,accessKeySecret:r,stsToken:i,bucket:s});return this.client=d,d.multipartUpload(c,t,n)}uploadAttachment(e,t,n){const{region:o,accessKeyId:a,accessKeySecret:r,stsToken:i,bucket:s,commitId:c}=e,d=new l.a({region:o,accessKeyId:a,accessKeySecret:r,stsToken:i,bucket:s});return this.client=d,d.multipartUpload(c,t,n)}abortUpload(e,t){if(this.client)return this.client.abortMultipartUpload(e,t)}}},141:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r}));const o="GET_ENV",a="SET_ENV",r="SET_IS_ARM_OS"},143:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));n(4);var o=n(18);n(22),n(5);const a=(e,t,n)=>{o.a.mscratch.connection.setState(e,t,n)},r=(e,t)=>{}},144:function(e,t,n){"use strict";var o=n(241),a=n.n(o),r=n(4),i=n.n(r);t.a=new class{get isChromeOS(){return a.a.os.family.indexOf("Chrome OS")>-1}get isLinuxOS(){return i.a.indexOf(["Linux","Ubuntu Chromium","Ubuntu"],a.a.os.family)>-1}getPlatform(){return a.a.os.family}}},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(4),a=n.n(o),r=n(20),i=n(17);class s{static get isWeb(){return!a.a.has(window,"window.MbApi.file")}static get isPC(){return a.a.has(window,"window.MbApi.file")}static get isLocal(){return this.isPC}static get isChrome(){const e=navigator.userAgent.toLocaleLowerCase();return(e.indexOf("chrome")>-1||e.indexOf("crios")>-1)&&e.indexOf("safari")>-1&&-1===e.indexOf("edge")}static get appVersion(){return"5.4.0-11231403"}static handleIntrlEnvFromPc(){const e=r.a.isIntl;if(""!==e&&["string","boolean"].includes(typeof e))return JSON.parse(e);const t=r.a.lang;return t?"zh"!==t:"zh"!==Object(i.getNavigatorLang)()}static get isInternational(){if(this.isLocal)return this.handleIntrlEnvFromPc();return-1!==window.location.host.indexOf("mblock.cc")}static get getInternational(){return this.isInternational?"en":"zh"}static get enablePreview(){return window.IS_PREVIEW_EXTENSION}static get isWindows(){return"Win32"===navigator.platform}static get isForAppStore(){return!1}static get isLocalDomain(){const e=["127.0.0.1"];for(const t of e)if(window.location.hostname===t)return!0;return!1}static get formatAppVersion(){return"5.4.0-11231403".split("-")[0]}static get isFirstStartup(){const e=r.a.appVersion;return s.formatAppVersion!==e}}},17:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"getQueryString",(function(){return h})),n.d(t,"parseQueryString",(function(){return m})),n.d(t,"requestState",(function(){return f})),n.d(t,"getFileSuffix",(function(){return E})),n.d(t,"getFileName",(function(){return g})),n.d(t,"hasDarwin",(function(){return T})),n.d(t,"forceDownload",(function(){return b})),n.d(t,"detectWebGLContext",(function(){return S})),n.d(t,"getReady",(function(){return O})),n.d(t,"showErrorMessage",(function(){return w})),n.d(t,"showSuccessMessage",(function(){return I})),n.d(t,"sleep",(function(){return C})),n.d(t,"bufferToBase64",(function(){return v})),n.d(t,"bufferToString",(function(){return R})),n.d(t,"getBase64",(function(){return A})),n.d(t,"readAsArrayBuffer",(function(){return y})),n.d(t,"getImageSize",(function(){return N})),n.d(t,"getBase64ImageFromUrl",(function(){return k})),n.d(t,"base64ToBlob",(function(){return L})),n.d(t,"openProjectTarget",(function(){return P})),n.d(t,"isEmailAccount",(function(){return D})),n.d(t,"isStudentAccount",(function(){return M})),n.d(t,"translateRequestUrlForEU",(function(){return x})),n.d(t,"isOnline",(function(){return U})),n.d(t,"parseRoute",(function(){return _})),n.d(t,"genId",(function(){return j})),n.d(t,"formatDate",(function(){return q})),n.d(t,"readFile",(function(){return F})),n.d(t,"blob2ArrayBuffer",(function(){return B})),n.d(t,"getUrlParams",(function(){return G})),n.d(t,"isBlob",(function(){return H})),n.d(t,"safeHttps",(function(){return V})),n.d(t,"loadDynamicScript",(function(){return z})),n.d(t,"isBoxCourse",(function(){return K})),n.d(t,"getDefaultExts",(function(){return W})),n.d(t,"setDefaultExts",(function(){return Y})),n.d(t,"getNavigatorLang",(function(){return X})),n.d(t,"getAssetImageUrl",(function(){return J}));var o=n(4),a=n.n(o),r=n(38),i=n.n(r),s=n(63),c=n(92),l=n(5),d=n(15),p=n(3),u=n(181);const h=(e,t)=>{const n=new RegExp(`(^|&)${t}=([^&]*)(&|$)`,"i"),o=(e||window.location.search).substr(1).match(n);return null!=o?unescape(o[2]):null},m=e=>{const t=(e||location.search).slice(1).split("&"),n={};return t.forEach((function(e){e=e.split("="),n[e[0]]=decodeURIComponent(e[1]||"")})),n},f=(e,t,n)=>{if(t.status===c.b.PENDING||t.data&&99999===t.data.code)return Object.assign({},e,{...e,[n]:t.status,code:t.data&&t.data.code})},E=e=>{try{return i.a.extname(e).replace(".","")}catch(e){return""}},g=e=>{try{const t=e.replace(/\\/g,"/");return i.a.basename(t).replace(i.a.extname(t),"")}catch(t){return e}},T=()=>0===navigator.platform.toLowerCase().indexOf("mac"),b=(e,t)=>{const n=(window.URL||window.webkitURL).createObjectURL(e),o=window.document.querySelector("#DownloadFileTarget");return o.href=n,o.download=t,o.click(),(window.URL||window.webkitURL).revokeObjectURL(n),Promise.resolve()},S=()=>{const e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return!!(t&&t instanceof WebGLRenderingContext)},O=e=>new Promise(t=>{let n=null;const o=()=>{n=requestAnimationFrame(o),e()&&(cancelAnimationFrame(n),t())};o()}),w=function(e,t){if(t){const e=`MSG.${t}`;a.a.has(this.props.intlr.messages,e)&&s.a.error(this.props.intlr.messages[e])}else s.a.error(this.props.intlr.messages[e])},I=function(e,t){s.a.success(this.props.intlr.messages[e],t)},C=e=>new Promise(t=>setTimeout(t,e));String.prototype.format=function(){if(0==arguments.length)return this;let e;for(let t=0;t<arguments.length;t++)e=this,e=e.replace(new RegExp("\\{"+t+"\\}","g"),arguments[t]);return e};const v=e=>{let t="";const n=new Uint8Array(e),o=n.byteLength;for(let e=0;e<o;e++)t+=String.fromCharCode(n[e]);return window.btoa(t)},R=t=>{return e.from(t).toString()},A=(e,t)=>new Promise((n,o)=>{const a=new FileReader;a.onload=()=>{n(a.result)},a.onerror=e=>{o(e)},t?a.readAsText(e):a.readAsDataURL(e)}),y=t=>t instanceof Blob||t instanceof File?new Promise((n,o)=>{const a=new FileReader;a.onload=()=>{n(e.from(new Uint8Array(a.result)))},a.onerror=e=>{o(e)},a.readAsArrayBuffer(t)}):t,N=e=>new Promise((t,n)=>{const o=new Image;o.src=e,o.onload=function(){t({width:this.width,height:this.height})},o.onerror=function(e){n(e)}}),k=async e=>{const t=await fetch(e),n=await t.blob();return new Promise((e,t)=>{const o=new FileReader;o.addEventListener("load",(function(){e(o.result)}),!1),o.onerror=()=>t(void 0),o.readAsDataURL(n)})},L=e=>{const t=e.split(","),n=t[0].match(/:(.*?);/)[1],o=window.atob(t[1]),a=new ArrayBuffer(o.length),r=new Uint8Array(a);for(let e=0;e<o.length;e++)r[e]=o.charCodeAt(e);return new Blob([a],{type:n})},P=e=>(e="string"==typeof e?e:"#OpenProjectTarget",new Promise((t,n)=>{const o=document.querySelector(e);o.click(),o.onchange=()=>{const e=o.files;if(e instanceof FileList&&e.length>0){const o=e[0];-1!==l.a.PROJECT_SUFFIX.indexOf(E(o.name))?t(e[0]):n()}else n();o.value=""}})),D=e=>{return e&&/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},M=e=>{return e&&/^[0-9a-zA-Z]{9}$/.test(e)},x=e=>{const t=["//extservice.makeblock.com/","//planet.mblock.cc/","//extservice.mblock.cc/","//extapi.makeblock.com/","//extapi.mblock.cc/","//msapi.mblock.cc/","//iothub.makeblock.com/","//mweather.makeblock.com/","//passport2.mblock.cc/"],n=d.a.isInternational;if("string"!=typeof e&&(e=n?e.en:e.zh),n){-1!==e.indexOf("//apimblock.makeblock.com/")&&(e=e.replace("apimblock","api.mblock"));let n=!0;for(const o of t)-1!==e.indexOf(o)&&(n=!1);n&&(e=e.replace("//","//eu."))}return e},U=()=>window.navigator.onLine,_=e=>e,j=()=>{const e="0123456789qwertyuioplkjhgfdsazxcvbnm";let t="";const n=(new Date).getTime();for(let n=0;n<4;n++)t+=e.charAt(Math.ceil(1e8*Math.random())%e.length);return n+t},q=e=>{const t=e=>1===e.toString().length?"0"+e:e,n=new Date(1e3*e),o=n.getFullYear(),a=n.getMonth()+1,r=n.getDate(),i=n.getHours(),s=n.getMinutes(),c=n.getSeconds();return`${o}-${t(a)}-${t(r)} ${t(i)}:${t(s)}:${t(c)}`},F=async e=>new Promise((t,n)=>{const o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="blob",o.onload=function(){const e=o.response,n=new FileReader;n.readAsArrayBuffer(e),n.onload=()=>{t(n.result),clearInterval(a),a=null}},o.onprogress=function(e){if(e.lengthComputable){const t=Math.floor(e.loaded/e.total*100);p.default.emit("file_download",t),o.loadTime=+new Date}};let a=setInterval(()=>{const e=+new Date;o.loadTime&&e-o.loadTime>l.a.PROJECT_SAVE_TIMEOUT&&r("network error")},1e3);o.onerror=e=>{r(e)};try{o.send()}catch(e){r(e)}function r(e){o.abort(),clearInterval(a),a=null,p.default.emit("file_download_error"),n(e)}}),B=async e=>new Promise((t,n)=>{const o=new FileReader;o.readAsArrayBuffer(e),o.onload=function(){const e=o.result;t(e)},o.onerror=e=>{n(e)}}),G=e=>{const t=e||window.location.href.split("?")[1];return t?a.a.chain(t).split("&").map(a.a.partial(a.a.split,a.a,"=",2)).fromPairs().value():null},H=e=>{return"[object Blob]"===Object.prototype.toString.call(e)},V=e=>"string"!=typeof e?e:-1!==e.indexOf("http")?e.replace("http:","https:"):e,z=(e,t=!0,n=!0)=>{const o=document.createElement("script");o.src=e,t&&(o.async="async"),n&&(o.defer="defer"),o.onerror=()=>{throw`${e} load failed.`},document.body.appendChild(o)},K=e=>location.href.includes(e),W=()=>u.b.get(l.a.DEFAULT_DEVICE)||["cyberpi"],Y=e=>{u.b.set(l.a.DEFAULT_DEVICE,e)},X=()=>a.a.isEmpty(navigator.languages)?a.a.isEmpty(navigator.language)?"en":navigator.language[0].split("-").length>1&&"zh"===navigator.language.split("-")[0]&&"zh-CN"!==navigator.language?"zh-hant":navigator.language.split("-")[0]:navigator.languages[0].split("-").length>1&&"zh"===navigator.languages[0].split("-")[0]&&"zh-CN"!==navigator.languages[0]?"zh-hant":navigator.languages[0].split("-")[0],J=e=>{void 0}}.call(this,n(24).Buffer)},18:function(e,t,n){"use strict";var o=n(4),a=n.n(o),r=n(3),i=n(5),s=n(7),c=n(14),l=n(17),d=n(87),p=n(42);var u=new class{constructor(){}getChannelId(){return this.channelId}setChannelId(e){this.channelId=e}},h=n(13);const m=n(65),f=n(23).default,E=n(17),g={id:"iot",getServiceKey:(e,t)=>new Promise(n=>{n(m.UserService.accesstoken(e,t))}),getDomain:e=>new Promise(t=>{let n="";"cloudList"===e?n=E.translateRequestUrlForEU(f.domainconfig.iot):"weather"===e?n=E.translateRequestUrlForEU(f.domainconfig.weather):"air"===e&&(n=E.translateRequestUrlForEU(f.domainconfig.air)),t(n)})};var T=n(185),b=n(85);const S={id:"firmware.uploader",getDriver(e){const t=b.a.getFirmwareDriver(e);return(e,n,o,a,r,i)=>{try{t(window.currentPort,e,o,(e,t)=>{e?r(e):a()},i)}catch(e){r(""+e)}}}},O={id:"code.uploader",getDriver(e){const t=b.a.getUploadDriver(e);return(e,n,o,a,r,i)=>{try{t(window.currentPort,e,o,e=>{e?r(e):a()},i)}catch(e){r(""+e)}}}},w={id:"code.processor",getDriver(e){let t=b.a.getMiddleware(e);return(e,n,o,a)=>new Promise((o,a)=>{t({code:e,options:n}).then(e=>o(e.code),a)})}};let I=!1;r.default.on("firmware.update.cancel",(e,t)=>{t&&(I=!0)});let C=S.id;const v={id:"system.ui.progress",log(e){r.default.emit("CompilerLog",e)},error(e){C==S.id?r.default.emit("uploadFirmwareFail",e):r.default.emit("UploadCodeProgress",e,null)},setProgress(e){e>=100||(C==S.id?r.default.emit("uploadFirmwareProgress",e):r.default.emit("UploadCodeProgress",null,{type:"progress",percent:e}))},open(e){I?I=!1:(C=e,C==S.id?r.default.emit("ClickUploadOnlineFirmware"):r.default.emit("ClickUploadCode"))},close(){C==S.id?r.default.emit("uploadFirmwareFinished"):r.default.emit("UploadCodeProgress",null,{type:"finish",percent:100})}};let R=()=>{},A=()=>{};const y={id:"system.ui.firmware.uploader",open(e){r.default.emit("ShowUpdateFirmware",e)},onOK(e){R=t=>{try{e(t)}catch(e){}}},onFail(e){A=t=>{try{e(t)}catch(e){}}}};y.open=y.open.bind(y),y.onOK=y.onOK.bind(y),y.onFail=y.onFail.bind(y),r.default.on("downloadFirmwareOK",e=>R(e)),r.default.on("downloadFirmwareFail",e=>A(e));var N=n(115),k=n(63),L=n(99);const P={id:"system.ui",alert:(e,t="info",n=2)=>new Promise(o=>{e&&(e=Object(L.a)(e),k.a[t](e,n)),o()}),message:(e,t="info",n=2)=>new Promise(o=>{e&&(e=Object(L.a)(e),k.a[t](e,n)),o()}),dialog:(e,t)=>new Promise(n=>{n(Object(N.a)(e,t))})};var D=n(15),M=n(21);const x={id:"env",getInternationalVertion:()=>new Promise(e=>{e(D.a.isInternational)}),getLocaleLang:()=>new Promise(e=>{const{supportedLangs:t,langKey:n}=M.a.getState().intlr,o=s.b.supportedLangKeysList||t||[];e(o[n]&&o[n].name||"")})};var U=n(219),_=n(74),j=n(231);const q={};class F{constructor(){this.wifiChannel=new U.a("",{},null),_.a.runtime.establishChannel(),_.a.runtime.client.on("s2c_receive",e=>{this._onConnectReceived(e)})}send(e,t,n){return e=e.toString(),new Promise((o,a)=>{this.wifiChannel.write("send",e,n,t,(e,t)=>{e&&(r.default.emit("disconnect",e),a(e)),o(t)})})}onMessage(e,t,n){this.wifiChannel.write("onMessage",null,t,e),this._registerOnReceive(t,e,n)}close(e,t){this.wifiChannel.write("closeUdp",null,t,e)}_onConnectReceived(e){if("wifi"!==e.connectType)return;const t=Object(l.bufferToString)(e.data).split("|");q[t[0]]&&q[t[0]](t[1])}_registerOnReceive(e,t,n){q[e+":"+t]=n}}const B={},G={id:"udp",getInstance:()=>new F,create(){const e=new F,t=(new Date).getTime();return B[t]=e,t},dispose(e){B[e].close(),B[e]=null},close(e,t,n){B[n].close(e,t)},send(e,t,n,o){B[o].send(n,e,t)},onMessage(e,t,n,o){B[o].onMessage(e,t,n)},getInfo(e,t,n){j.a.getInfo(e,t,n)}},H={id:"connect",disconnect:()=>{r.default.emit("disconnect")},setConnectBtnState:e=>{r.default.emit("enableConnectBtn",e)}},V={id:"env",getProjectName:()=>new Promise(e=>{const{name:t}=M.a.getState().project;e(t)})};var z={Iot:g,Account:T.a,codeUploader:O,firmwareUploader:S,codeProcessor:w,UIProgess:v,UIFirmware:y,SystemUi:P,Env:x,Udp:G,Connect:H,Project:V},K=n(245),W=n(247),Y=n(78),X=n(22),J=(e=[])=>{if(!e[0])return;const t={extensions:{}},n=[];return e.forEach(e=>{t.extensions[e]={},n.push({name:e,isStage:!1,x:0,y:0,size:100,direction:90,draggable:!1,currentCostume:0,costumeCount:1,rotationStyle:"all around",blocks:{},variables:{},lists:{},visible:!1,costumes:[{name:e,bitmapResolution:1,rotationCenterX:60,rotationCenterY:60,skinId:0,dataFormat:"svg",assetId:"06d70cb3d65abe36615f0d51e08c3404",md5ext:"06d70cb3d65abe36615f0d51e08c3404.svg"}]})}),{vmJson:{targets:[{name:"Stage",isStage:!0,x:0,y:0,size:100,direction:90,draggable:!1,currentCostume:0,costumeCount:1,visible:!0,rotationStyle:"all around",blocks:{},variables:{},lists:{},costumes:[{assetId:"cd21514d0531fdffb22204e0ec5ed84a",name:"backdrop1",md5ext:"cd21514d0531fdffb22204e0ec5ed84a.svg",dataFormat:"svg",rotationCenterX:240,rotationCenterY:180}],sounds:[{name:"pop",format:"",rate:11025,sampleCount:258,soundID:1,md5ext:"83a9787d4cb6f3b7632b4ddfebf74367.wav",data:null,dataFormat:"wav",assetId:"83a9787d4cb6f3b7632b4ddfebf74367"}],volume:100,tempo:60,videoTransparency:50,videoState:"off"},...n,{name:"Panda",isStage:!1,x:0,y:0,size:100,direction:90,draggable:!1,currentCostume:0,costumeCount:2,visible:!0,rotationStyle:"all around",blocks:{},variables:{},lists:{},costumes:[{name:"costume1",bitmapResolution:1,rotationCenterX:60,rotationCenterY:60,skinId:0,dataFormat:"svg",assetId:"11111111111111111111111111111111",md5ext:"11111111111111111111111111111111.svg"},{name:"costume2",bitmapResolution:1,rotationCenterX:60,rotationCenterY:60,skinId:1,dataFormat:"svg",assetId:"22222222222222222222222222222222",md5ext:"22222222222222222222222222222222.svg"}],sounds:[{name:"meow",format:"",rate:22050,sampleCount:18688,soundID:0,md5ext:"83c36d806dc92327b9e7049a565c6bff.wav",data:null,dataFormat:"wav",assetId:"83c36d806dc92327b9e7049a565c6bff"}],volume:100}],projectVersion:3,meta:{semver:"3.0.0",vm:"0.1.0",agent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36"}},ideJson:t}},$=n(521),Q=n.n($),Z=n(161);n.d(t,"a",(function(){return te}));let ee=!1;class te{static get isReady(){return ee}constructor(){te._instance=this,this.initMscratch(),this.logger=this.mscratch.logger,this.progress=null,this.project=this.mscratch.project,K.d.attachStorage(this.mscratch.storage),W.a.attachStorage(this.mscratch.storage)}initMscratch(){this.mscratch=new Q.a({lang:Object(p.c)(),resource:{scratch_path:s.b.spriteBasepath,user_path:s.b.userSpriteBasepath},loadExtTimeout:s.b.loadExtTimeout,enableDevice:s.b.enableDevice,openCodeEditor:s.b.openCodeEditor,openCodeMirror:s.b.openCodeMirror,blocklyOptions:s.b.blocklyOptions,ErrorComponent:s.b.ErrorComponent,platform:s.b.platform,enableShowHelp:s.b.enableShowHelp})}afterInject(){window.innerWidth<=1536&&this.mscratch.layout.setSmallStage()}inject(e,t){const n=this.mscratch.inject(e,t);return this.afterInject(),this.mscratch.onDidMount(()=>{r.default.emit("MscratchDidMount")},!0),this.mscratch.project.onProjectEndLoad(()=>{r.default.emit("ProjectEndLoad"),r.default.emit("project_end_rendered")}),this.mscratch.onReady(()=>{ee=!0,this.addHotKeys(),s.b.defaultCompanionMode&&this.setCompanionMode(!0),this.mscratch.vm.onAssetLoaded(e=>{this.assetLoadedHandler&&this.assetLoadedHandler(e)});for(const e in z)this.mscratch.registService(z[e]);this.mscratch.transporter.setSender((e,t,n)=>{r.default.emit("SetSender",e,t,n)}),this.mscratch.toolbox.onCategorySelected(e=>{e.parentHtml_&&e.parentHtml_.scrollIntoView({behavior:"smooth",block:"nearest"})}),this.mscratch.connection.onConnect(e=>{r.default.emit("ClickConnect",e)}),this.mscratch.connection.onDisconnect(e=>{r.default.emit("ClickDisconnect",e)}),this.mscratch.extensions.onDeviceSpriteAdd(e=>{r.default.emit("DeviceSpriteAdd",e)}),this.mscratch.extensions.onDeviceSpriteDelete(e=>{r.default.emit("DeviceSpriteDelete",e)}),this.mscratch.layout.onOpenExtensionsBtnClicked(()=>{r.default.emit("ClickExtList")}),this.mscratch.layout.onOpenDevicesBtnClicked(()=>{r.default.emit("ClickDeviceList")}),this.mscratch.layout.onOpenSpriteLibraryBtnClicked(()=>{h.a.push("/sprites")}),this.mscratch.layout.onOpenCostumeLibraryBtnClicked(()=>{h.a.push("/costumes")}),this.mscratch.layout.onOpenBackdropLibraryBtnClicked(()=>{h.a.push("/backdrops")}),this.mscratch.layout.onOpenSoundLibraryBtnClicked(()=>{h.a.push("/sounds")}),this.mscratch.vm.onTurboModeChanged(e=>{r.default.emit("ToggleTurboMode",e)}),this.mscratch.extensions.addUpdateListener(e=>{r.default.emit("LoadedExt",e)},e=>{r.default.emit("UnloadedExt",e)}),this.mscratch.workspace.onFlyoutBlockClicked(e=>{r.default.emit("FlyoutBlockClicked",e)}),this.mscratch.scratchEvents.onWorkspaceClicked(()=>{r.default.emit("CanHideOpenedMenu")}),this.mscratch.workspace.onUndo(e=>{r.default.emit("SetUndoRedoOperate",e)}),this.mscratch.project.onImportSprite&&this.mscratch.project.onImportSprite(e=>{r.default.emit("ImportSpriteFromZip",e)});for(const e in d.a.drivers)this.mscratch.extensions.registerFirmwareDriver(e,d.a.drivers[e]);for(const e in d.a.upload.middlewares)this.mscratch.extensions.registerUploadMiddleware(e,d.a.upload.middlewares[e]);this.mscratch.vm.onSoundRecorded(e=>{W.a.addUserSound(e),te.disableAutoAddSound||this.mscratch.vm.addSound(e),te.disableAutoAddSound=!1}),r.default.emit("MscratchReady")}),n}addHotKeys(){Object(Z.a)("ctrl+shift+left",(e,t)=>{e.preventDefault(),this.shrinkStage(!0)}),Object(Z.a)("ctrl+shift+right",(e,t)=>{e.preventDefault(),this.shrinkStage(!1)})}async import(e=null,t){if(c.c.has("file"))return c.c.read(e,t);if(!(e instanceof File))try{e=await Object(l.openProjectTarget)(t)}catch(e){throw new Error(e)}return this.useWebRead(e)}async getProjectJson(){const e={channelId:u.getChannelId(),version:s.b.version,createdAt:(new Date).getTime()};return window._baseProjInfo=e,await this.mscratch.project.getProjectJson([{name:"mblock5",data:e}])}getProjectJsonString(){return this.mscratch.project.getProjectJsonString()}getProjectCoverPic(){return this.mscratch.stage.getCoverImage()}async renderProject(e,t,n){const o=(...e)=>{"function"==typeof t&&t(...e)},i=(...e)=>{"function"==typeof n&&n(...e),r.default.emit("project_end_rendered")},s=Y.a.fetchByIds.bind(Y.a);if(a.a.isArrayBuffer(e)||Object(l.isBlob)(e))return await this.mscratch.project.load(e,o,i,s);if(a.a.isString(e))try{e=JSON.parse(e)}catch(e){}if(a.a.isObject(e)){if(e.isBuffer)return await this.mscratch.project.load(e.buffer,o,i,s);if(e.ide||e.mscratch){const t=e.ide||e,n=a.a.has(e,"ai")?{deeplearning:e.ai}:null;return this.mscratch.project.renderProjectJson(t,n,o,s)}return await this.mscratch.project.load(e,o,i,s)}return null}useWebRead(e){if(e instanceof File){const t=Object(l.getFileSuffix)(e.name),n=["sb2","sb3","sprite2","sprite3"].indexOf(t)>=0,o="mblock"===t;let r=!1,i=!1;return new Promise((t,s)=>{const c=new FileReader;c.onload=()=>{let n=c.result;if(r=!0,o&&a.a.isString(n))try{n=JSON.parse(n)}catch(t){r=!1,i=!0,c.readAsArrayBuffer(e)}r&&(i&&(n={isBuffer:i,buffer:n}),t({data:n,filePath:e.name}))},c.onerror=e=>{s(e)},n?c.readAsArrayBuffer(e):c.readAsText(e)})}}async export(e,t,n){let o=await this.getProjectJson();if(c.c.has("file"))return o=await Object(l.readAsArrayBuffer)(o),c.c.save(o,e,t);{const e=`${n.name}.${i.a.PROJECT_SUFFIX[0]}`;Object(l.forceDownload)(o,e)}}undo(){this.mscratch.workspace.undo()}redo(){this.mscratch.workspace.redo()}changeLanguage(e){this.mscratch.setLang(e)}addLocaleData(e,t,n){this.mscratch.addLocaleData(e,t,n)}resize(){this.mscratch.svgResize()}doReceived(e){this.mscratch.transporter.doReceived(e)}enableBlocks(e){this.mscratch&&this.mscratch.workspace&&this.mscratch.workspace.disableBlocks(e,!1)}disableBlocks(e){this.mscratch&&this.mscratch.workspace&&this.mscratch.workspace.disableBlocks(e,!0)}reset(){this.mscratch.workspace.reset()}async clear(){const e=await this.renderProject(J(s.b.defaultExts));e&&e.exts&&Object(X.i)(e.exts)}getCodeContent(){return this.mscratch.code.getContent()}getAllExtensionIds(){return this.mscratch.extensions?this.mscratch.extensions.getAllExtensionIds():null}setCodeContent(e){this.mscratch.codey.setContent(e)}handshakeDTR(){this.mscratch.codey.handshakeDTR().then(e=>{})}addSprite(e){return this.mscratch.vm.addSprite(e)}async importSprite(e,t,n){const o=Y.a.fetchByIds.bind(Y.a),a=await this.import(e);return this.mscratch.project.loadSprite(a&&a.data,t,n,o)}addCostume(e){return this.mscratch.vm.addCostume(e)}addBackdrop(e){return this.mscratch.vm.addBackdrop(e)}addSound(e){return this.mscratch.vm.addSound(e)}openRecordSound(){return this.mscratch.layout.openSoundRecorder()}uploadRetry(){this.mscratch.uploader.uploadCode()}clearUpWorkspace(){}clearLayout(){this.mscratch.layout.soundEditorHide(),this.mscratch.layout.costumeEditorHide(),this.mscratch.layout.blocklyChaffHide()}stop(){this.mscratch.vm.stop()}costumeEditorShow(){this.mscratch.layout.costumeEditorShow(),this.mscratch.layout.soundEditorHide()}setTransporterRawPort(e){this.mscratch.transporter.setRawPort(e)}isCostumeEditorOpened(){return this.mscratch.layout&&this.mscratch.layout.isCostumeEditorOpened()}isSoundEditorOpened(){return this.mscratch.layout&&this.mscratch.layout.isSoundEditorOpened()}uploadFirmware(e){this.mscratch.uploader.uploadFirmware(e)}switchTransportChannel(e){this.mscratch.transporter.switchChannel(e)}setBlocklyChaffHide(){return this.mscratch.layout&&this.mscratch.layout.blocklyChaffHide()}setTurboMode(e){this.mscratch.vm.setTurboMode(e)}shrinkStage(e){this.mscratch.layout.shrinkStage(e),r.default.emit("ToggleShrinkMode",e)}getAssetTypes(){return this.mscratch.storage.AssetType}addWebProjectStore(e,t,n){this.mscratch.storage.addWebStore([this.mscratch.storage.AssetType.Project],e,t,n)}addWebStore(e,t,n){this.mscratch.storage.addWebStore([this.mscratch.storage.AssetType.ImageVector,this.mscratch.storage.AssetType.ImageBitmap,this.mscratch.storage.AssetType.Sound],e,t,n)}prependWebStore(e,t,n){const o=this.mscratch.storage.webHelper.stores,a=this.mscratch.storage.AssetType,r={types:[a.ImageVector.name,a.ImageBitmap.name,a.Sound.name],get:e,create:t,update:n};o.unshift(r)}getAssets(){return this.mscratch.vm.getAssets()}getLoadedDevices(){return this.mscratch.extensions?this.mscratch.extensions.loadedExtensions:null}onAssetLoaded(e){this.assetLoadedHandler=e}setBlockHelpComponent(e){this.mscratch.setBlockHelpComponent(e)}setPrimaryColor(e){this.mscratch.setPrimaryColor(e)}onProjectLoaded(e){this.projectLoadedHandler=e}triggerLoadExtensionFailed(e,t){this.mscratch.extensions&&this.mscratch.extensions.triggerLoadFailed(e,t)}setCompanionMode(e){e?(this.removeCompanionListener||(this.removeCompanionListener=this.mscratch.toolbox.onCompanionCategorySelected((e,{name:t})=>{e||r.default.emit("OpenCompanionCategoryNotice",t)})),this.mscratch.extensions.openCompanionMode()):(this.mscratch.extensions.closeCompanionMode(),this.removeCompanionListener&&this.removeCompanionListener(),delete this.removeCompanionListener),r.default.emit("ToggleCompanionMode",this.mscratch.extensions.isCompanionMode)}async cacheAsset(e,t){await this.mscratch.storage.cacheAssetFromUrl(e,t)}static get instance(){return te._instance?te._instance:null}static get mscratch(){return te._instance?te._instance.mscratch:null}}},181:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));class o{constructor(){}set(e,t){window.localStorage.setItem(e,JSON.stringify(t))}get(e){try{const t=window.localStorage.getItem(e);return t?JSON.parse(t):""}catch(e){return!1}}remove(e){return window.localStorage.removeItem(e),!0}clear(){return window.localStorage.clear(),!0}}t.a=o;const a=new o},184:function(e,t,n){"use strict";(function(e){var o=n(49);const a=n(4),r=n(666),i=n(217),s=n(360),c=n(195),l=n(264),d=()=>{const t=new r({quiet:!1});return a.extend({},t,{bootload:function(e,n,a,r,i){this.progressHandle=r,this.length=-1,this.progress=-1,this.baseProgress=-1,o.a.info("stk500v1 bootload"),t.bootload.call(this,e,n,a,i)},loadAddress:function(e,n,o,a){const r=this.baseProgress+Math.round(100*n/this.length);this.progress!==r&&(this.progress=r,this.progressHandle&&setTimeout(()=>{this.progressHandle(r)},0)),t.loadAddress.call(this,e,n,o,a)},upload:function(e,n,a,r,i){o.a.info("stk500v1 upload"),this.baseProgress=0,this.length=n.length,t.upload.call(this,e,n,a,r,i)},verify:function(e,n,a,r,i){o.a.info("stk500v1 verify"),this.baseProgress=50,this.length=n.length,t.verify.call(this,e,n,a,r,i)},verifyPage:function(t,n,o,a,r){const i=e.concat([new e([c.Resp_STK_INSYNC]),n,new e([c.Resp_STK_OK])]),l=n.length>=o?o:n.length,d={cmd:[c.Cmnd_STK_READ_PAGE,l>>8&255,255&l,70],responseLength:i.length,timeout:a};s(t,d,(function(e,t){r(e,t)}))}})};t.a=function(t,n,a,r){const s=d();let c,p;t?(c=l.promisify(e=>{e(null,t)}),p=()=>{}):o.a.error("serial port not set");const u=l.promisify(t.set.bind(t)),h=l.promisify(s.bootload.bind(s));o.a.info("stk500 starting..."),setTimeout(()=>{l.join(i.parse(n).data,c().then((function(){return u({rts:!0,dtr:!0})})).delay(50).then((function(){return u({rts:!1,dtr:!1})})).delay(50).then((function(){return u({rts:!0,dtr:!0})})).delay(50),(function(e){return e})).then((function(n){const o={signature:new e([30,149,15]),pageSize:128,timeout:1e3};return h(t,n,o,a)})).then((function(){return u({rts:!1,dtr:!1})})).then(()=>{p(),r(null,!0)}).catch(e=>{e&&(e.message.indexOf("3020")>-1?o.a.info("board is not match"):e.message.indexOf("timeout")>-1&&o.a.info("board firmware: timeout")),p(),r(e,null)})},600)}}).call(this,n(24).Buffer)},185:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var o=n(3),a=n(223),r=n(20),i=n(21);let s;const c=e=>{s=e},l={id:"account",getToken:()=>Promise.resolve(s&&s.token||r.a.token||""),getServiceKey:(e,t)=>s&&s.accesstoken?Promise.resolve(s.accesstoken):a.a.accesstoken(e,t),getUserInfo:()=>Promise.resolve(s||i.a.getState().passport.userInfo),onLogin:e=>(o.default.on("Login",e),()=>{o.default.removeListener("Login",e)}),onLogout:e=>(o.default.on("Logout",e),()=>{o.default.removeListener("Logout",e)}),isLogin:()=>Promise.resolve(Boolean(s||i.a.getState().passport.userInfo))}},19:function(e,t,n){"use strict";var o=n(64),a=n(23),r=n(18),i=n(20),s=n(140),c=n(4),l=n.n(c),d=n(17),p=n(15),u=n(13),h=n(7),m=n(228),f=n(3);const E=new class{constructor(){this.preProjectData=null,this.nextProjectCache=null,this.isFirstLoad=!0,this.isLoaded=!1,this.isConfirmName=!1,this.projectLoaders=[],this.exampleProjects=[];const e={get_cloud_projects:{method:"post",url:"cloud/pro/list"},get_some_cloud_projects:{method:"post",url:"getprojectbycpids"},rename_project:{method:"post",url:"cloud/pro/edit"},delete_project:{method:"post",url:"cloud/pro/del"},share_project:{method:"post",url:"project/publish"},cancel_share_project:{method:"post",url:"project/unpublish"},get_url_token:{domain:()=>a.default.domainconfig.passport2[p.a.getInternational],method:"post",url:"v1/user/geturltoken",header:{clientdevice:`system/${window.navigator.userAgent};version/${h.b.version}`}},set_project_as_third_platform:{method:"post",url:"project/ThirdPlatform"},get_example_projects:{domain:()=>a.default.domainconfig.extservice[p.a.getInternational],method:"get",url:"api/publish/config/example"}};a.default.configToRequestAction.call(this,e,a.default),p.a.isWeb&&this.registerProjectLoader(this.cloudProjectLoader.bind(this)),m.a.forEach(e=>{this.registerProjectLoader(e)}),this.listenLoadStateChangeEvent()}listenLoadStateChangeEvent(){f.default.on("file_download",()=>{this.isLoaded=!1}),f.default.on("file_download_error",()=>{this.isLoaded=!0}),f.default.on("MscratchReady",()=>{this.isLoaded=!0}),f.default.on("project_end_rendered",()=>{this.isLoaded=!0})}get domain(){return a.default.domainconfig.cloud[p.a.getInternational]}async getProjectList(){try{return(await this.get_cloud_projects({_HEADER_:{utoken:i.a.token}})).cloudProjectList.map(e=>({...e,projectId:e.id,isDeleted:1===e.isDeleted,isShare:1===e.isShare}))}catch(e){return{error:e}}}async renameProject(e,t,n){try{const o=await this.rename_project({projectId:e,projectName:t,createdAt:n,_HEADER_:{utoken:i.a.token}});return l.a.isEmpty(this.projects)||(this.projects=this.projects.map(n=>n.id===e?{...n,projectName:t}:n)),o}catch(e){return{error:e}}}async deleteProject(e){try{return await this.delete_project({projectId:e,_HEADER_:{utoken:i.a.token}})}catch(e){return{error:e}}}async fetchProjectBaseInfoById(e){if(!e)return;const t=[e];try{const e=await this.get_some_cloud_projects({projectIds:t}),n=e&&e.projectList&&e.projectList[0];return"{}"===JSON.stringify(n)?null:n}catch(e){return{error:e}}}async fetchProjectData(e,t,n,a){try{const r=await s.a.downloadToken({utoken:i.a.token,pid:1,cloudProjectId:n,classToken:a||""});if(r){Object(o.onSetProjectPlatformType)(n),Object(o.setProjectCloudThirdPlatform)(r.isForThirdPlatform),r.commitId=e,r.localName=t||"project";const a=s.a.fetchFileUrl(r);return await Object(d.readFile)(a)}throw new Error("get oss download token failed.")}catch(e){return{error:e}}}selectSaveOperation(){return{new:function(e){const{_id:t,createdAt:n,name:o,projectData:a,projects:r}=e,i={id:t,createdAt:n,projectName:o,data:a},s=i;return r.push(i),{projectId:"",projectInfo:s,projects:r}},update:function(e){const{createdAt:t,projectInfo:n,name:o,projectId:a,projectData:r,projects:i}=e,s=i.findIndex(e=>e.id===a);-1!==s&&(i[s]={...i[s],createdAt:t,projectName:o,data:r});const c={...n,projectId:a,createdAt:t,projectName:o,localName:o,data:r};return{projectId:a,projectInfo:c,projects:i}},adapt:function(e){const{id:t,createdAt:n,name:o,projectId:a,projectData:r,projects:i}=e,s={id:t,createdAt:n,projectName:o,data:r},c=s;return i.push(s),{projectId:a,projectInfo:c,projects:i}}}}isSaved(){if(h.b.disableConfirmSave)return!0;return this.preProjectData===r.a.instance.getProjectJsonString()}setSaved(e){this.isFirstLoad=!1;const t=!1===e?"null":"";this.preProjectData=t||r.a.instance.getProjectJsonString()}getProject(e,t=[]){return t.filter(t=>t.id===Number(e))[0]}getCorrectId(e){const t=(Object(d.getUrlParams)()||{}).cloudProjectId||"";return e=t||e}isSelfProject(e,t){const n=this.getCorrectId(e);return!!(!n||n&&this.getProject(n,t))}hadShared(e,t){let n=!1;const o=e.filter(e=>e.id===Number(t))[0];return t&&o&&o.isShare&&(n=!0),n}getNewProjectName(e,t){t=t||[],e=l.a.trim(e).length>48?e.substring(0,48):e;const n=t.filter(e=>!e.isDeleted).map(e=>e.projectName);if(l.a.indexOf(n,e)>-1){const t=(e=e.replace(/\(\d+\)$/,"")).replace("(","\\(").replace(")","\\)");let o=0;return n.forEach(e=>{const n=e.match(new RegExp(t+"\\((\\d+)\\)$"));n&&n[1]>o&&(o=Number(n[1]))}),e+"("+((o>98?98:o)+1)+")"}return e}async uploadCoverImage(e,t){try{const n=await s.a.uploadImgToken({_HEADER_:{utoken:i.a.token,pid:2}});if(n){const o=new File(Array(e),t),a=await s.a.uploadCoverImg(n,o);if(a&&a.res&&200===a.res.status){return`https://${n.bucket}.${n.region}.aliyuncs.com/${n.commitId}`}return""}}catch(e){return""}}sortBy(e,t){switch(t){case"createdAtReverse":return e.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt));default:return e}}search(e,t){return l.a.filter(e,e=>-1!==e.projectName.toLowerCase().indexOf(l.a.trim(t.toLowerCase())))}searchExample(e,t,n){return l.a.filter(e,e=>-1!==e.name[n].toLowerCase().indexOf(l.a.trim(t.toLowerCase())))}export(){return r.a.instance.export()}exportFromWeb(e){r.a.instance.export(null,null,e)}async isProjectCanBeVisited(e){if(!e)return!1;return null!==await this.fetchProjectBaseInfoById(e)||(Object(o.onInitProjectInfo)(),!1)}async cloudProjectLoader(e){const{cloudProjectId:t,classToken:n}=Object(d.getUrlParams)(e)||{};if(t){const e=await this.fetchProjectBaseInfoById(t);if(e)return await this.fetchProjectData(e.commitId,e.projectName,t,n);u.a.push("/")}}async saveAsThirdPlatformProject(e){await this.set_project_as_third_platform({cloudProjectId:e,_HEADER_:{utoken:i.a.token}}).then(t=>{void 0===t.code&&Object(o.onSetProjectPlatformType)(e)})}async loadRemoteProjectFromUrl(){for(const e of this.projectLoaders){const t=await e();if(t)return t}}registerProjectLoader(e){return-1===this.projectLoaders.indexOf(e)&&this.projectLoaders.push(e),()=>{const t=this.projectLoaders.indexOf(e);-1!==t&&this.projectLoaders.splice(t,1)}}async getExampleProjects(){try{if(0===this.exampleProjects.length){const e=await this.get_example_projects();this.exampleProjects=e}return this.exampleProjects}catch(e){return{error:e}}}};window.projectService=E,t.a=E},20:function(e,t,n){"use strict";var o=n(181),a=n(44),r=n.n(a),i=n(5);let s;s=o.a;t.a=new class extends s{setToken(e){e&&(r.a.token=e,this.set(i.a.USER_ACCESS_TOKEN_KEY,e),this.set(i.a.USER_ACCESS_UTOKEN_KEY,e))}removeToken(){this.remove(i.a.USER_INFO_KEY),this.remove(i.a.USER_ACCESS_TOKEN_KEY)}get token(){return r.a.token||this.get(i.a.USER_ACCESS_UTOKEN_KEY)||this.get(i.a.USER_ACCESS_TOKEN_KEY)}get accessToken(){return this.get(i.a.USER_ACCESS_ACCESSTOKEN_KEY)}setFeedBackData(e){this.set(i.a.FEEDBACK_CACHE_KEY,e)}get FeedBackData(){return this.get(i.a.FEEDBACK_CACHE_KEY)||{profession:"",description:"",contact:"",call:"",attachment:""}}setLang(e){this.set(i.a.INTL_LANG_KEY,e)}get lang(){return this.get(i.a.INTL_LANG_KEY)}setAppVersion(e){this.set(i.a.APP_VERSION,e)}get appVersion(){return this.get(i.a.APP_VERSION)}setIsIntl(e){this.set(i.a.INTERNATIONAL_VERSION,e)}get isIntl(){return this.get(i.a.INTERNATIONAL_VERSION)}setEnableRemind(e){this.set(i.a.REMIND_UPDATE,e)}get enableRemind(){return this.get(i.a.REMIND_UPDATE)}setIngoreVersions(e){this.set(i.a.IGNORE_UPDATE_VERSIONS,e)}get ingoreVersions(){return this.get(i.a.IGNORE_UPDATE_VERSIONS)}setExampleKey(e){this.set("exampleKey",e)}get exampleKey(){return this.get("exampleKey")}setUserInfo(e){this.set(i.a.USER_INFO_KEY,e)}get userInfo(){return this.get(i.a.USER_INFO_KEY)}}},21:function(e,t,n){"use strict";var o=n(139),a=n(512),r=n(51),i=n(4),s=n.n(i),c=n(65),l=n(41),d=n(5);const p={type:d.a.CONNECT_TYPE.SERIAL,connectedType:"",connectionInfo:{},status:d.a.CONNECT_STATUS.NOT_CONNECTED,current:"",devices:[],scanStatus:d.a.SCAN_STATUS.SCAN_READY,scanData:{},isShowAll:!1,isSoftDisconnect:!1},u=(e,t)=>{let{devices:n}=e;return t.device?n=[t.device]:!1===t.device&&(n=[]),Object.assign({},e,{...t,devices:n})};var h={reducer:(e=p,t)=>{switch(t.type){case l.g:return((e,t)=>{let{devices:n}=e;return s.a.isEmpty(n)||t.device&&t.isRemove&&n.forEach(e=>{e.name===t.device.name&&(e.name=null)}),e})(e,t.payload);case l.a:case l.f:return((e,t)=>{const{type:n,scanStatus:o,scanData:a,isShowAll:r}=t;let i=Object.assign({},e,t);if(o!==d.a.SCAN_STATUS.SCAN_SUCCESS)return i;let s=[];if(a&&a[n]&&(s=a[n]),r||(s=c.default.ConnectService.filterList(n,s)),s=c.default.ConnectService.sortBle(s),i.scanData[n]=s,i.current){let e=!1;for(let t=0;t<s.length;t++)if(i.current==s[t].comName||i.current==s[0].path){e=!0;break}e||(s.length>0?i.current=s[0].comName||s[0].path:i.current="")}else s.length>0?i.current=s[0].comName||s[0].path:i.current="";return i})(e,t.payload);case l.b:return u(e,t.payload);case l.e:return((e,t)=>(s.a.isEmpty(t.device)||s.a.remove(e.devices,e=>t.isBroken?t.device.address===e.address:t.device.name===e.name),Object.assign({},e,{status:t.status,connectedType:"",connectionInfo:{},isSoftDisconnect:!1})))(e,t.payload);case l.d:return((e,t)=>u(e,t))(e,t.payload);case l.c:return((e,t)=>{const{devices:n}=e;if(!s.a.isEmpty(n))for(let e=0;e<n.length;e++){const o=n[e];if(o.address===t.device.address){n[e]=Object.assign({},o,t.device);break}}return e})(e,t.payload);case l.j:case l.h:case l.i:return Object.assign({},e,t.payload);default:return e}},actions:l.k},m=n(79);const f={progress_status:d.a.UPLOAD_STATUS.READY,progress_percent:0};var E={reducer:(e=f,t)=>{switch(t.type){case m.d:case m.a:case m.b:case m.c:return Object.assign({},e,t.payload);default:return e}},actions:m.e},g=n(103);const T={operate:{undo:!1,redo:!1},main:!1,lang:!1,user:!1};var b={reducer:(e=T,t)=>{switch(t.type){case g.b:case g.a:return Object.assign({},e,t.payload);default:return e}},actions:g.c},S=n(104),O=n(102),w=n(20),I=n(7);let C=w.a.enableRemind;C=null===C||""===C||C;const v={code:null,model:{last:"",source:"",board:"",codey:{},date_time:"",is_support:!0},progress:null,isAuto:!1,isChecking:!1,isNotNetwork:!1,appVersion:I.b.version,ignoreVersions:w.a.ignoreVersions||[],isRemind:C};var R={reducer:(e=v,t)=>{switch(t.type){case O.f:return Object.assign({},e,{model:{codey:t.payload}});case O.b:return Object.assign({},e,{ignoreVersions:t.payload});case O.a:return Object.assign({},e,{progress:t.payload});case O.e:return Object.assign({},e,t.payload);case O.d:return Object.assign({},e,{firmware:t.payload});case O.c:return Object.assign({},e,{isRemind:t.payload});default:return e}},actions:O.g};const A={tokenModel:{},urlModel:{}};var y={reducer:(e=A,t)=>{switch(t.type){case"GET_URL":return Object.assign({},e,{tokenModel:t.payload});case"GET_TOKEN":return Object.assign({},e,{urlModel:t.payload});default:return e}},actions:{getToken:e=>new Promise((t,n)=>{c.default.QiniuService.token({qiniuKey:e,bucketKey:"PUBLIC"}).then(t,n)}),getUrl:e=>new Promise((t,n)=>{c.default.QiniuService.url({qiniuKey:e,isPublic:!0,bucketKey:"PUBLIC"}).then(t,n)})}},N=n(238);const k={cacheData:w.a.FeedBackData,status:null};var L={reducer:(e=k,t)=>{switch(t.type){case N.b:case N.a:return Object.assign({},e,t.payload);default:return e}},actions:N.c},P=n(28);const D={projects:[],projectId:"",name:"",projectType:"",filePath:"",isSelfProject:!0,isShare:!1,isForThirdPlatform:!1,isShowLoadingPage:!1,saveStatus:"",saveProgress:0};var M=(e=D,{type:t,payload:n})=>{switch(t){case P.d:return{...e,projects:n.projects};case P.g:return{...e,name:n.name};case P.f:return{...e,...n};case P.b:return{...e,projects:n.projects};case P.q:return{...e,...n};case P.p:return{...e,projects:n.projects};case P.h:case P.l:return{...e,name:n.name};case P.c:return{...e,projects:n.projects};case P.i:return{...e,projectType:n.projectType,filePath:n.filePath};case P.o:return{...e,isSelfProject:n.isSelfProject,isShare:n.isShare};case P.k:return{...e,isForThirdPlatform:n.isForThirdPlatform};case P.j:return{...e,isShowLoadingPage:n.isShowLoadingPage};case P.n:return{...e,saveStatus:n.saveStatus};case P.m:return{...e,saveProgress:n.saveProgress};case P.a:return{...e,projects:[]};case P.e:return{...e,isShowLoadingPage:!1};default:return e}},x=n(141);const U={env:"pc",cpuArch:"",cpus:[],isArmOS:!1};var _=(e=U,{type:t,payload:n})=>{switch(t){case x.a:return Object.assign({},e);case x.b:return{...e,env:n.env};case x.c:return{...e,isArmOS:n.isArmOS};default:return e}},j=n(367),q=n(334);const F=Object(o.combineReducers)({intlr:r.default.reducer,connect:h.reducer,upload:E.reducer,menu:b.reducer,updater:R.reducer,qiniu:y.reducer,feedback:L.reducer,project:M,env:_,extensions:j.a,assets:q.a,passport:S.a}),B=Object(o.createStore)(F,Object(o.applyMiddleware)(a.a));window.mstore=B;t.a=B},217:function(e,t,n){(function(e){t.parse=function(t,n){t instanceof e&&(t=t.toString("ascii"));for(var o=new e(n||8192),a=0,r=0,i=null,s=null,c=0,l=0;l+11<=t.length;){if(":"!=t.charAt(l++))throw new Error("Line "+(c+1)+" does not start with a colon (:).");c++;var d=parseInt(t.substr(l,2),16);l+=2;var p=parseInt(t.substr(l,4),16);l+=4;var u=parseInt(t.substr(l,2),16);l+=2;var h=t.substr(l,2*d),m=new e(h,"hex");l+=2*d;var f=parseInt(t.substr(l,2),16);l+=2;for(var E=d+(p>>8)+p+u&255,g=0;g<d;g++)E=E+m[g]&255;if(f!=(E=256-E&255))throw new Error("Invalid checksum on line "+c+": got "+f+", but expected "+E);switch(u){case 0:var T=r+p;if(T+d>=o.length){var b=new e(2*(T+d));o.copy(b,0,0,a),o=b}T>a&&o.fill(255,a,T),m.copy(o,T),a=Math.max(a,T+d);break;case 1:if(0!=d)throw new Error("Invalid EOF record on line "+c+".");return{data:o.slice(0,a),startSegmentAddress:i,startLinearAddress:s};case 2:if(2!=d||0!=p)throw new Error("Invalid extended segment address record on line "+c+".");r=parseInt(h,16)<<4;break;case 3:if(4!=d||0!=p)throw new Error("Invalid start segment address record on line "+c+".");i=parseInt(h,16);break;case 4:if(2!=d||0!=p)throw new Error("Invalid extended linear address record on line "+c+".");r=parseInt(h,16)<<16;break;case 5:if(4!=d||0!=p)throw new Error("Invalid start linear address record on line "+c+".");s=parseInt(h,16);break;default:throw new Error("Invalid record type ("+u+") on line "+c)}"\r"==t.charAt(l)&&l++,"\n"==t.charAt(l)&&l++}throw new Error("Unexpected end of input: missing or invalid EOF record.")}}).call(this,n(24).Buffer)},218:function(e,t,n){"use strict";var o=n(23),a=n(15);t.a=new class{constructor(){this.domain=o.default.domainconfig.iot;const e={device_register:{method:"post",url:"meos/register",headers:this.get_codey_req_header.bind(this)},ide_createcloudlist:{method:"post",url:"ide/createcloudlist",auto:!0},ide_postcloudlist:{method:"post",url:"ide/postcloudlist",auto:!0},ide_getcloudlist:{method:"post",url:"ide/getcloudlist?listName=$listName",auto:!0},ide_getcloudlistlen:{method:"get",url:"ide/getcloudlistlen?listName=:listName",auto:!0},ide_getcloudlistitembyindex:{method:"get",url:"ide/getCloudListItemByIndex?listName=:listName&type=:type&index=:index",auto:!0},ide_getAllCloudListName:{method:"get",url:"ide/getAllCloudListName",auto:!0},search_city:{domain:o.default.domainconfig.weather,method:"get",forceData:!0,url:"weatherSearch?city=:city"},search_city_air:{domain:o.default.domainconfig.air[a.a.getInternational],method:"post",forceData:!0,url:"air/search"},get_city_air_arglist:{domain:o.default.domainconfig.air[a.a.getInternational],method:"post",url:"air/arglist"}};o.default.configToRequestAction.call(this,e,o.default)}set_codey_req_header(e,t,n){this.codeyReqHeader={deviceid:t,devicetype:e,uid:n}}get_codey_req_header(){return this.codeyReqHeader}get_wifi_list(){const e=window.MbApi.getServiceChannel(),t={connectType:"wlanScan",cmd:"scanning",params:{}};return new Promise((n,o)=>{if(!e)return o("wlan scan service not available");e.sendMessage(t,(e,t)=>{if(e)return o(e);n(t)})})}}},219:function(e,t,n){"use strict";var o=n(4),a=n.n(o),r=n(40),i=n(25),s=n(22),c=n(218);const l=function(){const e=Object(s.b)();let t={};return e&&e.config&&e.config.options&&(t=e.config.options.connect.wifi),t};class d extends r.EventEmitter{constructor(e,t,n){super(),this.connectType="wifi",t=t||{};const o=l();this.options=Object.assign(t,o),this.params={ip:this.options.ip},this.options.port=e,this.isOpen=!1,this.initListeners(),a.a.isFunction(n)&&n()}initListeners(){i.a.createListeners("wifi","onReceive",e=>{e.error?"disconnect"===e.error?(this.emit("disconnect",e.error,this.isOpen),this.isOpen=!1):"close"===e.error?(this.emit("disconnect",e.error,this.isOpen),this.isOpen=!1):(this.emit("error",e.error,this.isOpen),this.isOpen=!1):this.emit("data",e.data)}),i.a.addDisconnectListener(e=>{this.emit("disconnect",e,this.isOpen),i.a.destroyListeners("wifi","onReceive"),this.isOpen=!1})}static async list(e,t){const n=l();if(n.mode&&"STA"===n.mode.toUpperCase())return[];const o=n.ssid;t(null,(await c.a.get_wifi_list()).filter(e=>{if(e.ssid)return e.ssid.includes(o)}),n)}open(e){return i.a.sendMessage({connectType:"wifi",cmd:"open",params:this.params},t=>{this.isOpen=!t,e(t)}),this}close(e){return new Promise(t=>{i.a.sendMessage({connectType:"wifi",cmd:"close",params:this.params},(n,o)=>{this.isOpen=!1,a.a.isFunction(e)&&e(n,o),t()})})}write(e,t,n,o,r){return new Promise(s=>{i.a.sendMessage({connectType:"wifi",cmd:e,params:Object.assign(this.params,{data:t,hostname:n,port:o})},(e,t)=>{"disconnect"===e&&(this.emit("disconnect",e,this.isOpen),this.isOpen=!1),a.a.isFunction(r)&&r(e,t),s()})})}}t.a=d},22:function(e,t,n){"use strict";n.d(t,"i",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h})),n.d(t,"j",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"g",(function(){return E})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return T})),n.d(t,"h",(function(){return c})),n.d(t,"k",(function(){return l}));var o=n(5),a=n(15),r=n(76),i=n(18),s=n(78);const c=async(e,t=!1)=>{try{const n=await(async e=>(window.AMDLoader&&await Object(r.f)(),new Promise((t,n)=>{let o,r=a.a.isLocal,i="";r=!0,i=`?${Date.now()}`,o=`${s.a.extractPath}${e.main}`.replace(/\\/g,"/"),a.a.enablePreview&&(i=`?${Date.now()}`),i&&(o+=i);try{window.require([o],e=>{t(e)},e=>{n(e)})}catch(e){n(e)}})))(e);let o;return o=e.extraInfo&&e.extraInfo.fromScratch3||e.fromScratch3?await i.a.mscratch.extensions.loadScratchExtension(e.id,n,e):await i.a.mscratch.extensions.load(e.id,n.default,t),!!o}catch(t){return i.a.instance.triggerLoadExtensionFailed(e.id,t),!1}},l=e=>i.a.mscratch.extensions.unload(e),d=e=>new Promise(t=>{if(!Array.isArray(e)||!e.length)return t();let n=[];s.a.fetchByIds(e,e=>{n=e.map(e=>c(e))}).then(()=>Promise.all(n)).then(t)}),p=()=>{const e=i.a.mscratch?i.a.mscratch.extensions.getAllTargets():[];let t=[];return e.forEach(e=>{!0!==e.isScratch&&(t=t.concat(e.scratchTargtes.map(t=>{const n=t.name||t.sprite.name,o=e.deviceId;return{id:t.id,name:n,deviceId:o}})))}),t},u=()=>{if(i.a.mscratch&&i.a.mscratch.extensions){const e=i.a.mscratch.extensions.getEditingTarget();if(e&&e.editingSpriteId){const t=e.scratchTargtes.find(t=>t.id===e.editingSpriteId);return{deviceId:e.id,name:t.name}}}return{deviceId:o.a.DEVICE.CODEY,name:o.a.DEVICE.CODEY}},h=()=>{if(i.a.mscratch&&i.a.mscratch.extensions){const e=i.a.mscratch.extensions.getEditingTarget();if(e)return e}return{id:o.a.DEVICE.CODEY}},m=e=>i.a.mscratch.vm.scratchVM.setEditingTarget(e),f=()=>i.a.mscratch.vm.runtime.targets,E=e=>i.a.mscratch.extensions.isBlocksUsed(e);const g=()=>{return h().config},T=()=>i.a.mscratch.extensions.getAllExtensionIds()},223:function(e,t,n){"use strict";var o=n(23),a=n(7),r=n(15);t.a=new class{constructor(){const e={clientdevice:`system/${window.navigator.userAgent};version/${a.b.version}`},t={geturltoken:{method:"post",url:"v1/user/geturltoken",header:e},accesstoken:{method:"post",url:"v1/api/getaccesstoken",header:e},get_cloud_service_key:{domain:()=>o.default.domainconfig.air[r.a.getInternational],method:"post",url:"v1/accesstoken/generate/byutoken"}};o.default.configToRequestAction.call(this,t,o.default)}get domain(){return o.default.domainconfig.passport2[r.a.getInternational]}}},228:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));n(7),n(5);var o=n(17),a=(n(15),n(13)),r=n(14);n(3),n(20),n(727);const i=async e=>{const{localProjectPath:t}=Object(o.getUrlParams)(e)||{};if(t){const e=await r.c.read(decodeURIComponent(t));return a.a.push("/"),e}};t.a=[]},23:function(e,t,n){"use strict";n.r(t);var o=n(4),a=n.n(o),r=n(13),i=n(7),s=n(3),c=n(20),l=n(17);t.default=new class{constructor(){this.domainconfig="function"==typeof i.b.domain?i.b.domain():i.b.domain}request(e){if(!0!==e.local&&!navigator.onLine)return Promise.reject({message:"not network",code:99999});const t=new Request(Object(l.translateRequestUrlForEU)(e.url),{headers:this._getReqHeader(e.header||e.headers),method:e.method||"POST",body:JSON.stringify(e.body),cache:"no-cache",...e.req}),n=fetch(t).then(t=>t.ok?new Promise((n,o)=>{e.loadJosn?n(t.json()):e.isNotCheckRes?n(t.text()):t.json().then(t=>{if(e.forceData)return n(t);0===t.code?n(t.data):20001===t.code?(n({token:c.a.token,user:c.a.userInfo}),s.default.emit("RepeatAuth")):70001===t.code?s.default.emit("AuthLogin"):(30001!==t.code&&20002!==t.code||(c.a.removeToken(),!1!==e.redirectLogin&&r.a.push("/login")),o(t))},e=>o(e))}):Promise.reject({code:t.status}),e=>Promise.reject(e)).catch(e=>(e&&!e.code&&(e={code:99999}),Promise.reject(e)));return this.setReqTimeout(n,e.timeout||6e4)}translateToFormData(e){if(e){const t=new FormData;for(const n in e)t.append(n,e[n]);return t}return null}_setReqHeader(e){const t=new Headers;let n=e;a.a.isFunction(e)&&(n=e()),n=Object.assign({},{accesstoken:c.a.accessToken,utoken:c.a.token,token:c.a.token,lang:c.a.lang||Object(l.getNavigatorLang)(),"content-type":"application/json; charset=utf-8"},n);for(const e in n)t.append(e,n[e]);return t}_getReqHeader(e){return this._setReqHeader(e)}cancelReq(e){e.abort&&e.abort()}setReqTimeout(e,t=6e3){const n=this.abortablePromise(e),o=setTimeout(()=>{n.isAbort||n.abort&&n.abort(),clearTimeout(o)},t);return n}abortablePromise(e){let t=null,n=!1;const o=new Promise((e,o)=>{t=()=>{n=!0,o("abort promise")}}),a=Promise.race([e,o]);return a.abort=t,a.isAbort=n,a}configToRequestAction(e,t){for(const n in e){const o=e[n];this[n]=function(...e){const n={...o};let a=0,r="function"==typeof o.url?o.url():o.url;if(e.length>0){const t=e[0];if(t&&t._HEADER_){const e=n.header||n.headers;n.header=Object.assign({},e,t._HEADER_),delete t._HEADER_}}if(r.indexOf(":")>=0){const t=r.match(/(:[^{:&/|_}]*)/g);t.map((t,n)=>{r=r.replace(t,e[n])}),a=t.length}if(o.domain){const e="function"==typeof o.domain?o.domain():o.domain;n.url=e+r}else n.url=o.local?r:this.domain+r;return("PUT"===n.method.toUpperCase()||"POST"===n.method.toUpperCase()&&e.length>0)&&e[a]&&(n.body=e[a]),t.request(n)}}}}},230:function(e,t,n){"use strict";var o=n(21),a=n(41),r=n(3);const i=new class{constructor(){r.default.on("disconnect",()=>{this.disconnect()})}setSoftDisconnectMode(e){o.a.dispatch(a.k.setSoftDisconnectMode(e))}disconnect(e){e=e||o.a.getState().connect.device,r.default.emit("ConnectBroken",e,!0)}};window.connectModel=i,t.a=i},231:function(e,t,n){"use strict";var o=n(74);const a=new class{constructor(){this.init(),this.cmdList=[]}init(){this.client=o.a.runtime.client,this.client.on("mnode_from_server",this.onData.bind(this))}registerCmdHandler(e,t){this.cmdList[e]=t}onData(e,t){const n=this.cmdList[e];n&&n(t)}getInfo(e,t,n){n||(n=t,t=null),this.execute(e,t),this.registerCmdHandler(e,n)}execute(e,t){this.client.isConnected||o.a.runtime.establishChannel(),this.client.emit("mnode_from_client",e,t)}};window.mnode=a,t.a=a},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(7),a=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};const r={sprites:"sprites",backdrops:"backdrops",costumes:"costumes",sounds:"sounds"};class i{constructor(){this.assetsMap={sprites:{list:[],total:0,fromApi:!1},backdrops:{list:[],total:0,fromApi:!1},costumes:{list:[],total:0,fromApi:!1},sounds:{list:[],total:0,fromApi:!1}},this.tags=null,this.assetUrlGetters={}}attachStorage(e){this.storage=e,this.executeAssetConfig()}executeAssetConfig(e=o.b.spriteAssetConfig,t){Array.isArray(e)||(e=[e]),this.configs=e,e.forEach(e=>{const n=Date.now();if(e.storeId=n,"string"==typeof e.basepath||"function"==typeof e.basepath){const o=function(t){if(!t)return!1;if(void 0===t._storeId&&(t._storeId=n),t._storeId===e.storeId){let n=t.md5;if(n||(t.assetId&&t.dataFormat?n=`${t.assetId}.${t.dataFormat}`:t.baseLayerMD5&&(n=t.baseLayerMD5)),"string"==typeof e.basepath)return!!n&&`${e.basepath}${n}`;if("function"==typeof e.basepath)return e.basepath(Object.assign(Object.assign({},t),{md5:n}))}return!1};if(this.assetUrlGetters[n]=o,e.autoCreateWebStore){this.storage.addWebStore([this.storage.AssetType.ImageVector,this.storage.AssetType.ImageBitmap,this.storage.AssetType.Sound],o);const a=this.storage.webHelper.stores.length;e.webStore=this.storage.webHelper.stores[a-1],t&&t(n)}}})}getAssetUrl(e){const t=this.assetUrlGetters[e._storeId];return t?t(e):""}fetchAssets(e,t){return a(this,void 0,void 0,(function*(){let n=[],o=0,a=!1;for(let r=0;r<this.configs.length;r++){const i=this.configs[r];if(i&&i[e]){const r=i[e];let s;"function"==typeof r?(s=yield this.fetchAssetsFromApi(e,r,i.storeId,t),a=!0):s=yield this.fetchAssetsFromJSON(r,i.storeId),n=n.concat(s.list),o+=s.total}}return{list:n,total:o,fromApi:a}}))}fetchAssetsFromJSON(e,t){return a(this,void 0,void 0,(function*(){let n=0,o=[];if("string"==typeof e&&(e=[e]),Array.isArray(e))try{for(let t=0;t<e.length;t++){const a=e[t];if("string"!=typeof a)return{list:o,total:n};const r=yield fetch(a).then(e=>e.json());Array.isArray(r)&&(o=o.concat(r),n=o.length)}o.length&&this.setListStoreId(o,t)}catch(e){}return{total:n,list:o}}))}fetchAssetsFromApi(e,t,n,o){return a(this,void 0,void 0,(function*(){let a=[],r=0;try{const e=yield t(o);if(Array.isArray(e))a=e,r=a.length;else{if(!Array.isArray(e.list))throw Error(` list  ${e}`);a=e.list,r=e.total||a.length}a.length&&this.setListStoreId(a,n)}catch(t){throw Error(` ${e} ${t}`)}return{list:a,total:r}}))}getAssetTags(e,t,n){return a(this,void 0,void 0,(function*(){if(!this.tags&&this.configs||n){this.tags={};for(let e=0;e<this.configs.length;e++){const n=this.configs[e];if(n&&n.tags){const{sprites:e,backdrops:o,costumes:a,sounds:r}=yield this.fetchAssetsTags(n.tags,t);e&&(this.tags.sprites=(this.tags.sprites||[]).concat(e)),o&&(this.tags.backdrops=(this.tags.backdrops||[]).concat(o)),a&&(this.tags.costumes=(this.tags.costumes||[]).concat(a)),r&&(this.tags.sounds=(this.tags.sounds||[]).concat(r))}}}if(this.tags)return this.tags[e]}))}fetchAssetsTags(e,t){return a(this,void 0,void 0,(function*(){const n={};try{if("function"==typeof e){const o=yield e(t),{sprites:a,backdrops:r,costumes:i,sounds:s}=o;return n.sprites=this.formatTags(a),n.backdrops=this.formatTags(r),n.costumes=this.formatTags(i),n.sounds=this.formatTags(s),n}{let o=e;if("string"==typeof e&&(o=[e]),Array.isArray(o)){(yield Promise.all(o.map(e=>fetch(e).then(e=>e.json())))).forEach(e=>{const{sprites:o,backdrops:a,costumes:r,sounds:i}=e[t]||e.en||e;n.sprites=(n.sprites||[]).concat(this.formatTags(o)),n.backdrops=(n.backdrops||[]).concat(this.formatTags(a)),n.costumes=(n.costumes||[]).concat(this.formatTags(r)),n.sounds=(n.sounds||[]).concat(this.formatTags(i))})}}}catch(e){}return n}))}formatTags(e){return Array.isArray(e)?e.map(e=>({key:e.key,value:e.value})):[]}setListStoreId(e,t){return e.forEach(e=>e._storeId=t),e}filterAssets(e,t){if(!t)return e;const{list:n}=e,{tags:o,searchText:a,supportEnv:r}=t;let i=[];"string"==typeof o?i=[o.toLowerCase()]:Array.isArray(o)&&(i=o.map(e=>e.toLowerCase()));let s=[];"number"==typeof r?s=[r]:Array.isArray(r)&&(s=r);const c=n.filter(e=>{if(a){if(!e.name.toLowerCase().includes(a.toLowerCase()))return!1}if(s!==[]&&"supportStatus"in e&&!s.includes(e.supportStatus))return!1;if(i.length){let t=!1;if(t=!!i.includes("all")||e.tags.find(e=>i.includes(e.toLowerCase())),!t)return!1}return!0});return{total:c.length,list:c}}fetchAssetsByType(e,t){return a(this,void 0,void 0,(function*(){let n=this.assetsMap[e];return n?n.total&&!n.fromApi||(n=this.assetsMap[e]=yield this.fetchAssets(e,t),!n.fromApi)?this.filterAssets(n,t):n:{total:0,list:[],fromApi:!1}}))}fetchSprites(e){return a(this,void 0,void 0,(function*(){return this.fetchAssetsByType(r.sprites,e)}))}fetchBackdrops(e){return a(this,void 0,void 0,(function*(){return this.fetchAssetsByType(r.backdrops,e)}))}fetchCostumes(e){return a(this,void 0,void 0,(function*(){return this.fetchAssetsByType(r.costumes,e)}))}fetchSounds(e){return a(this,void 0,void 0,(function*(){return this.fetchAssetsByType(r.sounds,e)}))}}},238:function(e,t,n){"use strict";var o=n(7),a=n(4),r=n.n(a),i=n(65),s=n(92);var c=n(20);n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));const l="ADD_FEEDBACK",d="CACHE_FEEDBACK";t.c={addFeedback:(e,t,n)=>((e,t,n,o,a,c)=>{const l={type:e,payload:{status:s.b.PENDING}};return e=>{e(l),i.default[t][n](o).then(t=>{l.payload.status=s.b.DONE,l.payload.data=t,e(l),r.a.isFunction(a)&&a(t)},t=>{l.payload.status=s.b.FAILED,l.payload.data=t,e(l),r.a.isFunction(c)&&c(t)})}})(l,"Feedback","add",{description:e.description,profession:e.profession,contact:e.contact,call:e.call,suffix:e.suffix,attachment:e.attachment,os:navigator.userAgent,version:o.b.version},t,n),cache:e=>(c.a.setFeedBackData(e),{type:d,payload:{cacheData:e}})}},245:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var o=n(232);const a=n(834),r=e=>({name:e,md5:"cd21514d0531fdffb22204e0ec5ed84a.svg",rotationCenterX:0,rotationCenterY:0,bitmapResolution:1,skinId:0}),i={name:"backdrop1",md5:"cd21514d0531fdffb22204e0ec5ed84a.svg",info:[480,360,1]};t.d=new o.a},247:function(e,t,n){"use strict";var o=n(7),a=n(17),r=n(232),i=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};class s extends r.a{attachStorage(e){this.storage=e,o.b.userSpriteAssetConfig&&(this.config=o.b.userSpriteAssetConfig,this.executeAssetConfig([this.config]))}get enableDelete(){return!!this.config&&this.config.onDelete}getAssetInfo(e){return i(this,void 0,void 0,(function*(){const t=Object(a.getFileName)(e.name);let n;if(e instanceof File){const t=Object(a.getFileSuffix)(e.name).toLowerCase(),o=yield Object(a.readAsArrayBuffer)(e);n=this.storage.createAsset({},t,o,null,!0)}else e.md5&&e.asset&&(n=e.asset);return n.md5=`${n.assetId}.${n.dataFormat}`,n.name=t,this.config&&(n._storeId=this.config.storeId),n}))}addUserSprite(e){return i(this,void 0,void 0,(function*(){if(this.config&&"function"==typeof this.config.onCreate){const t=yield this.getAssetInfo(e);return yield this.config.onCreate(t,"sprite")}}))}addUserCostume(e){return i(this,void 0,void 0,(function*(){if(this.config&&"function"==typeof this.config.onCreate){const t=yield this.getAssetInfo(e);return yield this.config.onCreate(t,"costume")}}))}addUserBackdrop(e){return i(this,void 0,void 0,(function*(){if(this.config&&"function"==typeof this.config.onCreate){const t=yield this.getAssetInfo(e);return yield this.config.onCreate(t,"backdrop")}}))}addUserSound(e){return i(this,void 0,void 0,(function*(){if(this.config&&"function"==typeof this.config.onCreate){const t=yield this.getAssetInfo(e);return yield this.config.onCreate(t,"sound")}}))}deleteAsset(e,t){return i(this,void 0,void 0,(function*(){if(this.config&&"function"==typeof this.config.onDelete){const n=this.assetsMap[`${t}s`];if(n){const o=n.list.find(t=>t.md5===e);if(o)return yield this.config.onDelete(o,t)}}return!1}))}deleteUserSprite(e){return this.deleteAsset(e,"sprite")}deleteUserBackdrop(e){return this.deleteAsset(e,"backdrop")}deleteUserCostume(e){return this.deleteAsset(e,"costume")}deleteUserSound(e){return this.deleteAsset(e,"sound")}}t.a=new s},248:function(e,t,n){(t=e.exports=n(68)(!1)).i(n(553),""),t.i(n(554),""),t.i(n(555),""),t.push([e.i,".ant-btn {\n  line-height: 1;\n  border-radius: 32px;\n  font-size: 16px;\n  transition: all 0.2s ease-in-out;\n  text-shadow: none;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\n.ant-btn.ant-btn-primary,\n.ant-btn-primary {\n  background: var(--PRIMARY-COLOR);\n  border-color: var(--PRIMARY-COLOR);\n}\n.ant-btn.ant-btn-primary:hover,\n.ant-btn-primary:hover {\n  background: var(--BTN-HOVER-COLOR);\n  border-color: var(--BTN-HOVER-COLOR);\n}\n.ant-btn.ant-btn-primary:focus,\n.ant-btn-primary:focus {\n  background: var(--PRIMARY-COLOR);\n  border-color: var(--PRIMARY-COLOR);\n}\n.ant-btn.ant-btn-primary:active,\n.ant-btn-primary:active {\n  background: var(--BTN-ACTIVE-COLOR);\n  border-color: var(--BTN-ACTIVE-COLOR);\n}\n.ant-btn.ant-btn-primary:disabled,\n.ant-btn-primary:disabled {\n  color: #b3b3b3;\n  background-color: #eaeaea;\n  border-color: #d9d9d9;\n  text-shadow: none;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\n.ant-btn.ant-btn-primary.ant-btn-background-ghost,\n.ant-btn-primary.ant-btn-background-ghost {\n  color: var(--PRIMARY-COLOR);\n}\n.ant-btn.ant-btn-primary.ant-btn-background-ghost:hover,\n.ant-btn-primary.ant-btn-background-ghost:hover,\n.ant-btn.ant-btn-primary.ant-btn-background-ghost:focus,\n.ant-btn-primary.ant-btn-background-ghost:focus {\n  color: #fff;\n  background-color: var(--PRIMARY-COLOR) !important;\n  border-color: var(--PRIMARY-COLOR) !important;\n}\n.ant-btn.ant-btn-primary.ant-btn-background-ghost:active,\n.ant-btn-primary.ant-btn-background-ghost:active {\n  color: #fff;\n  background-color: var(--BTN-ACTIVE-COLOR) !important;\n  border-color: var(--BTN-ACTIVE-COLOR) !important;\n}\n.ant-btn-sm {\n  font-size: 12px;\n  padding: 0.25rem 1rem;\n  line-height: 1;\n  height: auto;\n  transform: scale(0.85);\n}\n.ant-btn-sm span {\n  line-height: normal;\n}\n.ant-popover-buttons button {\n  margin: 0 6px;\n}\n.ant-card {\n  border-radius: 8px;\n  overflow: hidden;\n}\n.ant-card .ant-card-meta-title,\n.ant-card .ant-card-meta-description {\n  color: var(--TEXT-COLOR);\n  white-space: normal;\n}\n.ant-modal-wrap {\n  text-align: center;\n}\n.ant-modal-wrap .ant-modal {\n  transform-origin: center !important;\n  min-width: 340px;\n}\n.ant-modal-wrap .ant-modal .ant-modal-content {\n  border-radius: 10px;\n}\n.ant-modal-wrap .ant-modal .ant-modal-content .ant-modal-header {\n  padding: 12px;\n  min-height: 48px;\n  line-height: 48px;\n  border-bottom: 1px solid #e0e5eb;\n  border-radius: 10px 10px 0 0;\n  font-size: 16px;\n  text-align: left;\n}\n.ant-modal-wrap .ant-modal .ant-modal-content .ant-modal-header .ant-modal-title {\n  font-size: 16px;\n  font-weight: 500;\n  text-align: center;\n  color: #253858;\n}\n.ant-modal-wrap .ant-modal .ant-modal-content .ant-modal-close-x {\n  color: var(--PRIMARY-COLOR);\n  width: 48px;\n  height: 48px;\n  line-height: 48px;\n  font-size: 14px;\n}\n.ant-modal-wrap .ant-modal .ant-modal-content .ant-modal-close-x:focus,\n.ant-modal-wrap .ant-modal .ant-modal-content .ant-modal-close-x:hover {\n  color: var(--PRIMARY-COLOR);\n}\n.ant-modal-wrap .ant-modal .ant-modal-content .ant-modal-body {\n  position: relative;\n  padding: 30px 30px 10px 30px;\n  text-align: left;\n  font-size: 12px;\n}\n.ant-modal-wrap .ant-modal .ant-modal-content .ant-modal-footer {\n  border-top: 1px solid #e0e5eb;\n  display: flex;\n  justify-content: center;\n}\n.ant-modal-wrap .ant-modal .ant-modal-content .ant-modal-footer .ant-btn {\n  font-size: 14px;\n}\n.ant-modal-wrap .ant-modal .ant-modal-content .ant-modal-footer.small-space {\n  padding: 12px 24px 0 12px;\n}\n.ant-modal-wrap .ant-modal .ant-modal-content .ant-modal-footer > div {\n  width: 100%;\n  text-align: right;\n}\n.ant-modal-wrap .ant-modal .ant-modal-content .ant-modal-footer > div.flex-jcsb {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n/*  */\n.small-modal {\n  display: inline-block;\n  width: auto !important;\n  max-width: 480px;\n  min-width: 340px;\n}\n/*  */\n.large-modal {\n  width: 960px;\n  min-width: 960px;\n}\n/*  */\n.custom-modal {\n  max-width: 400px;\n  min-width: 340px;\n}\n.custom-modal .ant-modal-body {\n  padding: 1.25rem;\n  overflow-y: auto;\n  max-height: 60vh;\n}\n.custom-modal .ant-modal-footer {\n  padding: 12px 1.25rem 12px 1.25rem;\n}\n.custom-modal .button-container {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.custom-modal .button-container button {\n  flex: auto 0 0;\n}\n.ant-checkbox-input:focus + .ant-checkbox-inner,\n.ant-checkbox-wrapper:hover .ant-checkbox-inner,\n.ant-checkbox:hover .ant-checkbox-inner {\n  border-color: var(--PRIMARY-COLOR);\n}\n.ant-checkbox-checked .ant-checkbox-inner {\n  background-color: var(--PRIMARY-COLOR);\n  border-color: var(--PRIMARY-COLOR);\n}\n.ant-checkbox-checked:after {\n  border-color: var(--PRIMARY-COLOR);\n}\n.ant-pagination-item:focus,\n.ant-pagination-item:hover {\n  border-color: var(--PRIMARY-COLOR);\n}\n.ant-pagination-item:focus a,\n.ant-pagination-item:hover a {\n  color: var(--PRIMARY-COLOR);\n}\n.ant-pagination-item-active {\n  border-color: var(--PRIMARY-COLOR);\n}\n.ant-pagination-item-active:hover {\n  border-color: var(--BTN-HOVER-COLOR);\n}\n.ant-pagination-item-active:hover a {\n  color: var(--PRIMARY-COLOR);\n}\n.ant-pagination-item-active:focus a {\n  color: var(--PRIMARY-COLOR);\n}\n.ant-pagination-item-active a {\n  color: var(--PRIMARY-COLOR);\n}\n.ant-pagination-next:focus .ant-pagination-item-link,\n.ant-pagination-next:hover .ant-pagination-item-link,\n.ant-pagination-prev:focus .ant-pagination-item-link,\n.ant-pagination-prev:hover .ant-pagination-item-link {\n  border-color: var(--PRIMARY-COLOR);\n  color: var(--PRIMARY-COLOR);\n}\n.ant-pagination-jump-next .ant-pagination-item-container .ant-pagination-item-link-icon,\n.ant-pagination-jump-prev .ant-pagination-item-container .ant-pagination-item-link-icon {\n  color: var(--PRIMARY-COLOR);\n}\n::-webkit-scrollbar {\n  width: 6px;\n  height: 6px;\n}\n::-webkit-scrollbar-track {\n  border-radius: 6px;\n}\n::-webkit-scrollbar-thumb {\n  border-radius: 6px;\n  background: rgba(206, 205, 206, 0.6);\n}\n::-webkit-scrollbar-thumb:window-inactive {\n  background: rgba(206, 205, 206, 0.4);\n}\n::-webkit-scrollbar-track {\n  background-color: transparent;\n}\n.ant-tabs-nav .ant-tabs-tab-active {\n  color: var(--PRIMARY-COLOR);\n}\n.ant-tabs-nav .ant-tabs-tab-active:hover {\n  color: var(--BTN-HOVER-COLOR);\n}\n.ant-tabs-nav .ant-tabs-tab-active:active {\n  color: var(--BTN-ACTIVE-COLOR);\n}\n.ant-tabs-nav .ant-tabs-tab:hover {\n  color: var(--BTN-HOVER-COLOR);\n}\n.ant-tabs-nav .ant-tabs-tab:active {\n  color: var(--BTN-ACTIVE-COLOR);\n}\n.ant-tabs-ink-bar {\n  background-color: var(--PRIMARY-COLOR);\n}\n.file-list-item {\n  padding: 0.5rem 0.75rem;\n  border: 1px solid #d9d9d9;\n  border-radius: 17px;\n  position: relative;\n  transition: 0.3s ease-in-out;\n}\n.file-list-item:hover {\n  color: var(--BTN-HOVER-COLOR);\n  border-color: var(--BTN-HOVER-COLOR);\n}\n.file-list-item:hover .remove-btn {\n  opacity: 1;\n}\n.file-list-item.done {\n  color: #52c41a;\n  border-color: #52c41a;\n}\n.file-list-item.error {\n  color: #f5222d;\n  border-color: #f5222d;\n}\n.file-list-item .remove-btn {\n  opacity: 0;\n  color: currentColor;\n}\n.file-list-item .remove-btn i {\n  color: currentColor;\n}\n.file-list-item .ant-progress,\n.file-list-item .ant-progress-outer,\n.file-list-item .ant-progress-inner {\n  display: block;\n  overflow: hidden;\n}\n.file-list-item .ant-progress {\n  margin-bottom: 0.5rem;\n}\na {\n  color: var(--PRIMARY-COLOR);\n}\na:hover {\n  color: var(--BTN-HOVER-COLOR);\n}\na:active {\n  color: var(--BTN-ACTIVE-COLOR);\n}\n.anticon-loading {\n  color: var(--PRIMARY-COLOR);\n}\n",""])},25:function(e,t,n){"use strict";var o=n(74);t.a=new class{constructor(){this.messageHandleMap={},this.client=o.a.runtime.client,this.isNeedMlinkUpdate=!0,this.useMlinkVersion="",o.a.runtime.addDataListener(e=>{this.messageHandleMap[`${e.connectType}.${e.method}`]&&this.messageHandleMap[`${e.connectType}.${e.method}`](e)})}getConnected(){return o.a.runtime.establishChannel()}compareVersion(e,t){const n=e=>e.replace(/\./g,"");e=n(e),t=n(t);const o=Math.max(e,t);let a=0;for(let n=0;n<o;n++){if(isNaN(e.charAt(n))){a=-1;break}if(isNaN(t.charAt(n))){a=1;break}if(Number(e.charAt(n))>Number(t.charAt(n))){a=1;break}if(Number(e.charAt(n))<Number(t.charAt(n))){a=-1;break}}return a}getUseMlinkVersion(){return this.useMlinkVersion}close(){o.a.runtime.close()}createListeners(e,t,n){this.messageHandleMap[`${e}.${t}`]=n}destroyListeners(e,t){this.messageHandleMap[`${e}.${t}`]&&(this.messageHandleMap[`${e}.${t}`]=null,delete this.messageHandleMap[`${e}.${t}`])}sendMessage(e,t){o.a.runtime.sendMessage(e,t)}addConnectListener(e){o.a.runtime.addConnectListener(e)}addDisconnectListener(e){o.a.runtime.addDisconnectListener(e)}}},28:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"q",(function(){return r})),n.d(t,"h",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"p",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"o",(function(){return u})),n.d(t,"k",(function(){return h})),n.d(t,"j",(function(){return m})),n.d(t,"n",(function(){return f})),n.d(t,"m",(function(){return E})),n.d(t,"l",(function(){return g})),n.d(t,"a",(function(){return T})),n.d(t,"e",(function(){return b}));const o="GET_PROJECTS",a="CREATE_PROJECT",r="UPDATE_PROJECT_INFO",i="RENAME_PROJECT",s="INIT_PROJECT_NAME",c="INIT_PROJECT_INFO",l="UPDATE_PROJECTS",d="DELETE_PROJECT",p="SET_FILEPATH",u="SET_SELF_AND_SHARE",h="SET_PLATFORM_TYPE",m="SET_LOADING_PAGE_STATE",f="SET_SAVE_STATUS",E="SET_SAVE_PROGRESS",g="SET_PROJECT_NAME",T="CLEAR_PROJECTS",b="HIDE_LOADING_PAGE"},29:function(e,t,n){"use strict";n.r(t);var o=n(144),a=n(86),r=n(22);let i,s,c,l,d;if(o.a.isChromeOS){const e=n(1160);i=e.default,s=e.SerialPort}else{const e=n(1159);i=e.default,s=e.SerialPort,c=e.BLE,l=e.Hid,d=e.Wifi,window.mchannel=i}const p=e=>{switch(e){case a.b.BLE:return c;case a.b.HID:case a.b["24G"]:return l;case a.b.WIFI:return d;default:return s}},u=function(e){const t=Object(r.b)();let n={};return t&&t.config&&t.config.options&&(n=t.config.options.connect[e]),n};class h{constructor(){this.isNoUpdateMlink=!1,this.ports={},this.serviceChannel=i}addDataListener(e,t,n){const o=this.ports[t];o&&o.on("data",e=>{n(e)})}addErrorListener(e,t,n){const o=this.ports[t];o&&(o.on("disconnect",(e,t)=>{n(e,t)}),o.on("error",(e,t)=>{n(e,t)}))}static getInstance(){return h.instance||(h.instance=new h),h.instance}getExtConfig(e){return u(e)}connect(e,t,n){const{vendorId:o,productId:r,comName:i,ssid:s}=t;let c=i;e!==a.b.HID&&e!==a.b["24G"]||(c=`${o}_${r}`),e===a.b.WIFI&&(c=s);const l=`${e}.${c}`,d=p(e);this.ports[l]=new d(c,{connectType:e,...t}),this.curConnectInstance=this.ports[l],this.ports[l].open(t=>{t?n(t):n(null,{comName:c,type:e,connectionId:l,rawPort:this.ports[l]})}).on("error",e=>{n(e)})}disconnect(e,t=Object.keys(this.ports)[0],n){const o=this.ports[t];this.ports[t]=null,o?o.close(e=>{e?n&&n(e,null):n&&n(null,{comName:t,connectionId:t})}):n&&n(null,{comName:t,connectionId:t})}discovery(e,t){p(e).list(e,(e,n)=>{t(e,n)})}send(e,t,n,o,a){const r=this.ports[t];r?r.write(n,"utf8",o,a):a(null,{})}isInstall(){return i.getChannelConnected()}isNeedMlinkUpdate(){return i.isNeedMlinkUpdate&&i.isNeedMlinkUpdate()}getUseMlinkVersion(){return i.getUseMlinkVersion&&i.getUseMlinkVersion()}closeChannel(){i.close&&i.close()}}t.default=h.getInstance()},3:function(e,t,n){"use strict";n.r(t),n.d(t,"genEvent",(function(){return i})),n.d(t,"default",(function(){return r}));var o=n(40),a=n.n(o);a.a.EventEmitter.prototype.off=a.a.EventEmitter.prototype.removeListener;const r=new a.a.EventEmitter;r.setMaxListeners(30);const i=e=>(t,n=!1)=>{let o=(...e)=>{try{t(...e)}catch(e){}},a=o;return n&&(a=(...t)=>{r.removeListener(e,a),o(...t)}),r.addListener(e,a),()=>r.removeListener(e,a)}},30:function(e,t,n){"use strict";var o=n(63),a=n(4),r=n.n(a),i=n(5),s=n(19),c=n(23),l=n(20),d=n(128),p=n.n(d),u=n(15);const h=3e4,m=102400,f=3,E=()=>Object.assign({},{client:null,checkpoint:null,retryCount:0,name:null,uploadId:null});var g=class{constructor(){this.domain=c.default.domainconfig.cloud[u.a.getInternational];c.default.configToRequestAction.call(this,{uploadToken:{method:"get",url:"cloud/token/upload"},uploadImgToken:{method:"get",url:"cloud/token/coverupload"}},c.default),this.coverImg=E(),this.project=E()}getProjectToken(){return this.uploadToken({_HEADER_:{utoken:l.a.token,pid:1}})}getCoverImgToken(){return this.uploadImgToken({_HEADER_:{utoken:l.a.token,pid:2}})}async multipartUploadCoverImg(e,t){this.coverImg=E();let n=null;try{n=await this.getCoverImgToken()}catch(e){throw e}if(n){const o={"Content-Encoding":"gzip",timeout:h,partSize:m,progress:async(e,n)=>{n&&(this.coverImg.checkpoint=n,this.coverImg.name=n.name,this.coverImg.uploadId=n.uploadId),"function"==typeof t&&t(100*e)}},{commitId:a,...r}=n;this.coverImg.client=new p.a(r),this.coverImg.name=a;let i=null;try{const{region:t,bucket:n}=r,s=await this.multipartUpload(this.coverImg.client,a,e,o),c=this.coverImg.client.options.amendTimeSkewed<9e5;if(s&&s.res&&200===s.res.status&&c){return`http://${n}.${t}.aliyuncs.com/${a}`}c||(i="Local time is not the same as server time")}catch(e){i=e}throw this.abortAll(),i}}async multipartUploadProject(e,t,n){this.project=E();let o=null;try{o=await this.getProjectToken()}catch(e){throw e}if(o){const{commitId:a,callbackUrl:r,...i}=o,s="coverImage=${x:coverImage}&utoken=${x:utoken}&pid=${x:pid}&fileName=${x:fileName}&fsize=${size}&bucket=${bucket}&object=${object}&etag=${etag}&size=${size}&commitId=${x:commitId}&handle=${x:handle}&projectName=${x:projectName}&projectId=${x:projectId}&createdAt=${x:createdAt}",{projectId:c,projectName:d,fileName:u,createdAt:f,coverImage:E,isSelfProject:g}=n;let T="adapt";g&&(T=Number(c)>0?"edit":"create");const b={url:r,body:s,customValue:{utoken:l.a.token,pid:"1",commitId:a,fileName:u,handle:T,projectName:d,projectId:String(c),coverImage:E||"null",createdAt:String(f)}},S={"Content-Encoding":"gzip",timeout:h,partSize:m,callback:b,progress:async(e,n)=>{n&&(this.project.checkpoint=n,this.project.name=n.name,this.project.uploadId=n.uploadId),"function"==typeof t&&t(100*e)}};this.project.client=new p.a(i),this.project.name=a;let O=null;try{const t=await this.multipartUpload(this.project.client,a,e,S),n=this.project.client.options.amendTimeSkewed<9e5;if(t&&t.data&&0===t.data.code&&n)return{projectId:t.data.data.projectId||c,commitId:a};n||(O="Local time is not the same as server time")}catch(e){O=e}throw this.abortAll(),O}}multipartUpload(e,t,n,o){if(!e)return;let a={};return e===this.coverImg.client?a=this.coverImg:e===this.project.client&&(a=this.project),a.checkpoint&&(o.checkpoint=a.checkpoint),e.multipartUpload(t,n,o).then(e=>e).catch(r=>{if(e.isCancel())throw r;!r||"ConnectionTimeoutError"!==r.code&&-1===r.name.toLowerCase().indexOf("connectiontimeout")||a.retryCount<f&&(a.retryCount++,this.multipartUpload(e,t,n,o))})}abortMultipartUpload({client:e,name:t,uploadId:n}){if(e){e.cancel();try{if(t&&n)return e.abortMultipartUpload(t,n)}catch(e){return}}}abortAll(){this.abortMultipartUpload(this.coverImg),this.abortMultipartUpload(this.project)}},T=n(29),b=n(3),S=n(18),O=n(17),w=n(14),I=n(13);class C{constructor(e={}){this.prevValue=0,this.value=0,this.waitingTime=0,this.size=e.size&&Number(e.size)||100,this.processedSize=0,this.leftSize=this.size,this.timeout=e.timeout||6e4,this.onsucceeded=e.onsucceeded,this.onerror=e.onerror,this.onupdated=e.onupdated,this.children=[],this.disposed=!1,this.updateValue(0)}setSize(e=100){this.size=Number(e)||100}getValue(){return this.value}addChild(e){e instanceof C&&-1===this.children.indexOf(e)&&(e.parent=this,this.children.push(e))}compute(e){e&&(this.processedSize=e/100*this.size);let t=this.children.reduce((e,t)=>e+t.size,this.size),n=this.children.reduce((e,t)=>e+t.processedSize,this.processedSize),o=this.parent;for(;o;)t+=this.parent.size,n+=this.parent.processedSize,o=this.parent.parent;return Math.round(n/t*1e3)/10}updateValue(e){if(this.disposed)return;if(e){if((e=Number(e))>100)return;if(e<0)return}this.waitingTime=0,this.fakeTime=Date.now(),this.prevValue=this.value,this.value=this.compute(e),this.parent,this.triggerUpdate();let t=this.parent;for(;t;)t.updateValue(),t=t.parent;this.value<100?this.startFake():this.triggerSucceeded()}startFake(){this.parent||this.disposed||(this.stopFake(),this.fakeTimeId=setInterval(()=>{this.updateFakeValue()},1e3))}stopFake(){clearInterval(this.fakeTimeId)}updateFakeValue(){this.disposed||(navigator.onLine?(this.waitingTime=this.fakeTime?Date.now()-this.fakeTime:0,this.value+=.1,this.triggerUpdate(this.value)):this.triggerOfflineError())}triggerUpdate(e=this.value){this.disposed||e>this.prevValue&&"function"==typeof this.onupdated&&(e=Math.round(10*e)/10,this.onupdated(e))}triggerTimeoutError(){this.triggerError(new Error("Timeout: waiting time over "+this.waitingTime))}triggerError(e){"function"==typeof this.onerror&&this.onerror(e);let t=this.parent;for(;t;)t.triggerError(e),t=t.parent;this.dispose()}triggerOfflineError(){this.triggerError(new Error("Offline: not connected to the Internet "))}triggerSucceeded(){"function"==typeof this.onsucceeded&&this.onsucceeded(),this.dispose()}dispose(){this.disposed=!0,this.prevValue=0,this.value=0,this.fake=0,this.waitingTime=0,this.onsucceeded=null,this.onerror=null,this.onupdated=null,this.parent=null,this.stopFake(),this.children.forEach(e=>{e.dispose()}),this.children=[]}}var v=C,R=n(51),A=n(113),y=n(72),N=n(22),k=n(28);function L(e){return async(t,n)=>{const{project:o,intlr:a}=n(),r={projectId:"",name:s.a.getNewProjectName(a.messages["FILENAME.EMPTY"],o.projects),projectType:e&&e.projectType||"",filePath:"",commitId:"",isSelfProject:!0,isShare:!1,isForThirdPlatform:!1,saveStatus:""};s.a.isConfirmName=!1,t({type:k.f,payload:r})}}function P(e,t){return async(n,a)=>{const{messages:s}=a().intlr;if(!e)return void o.a.error(s["IMPORT.FAIL.MSG"],2);let c=!1;const l=()=>{const e="projectType"in t?t.projectType:i.a.PROJECT_TYPE.LOCAL;t={...t,projectType:e},n({type:k.q,payload:t}),e===i.a.PROJECT_TYPE.EXAMPLE||c?S.a.instance.clearUpWorkspace():(o.a.success(s["IMPORT.SUCCESS.MSG"],2),c=!0)},d=e=>{r.a.isArray(e)&&e.length&&!c&&(o.a.error(s["IMPORT.EXTINPROJECT.FAIL"],4),c=!0)};try{const t=await S.a.instance.renderProject(e,l,d);t&&t.exts&&Object(N.i)(t.exts)}catch(e){o.a.error(s["IMPORT.FAIL.MSG"])}}}function D(e,t){return n=>{n({type:k.o,payload:{isSelfProject:e,isShare:t}})}}function M(e){return(t,n)=>{const o=i.a.PROJECT_SAVE_STATUS[e];t({type:k.n,payload:{saveStatus:o}}),"SUCCESS"!==e&&"FAILURE"!==e||setTimeout(()=>{"DOING"!==n().project.saveStatus&&t({type:k.n,payload:{saveStatus:""}})},3e3)}}function x(e){return t=>{t({type:k.i,payload:{projectType:i.a.PROJECT_TYPE.LOCAL,filePath:e}})}}function U(){return(e,t)=>{const{messages:n}=t().intlr;Object(A.a)(n),e(M(i.a.PROJECT_SAVE_STATUS.FAILURE)),e({type:k.m,payload:{saveProgress:0}})}}var _=n(56);function j(){return async(e,t)=>{if(s.a.isSaved()){b.default.emit("file_download",20),S.a.instance.clear();const n=t().connect;n.connectionInfo&&n.connectionInfo.connectionId&&T.default.disconnect(n.type,n.connectionInfo.connectionId,(e,t)=>{}),e(L({projectType:i.a.PROJECT_TYPE.LIST})),I.a.replace({pathname:"/"})}else"/confirm/save/new"!==I.a.location.pathname&&I.a.push({pathname:"/confirm/save/new"})}}function q(e,t){return async n=>{s.a.isLoaded&&(s.a.isSaved()?(S.a.instance.clearLayout(),s.a.isConfirmName=!0,t===i.a.PROJECT_TYPE.LIST?n(function(e){return async(t,n)=>{const{project:a,intlr:r,connect:c}=n();if(c.connectionInfo&&c.connectionInfo.connectionId&&T.default.disconnect(c.type,c.connectionInfo.connectionId,(e,t)=>{}),!e)return void o.a.error(r.messages["IMPORT.FAIL.MSG"],2);b.default.emit("file_download",10);const l=s.a.getProject(e,a.projects)||await s.a.fetchProjectBaseInfoById(e);if(!l)return void o.a.error(r.messages["IMPORT.FAIL.MSG"],2);if(l.error)return void("99999"===l.error.code&&o.a.warning(r.messages["NETWORK.ERR.MSG"],2));const{commitId:d,projectName:p,projectData:u}=l,h={projectId:e,name:p,projectType:i.a.PROJECT_TYPE.LIST,commitId:d};if(u)t(P(u,h));else{const n=await s.a.fetchProjectData(d,p,e);if(n.error&&("99999"===n.error.code||"network error"===n.error))return void o.a.warning(r.messages["NETWORK.ERR.MSG"],2);t(P(n,h))}t(D(s.a.isSelfProject(e,a.projects),s.a.hadShared(a.projects,e)))}}(e)):t===i.a.PROJECT_TYPE.EXAMPLE?n(function(e){return async(t,n)=>{const{project:a,intlr:r,connect:c}=n();if(c.connectionInfo&&c.connectionInfo.connectionId&&T.default.disconnect(c.type,c.connectionInfo.connectionId,(e,t)=>{}),e)if(s.a.isSaved()){b.default.emit("file_download",10);let n=e.name[r.langKey]||e.name.en;b.default.emit("OpenExampleProgram",{type:e.type,label:n});const o=await fetch(Object(O.safeHttps)(e.projectUrl.url)),c=await o.arrayBuffer();n=s.a.getNewProjectName(n,a.projects),t(D(!0,!1)),t(P(c,{projectId:"",name:n,filePath:"",projectType:i.a.PROJECT_TYPE.EXAMPLE})),I.a.replace({pathname:"/"})}else s.a.nextProjectCache={file:e,projectType:i.a.PROJECT_TYPE.EXAMPLE},I.a.replace({pathname:"/confirm/save/open"});else o.a.error(r.messages["IMPORT.FAIL.MSG"],2)}}(e)):n(function(e){return async(t,n)=>{const{project:o,intlr:a,connect:r}=n(),{projects:s,name:c,isSelfProject:l,isShare:d}=o,p={title:a.messages["PROJECT.SHOW.DIALOG.TITLE"],filters:[{name:a.messages["PROJECT.DIALOG.FILTER.NAME"],extensions:i.a.PROJECT_SUFFIX}],properties:["openFile"]};try{const n=await S.a.instance.import(e,p);if(n){r.connectionInfo&&r.connectionInfo.connectionId&&T.default.disconnect(r.type,r.connectionInfo.connectionId,(e,t)=>{}),b.default.emit("file_download",10);const e=n.filePath;t(x(e));let o=e?Object(O.getFileName)(e):c;t(D(!0,!1));const a={projectId:"",name:o,projectType:i.a.PROJECT_TYPE.LOCAL};t(P(n.data,a)),"/"!==I.a.location.pathname&&I.a.push({pathname:"/"})}}catch(e){t(D(l,d))}}}(e)),s.a.nextProjectCache=null,I.a.replace("/")):(s.a.nextProjectCache={file:e,projectType:t},I.a.push({pathname:"/confirm/save/open"})))}}function F(e){return async(t,n)=>{await t(function(e){return async(t,n)=>{const{project:a,intlr:r}=n(),{messages:c}=r,l=a.name.replace(/[\^\\%&/*~'/?///</>/|/"/(/)/$#,@:;&]+/g,""),d={title:c["PROJECT.SAVE.DIALOG.TITLE"],defaultPath:`~/${l}.${i.a.PROJECT_SUFFIX[0]}`,filters:[{name:c["PROJECT.DIALOG.FILTER.NAME"],extensions:i.a.PROJECT_SUFFIX}]};try{const n=e?"":a.filePath,r=await S.a.instance.export(n,d,a);if(r){const e=await w.c.read(r.filePath),n=new File(Array(e.data),Object(O.getFileName)(r.filePath));if(n.size<2048)return void t(H.saveError());a.projectType===i.a.PROJECT_TYPE.LOCAL&&s.a.setSaved(!0),t(H.setFilePath(r.filePath)),t(H.setName(n.name));const l=c["PROJECT.EXPORT.LOCAL.MSG"].format(r.filePath);o.a.success(l,2)}}catch(e){if(-3===e.code)return;t(H.saveError())}}}(e))}}function B(e,t={},n){return async(a,c)=>{const{project:l,passport:d}=c();if(!d.userInfo)return I.a.replace("/login");const{saveStatus:p}=l;if(p===i.a.PROJECT_SAVE_STATUS.DOING)return;a(M(i.a.PROJECT_SAVE_STATUS.DOING));const u=await S.a.instance.getProjectCoverPic(),h=await Object(O.base64ToBlob)(u),m=await S.a.instance.getProjectJson();if(!h||h.size<1e3||!m||m.size<1e3)return void a(U());const f=new g,E=new v({size:h.size}),T=new v({size:m.size,timeout:i.a.PROJECT_SAVE_TIMEOUT,onupdated:e=>{a({type:"SET_SAVE_PROGRESS",payload:{saveProgress:e}})},onerror:e=>{a(U())}});T.addChild(E);const b=await async function(e,t,n){const o=e=>{n.updateValue(e)};try{const n=await e.multipartUploadCoverImg(t,o);return!!n&&(Object(y.c)(n),n)}catch(e){return n.triggerError(e),!1}}(f,h,E);if(!b)return;const w=await a(function(e,t,n){return(o,a)=>{const{project:i}=a();let{projectId:c,isSelfProject:l,isShare:d}=i;const{projects:p}=i,{id:u}=i,h=Object(O.genId)();let m=t.name||i.name;l=r.a.has(t,"isSelfProject")?t.isSelfProject:l,m=l?m:t.name,c=r.a.has(t,"projectId")?t.projectId:c,d=r.a.has(t,"isShare")?t.isShare:d;const f=p.map(e=>e.projectId),E=Date.parse(new Date)/1e3,g=l?"new":"adapt",T=!e&&r.a.indexOf(f,parseInt(c))>-1?"update":g,b=s.a.selectSaveOperation()[T]({id:u||h,_id:h,createdAt:E,name:m,projectId:c,projectData:n,projectInfo:t,projects:p});return o({type:k.p,payload:{projects:p}}),{id:h,isShare:d,isSelfProject:l,projectId:b.projectId,...b.projectInfo}}}(e,t,m)),{id:C,projectId:R,createdAt:A,isSelfProject:N,isShare:L,projectName:P}=w,D={id:C,projectId:R,projectName:P,createdAt:A,fileName:P,coverImage:b,isSelfProject:N,isShare:L};await a(function(e,t,n,a,r){return async(c,l)=>{const{projects:d}=l().project,p=e=>{n.updateValue(e)};let u=null;try{u=await e.multipartUploadProject(t,p,a)}catch(e){n.triggerError(e)}if(!u)return void n.triggerError();const{projectId:h,commitId:m}=u,{messages:f}=l().intlr,E=f["PROJECT.EXPORT.MYPROJECTS.MSG"];c(M("SUCCESS")),o.a.success(E,2);const g={origin:d.map(e=>(e.id===h&&(e.commitId=m),e)),dowithOrigin:d.map(e=>(e.id===a.id&&(e.id=h,e.projectId=h),e))},T={projectId:h,commitId:m,projectType:i.a.PROJECT_TYPE.LIST,name:a.projectName,isSelfProject:a.isSelfProject,isShare:a.isShare,projects:g[h&&a.isSelfProject?"origin":"dowithOrigin"],isForThirdPlatform:!1};a.isSelfProject||(T.isSelfProject=!0,T.isShare=!1),c({type:k.q,payload:T}),s.a.preProjectData=S.a.instance.getProjectJsonString(),c({type:k.m,payload:{saveProgress:0}}),r&&r(h)}}(f,m,T,D,n))}}function G(e,t){return async(n,o)=>{const{project:a}=o(),r=e||a.projectid,c=t||a.projectType;let l=a.isForThirdPlatform;r&&c!==i.a.PROJECT_TYPE.EXAMPLE?r&&s.a.isSelfProject(r,a.projects)&&c&&(l=!1):l=!1,n({type:k.k,payload:{isForThirdPlatform:l}})}}var H=t.a={getProjects:function(){return async(e,t)=>{let n=[];const a=await s.a.getProjectList();if(a.error){if("99999"===a.error.code){const{intlr:e}=t();o.a.warning(e.messages["NETWORK.ERR.MSG"],2)}}else n=a;e({type:k.d,payload:{projects:n}})}},openProject:q,createProject:j,renameProject:function(e,t,n,a){return async(c,l)=>{const{intlr:d,project:p,passport:u}=l(),{isSelfProject:h}=p;if(e&&h&&u.userInfo){const i=await s.a.renameProject(e,t,n);if(i.error)return r.a.isFunction(a)&&a(i.error),void o.a.warning(d.messages["NETWORK.ERR.MSG"],2);c(function(e,t){return(n,o)=>{const{project:a}=o();let r=a.projects||[];r=r.map(n=>n.id===e?{...n,...t}:n),n({type:k.p,payload:{projects:r}})}}(e,{projectName:t})),p.projectId===e&&c({type:k.h,payload:{name:t}})}else c({type:k.h,payload:{name:t}});c(function(e,t){return async(n,o)=>{const{project:a}=o(),{projectType:s,filePath:c}=a;if(s===i.a.PROJECT_TYPE.LOCAL){if(r.a.isNull(c))return;const o=c.replace(/^.*[\\/]/,""),a=c.replace(o,"");try{const o=await w.c.rename(c,`${a}${e}.${i.a.PROJECT_SUFFIX[0]}`);o&&(n(H.setFilePath(o.filePath)),r.a.isFunction(t)&&t())}catch(e){r.a.isFunction(t)&&t(e)}}}}(t,a)),r.a.isFunction(a)&&a()}},copyProject:function(){},deleteProject:function(e){return async(t,n)=>{const{project:a,intlr:r}=n(),{projects:i}=a,c=await s.a.deleteProject(e);if(c.error){if("99999"===c.error.code){const{messages:e}=r;o.a.warning(e["NETWORK.ERR.MSG"],2)}return}const l=i.filter(t=>t.id!==Number(e));t({type:k.c,payload:{projects:l}}),b.default.emit("CancelSelectedId"),I.a.replace("/projects")}},exportProject:F,saveProject:B,confirmSave:function(e,t,n={}){return async(o,a)=>{S.a.instance.stop();const{project:r}=a(),{projectType:c}=r;e?c===i.a.PROJECT_TYPE.LOCAL?(await o(F()),s.a.setSaved(!0)):await o(B(!1,n)):s.a.setSaved(),o(function(e){return(t,n)=>{const{project:o,passport:a}=n();if(!s.a.isSaved())return a.userInfo?(t(M("FAILURE")),void I.a.replace("/")):I.a.replace("/login");s.a.isSaved()&&t(function(e){return t=>{const{projectType:n,projectId:o,projects:a}=e;let r=null;if(r=n===i.a.PROJECT_TYPE.EXAMPLE,r)t(D(!0,!1));else{t(D(s.a.isSelfProject(o,a),s.a.hadShared(a,o)))}}}(o));let r="",c=i.a.PROJECT_TYPE.LIST;switch(s.a.nextProjectCache&&(r=s.a.nextProjectCache.file,c=s.a.nextProjectCache.projectType),e){case"open":t(q(r,c));break;case"new":t(j());break;case"close":w.c.closeWindow()}I.a.replace("/")}}(t))}},saveError:U,initProjectInfo:L,setInfoBaseProjects:function(){return async(e,t)=>{const{project:n}=t(),{projects:o,projectId:a}=n,c=s.a.getCorrectId(a),l=s.a.isSelfProject(c,o),d=await s.a.fetchProjectBaseInfoById(c),p=l?s.a.hadShared(o,c):d&&1===Number(d.isShare);e(async(e,t)=>{if(Object(O.isBoxCourse)("courseId"))return;const{intlr:n,project:o}=t(),{projectId:a,projectType:c,name:l,projects:d}=o,{EXAMPLE:p,LOCAL:u,PRESET:h}=i.a.PROJECT_TYPE;if(a||-1!==r.a.indexOf([p,u,h],c))return;const m=s.a.isConfirmName?l:n.messages["FILENAME.EMPTY"],f=s.a.getNewProjectName(m,d);e({type:k.g,payload:{name:f}})}),e(D(l,p))}},setName:function(e){return t=>{t({type:k.l,payload:{name:e}})}},setFilePath:x,setProjectPlatformType:G,setProjectCloudThirdPlatform:function(e){return async t=>{t({type:k.k,payload:{isForThirdPlatform:e}})}},updateRemoteProjectFromUrl:function(e){return async(t,n)=>{const o=Object(O.getUrlParams)()||{},a=o.cloudProjectId||"",c=o.lang;if(!a&&!e)return;c&&t(Object(R.change)(c));const l=e||await s.a.fetchProjectBaseInfoById(a);if(!l)return void t(L());const d={name:l.projectName,projectType:l.projectType||i.a.PROJECT_TYPE.LIST},{passport:p,project:u}=n(),{projects:h}=u;t(G(a,d.projectType));const m=!!r.a.has(e,"isSelfProject")&&e.isSelfProject,f=!r.a.has(e,"isShare")||e.isShare;p.userInfo?(d.projectId=a,s.a.getProject(a,h)?t(D(!0,s.a.hadShared(h,a))):t(D(m,f))):(t(D(m,f)),d.projectId=l.id),t({type:k.q,payload:d})}},dragOpenFile:function(e){return(t,n)=>{if(e instanceof File){const{intlr:a}=n(),s=Object(O.getFileSuffix)(e.name),c=s.toLowerCase();if(-1!==i.a.PROJECT_SUFFIX.indexOf(c))t(q(e,i.a.PROJECT_TYPE.LOCAL));else if("zip"===c){const t=`exts/${e.name.replace(`.${s}`,"")}`;try{w.c.uncompress({file:e,extractPath:t,onProgress:()=>{},onFinish:async()=>{try{const e=await fetch(`${t}/manifest.json`).then(e=>e.json());S.a.instance.loadedExt(e)}catch(t){o.a.error(` ${e.name}  ${a.messages["IMPORT.FORMAT.ERROR.MSG"]} `)}},onError:()=>o.a.error(` ${e.name}  ${a.messages["IMPORT.FORMAT.ERROR.MSG"]} `)})}catch(e){}}else"mext"===c?t(function(e){return(t,n)=>{_.c.dragExtFile(e,async(e,t)=>{const{intlr:a}=n();if(null==e){const e={...t},{langKey:n,messages:i}=a,s=e.updateStatus===_.d.Updated,c=s?"UPDATE":"INSTALL",l=Object(N.d)();if(!t.device)try{const e=[].concat(t.targets).filter(e=>!l.includes(e.toLowerCase()));await Object(N.i)(e)}catch(e){}s&&l.includes(e.id.toLowerCase())||await Object(N.h)(e,!0);const d=e=>e&&r.a.isPlainObject(e)&&Object.keys(e)[0]||"",p=r.a.isString(t.name)?t.name:t.name[r.a.has(t.name,n)?n:d(t.name)],u=i[`EXTENSION.${c}.SUCCESS`];o.a.success(`${p} ${u}`)}else"manifest info apiVersion is not supported"===e.message?o.a.error(`${a.messages["EXTENSION.NOTSUPPORT.TEXT"]}`):o.a.error(`${a.messages["EXTENSION.INSTALL.FAIL"]}`)})}}(e)):o.a.error(` ${e.name}  ${a.messages["IMPORT.FORMAT.ERROR.MSG"]} `)}}},clearProjects:function(){return e=>{e({type:k.a})}},hideLoadingPage:function(){return e=>{e({type:k.e})}},updateLocalProjectInfo:function(e,t){e(x(t));const n=t?Object(O.getFileName)(t):name;e(D(!0,!1));const o={projectId:"",name:n,projectType:i.a.PROJECT_TYPE.LOCAL};e({type:k.q,payload:o})}}},310:function(e,t,n){(e.exports=n(68)(!1)).push([e.i,".mcode-link-wrapper {\n  position: relative;\n  margin-right: 10px;\n}\n.mcode-link {\n  display: inline-block;\n  height: 32px;\n  line-height: 32px;\n  padding: 0 24px;\n  border-radius: 6px;\n  background: #ffd05b;\n  box-shadow: 0px 2px 8px 0px rgba(0, 0, 0, 0.26);\n  color: #dd6820;\n  font-weight: 500;\n  white-space: nowrap;\n  cursor: pointer;\n}\n.mcode-link:hover {\n  box-shadow: none;\n  background: #ffda83;\n  color: #dd6820;\n}\n.mcode-link-tip {\n  position: absolute;\n  right: 0;\n  top: 40px;\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n  border-radius: 5px;\n  padding: 10px 30px 10px 10px;\n  width: 560px;\n}\n.mcode-link-tip .anticon {\n  position: absolute;\n  top: 13px;\n  right: 10px;\n  cursor: pointer;\n}\n.mcode-link-tip a {\n  margin: 0 10px;\n  color: #fdc02f;\n  text-decoration: underline;\n}\n.mcode-link-tip a:hover {\n  color: #ffda83;\n}\n.mcode-link-tip::after {\n  content: '';\n  font-size: 0;\n  position: absolute;\n  border-color: transparent transparent rgba(0, 0, 0, 0.7) transparent;\n  border-style: solid;\n  border-width: 5px;\n  top: -10px;\n  right: 60px;\n}\n.rtl .mcode-link-tip {\n  left: 0;\n  right: auto;\n}\n.rtl .mcode-link-tip::after {\n  left: 60px;\n  right: auto;\n}\n",""])},311:function(e,t,n){(e.exports=n(68)(!1)).push([e.i,".ant-layout-header {\n  background: var(--PRIMARY-COLOR);\n  height: 50px;\n}\n.header-dropdown-menu.ant-dropdown-menu,\n.header-dropdown-menu .ant-dropdown-menu {\n  background-color: var(--PRIMARY-COLOR);\n}\n.header {\n  position: relative;\n  width: 100%;\n  line-height: normal;\n  z-index: 100;\n  padding-left: 0;\n  padding-right: 0;\n}\n.header .header-cell {\n  display: inline-flex;\n  height: 100%;\n  vertical-align: top;\n  align-items: center;\n  justify-content: center;\n  z-index: 1;\n  overflow: hidden;\n}\n.header .header-cell .cell-item {\n  padding: 0 4px;\n  margin-right: 6px;\n  min-width: 26px;\n  height: 100%;\n  line-height: 1;\n  border: none;\n  background: none;\n  font-size: 14px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  color: #fff;\n  cursor: pointer;\n  transition: background 0.3s ease-in-out;\n}\n.header .header-cell .cell-item > div {\n  display: inline-flex;\n  align-items: center;\n  height: 100%;\n}\n.header .header-cell .cell-item i {\n  display: inline-flex;\n  align-items: center;\n  height: 100%;\n  font-size: 20px;\n  vertical-align: middle;\n}\n.header .header-cell .cell-item span {\n  margin-left: 4px;\n  font-weight: 500;\n}\n.header .header-cell .cell-item:hover,\n.header .header-cell .cell-item:active,\n.header .header-cell .cell-item:focus {\n  background: rgba(0, 0, 0, 0.1174);\n}\n.header .header-cell.user-menu-cell {\n  position: absolute;\n}\n.header .header-cell.user-menu-cell {\n  right: 0;\n}\n.header .header-cell.tutorial-btn {\n  height: 50px;\n}\n.menu-shortcut-key {\n  margin-left: 2em;\n  text-align: right;\n}\n.menu-trigger {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  padding: 4px;\n  cursor: pointer;\n  transition: background-color 0.3s ease-in-out;\n}\n.menu-trigger:hover {\n  background-color: rgba(0, 0, 0, 0.1174);\n}\n.menu-trigger:active,\n.menu-trigger.active {\n  background-color: rgba(0, 0, 0, 0.1174);\n}\n.menu-icon {\n  flex-direction: column;\n}\n.menu-icon .menu-bar {\n  display: block;\n  width: 1.5rem;\n  height: 3px;\n  border-radius: 3px;\n  background-color: #fff;\n}\n.menu-icon .menu-bar.menu-middle-bar {\n  margin: 5px 0;\n}\n.user-menu {\n  color: #fff;\n  font-size: 16px;\n}\n.sync-status {\n  padding-left: 10px;\n  font-size: 14px;\n  color: white;\n}\n.sync-status i {\n  margin-right: 8px;\n  font-weight: bold;\n}\n.sync-status.syncing span,\n.sync-status.syncing i {\n  color: var(--BTN-HOVER-COLOR);\n}\n.sync-status.fail span {\n  color: #fd7d70;\n}\n.sync-status.success span {\n  color: #62d669;\n}\n.input-rename {\n  margin: 0 2px !important;\n  background-color: rgba(0, 0, 0, 0.1);\n  margin: 0;\n  font-size: 12px;\n  font-weight: 500;\n  cursor: pointer;\n  height: 30px;\n  line-height: 30px;\n  width: 170px;\n  min-width: 170px;\n  max-width: 20rem;\n  text-align: left;\n  border: 1px solid rgba(255, 255, 255, 0.37);\n  border-radius: 1.5rem;\n  padding: 0 1rem;\n  color: #fff;\n  transition: all 0.3s ease-in-out;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.input-rename:hover,\n.input-rename:active,\n.input-rename:focus {\n  background: rgba(0, 0, 0, 0.16);\n  border: 1px solid transparent !important;\n  box-shadow: none !important;\n}\n.input-rename:focus {\n  background: #fff;\n  color: #405471;\n}\n.header-dropdown-menu {\n  min-width: 8rem;\n  border-radius: 8px;\n}\n.header-dropdown-menu .ant-dropdown-menu-submenu.ant-dropdown-menu-submenu-disabled .ant-dropdown-menu-submenu-title,\n.header-dropdown-menu .ant-dropdown-menu-submenu.ant-dropdown-menu-submenu-disabled .ant-dropdown-menu-submenu-title .ant-dropdown-menu-submenu-arrow-icon {\n  color: rgba(0, 0, 0, 0.1174) !important;\n}\n.header-dropdown-menu .ant-dropdown-menu-submenu.ant-dropdown-menu-submenu-disabled .ant-dropdown-menu-submenu-title:hover,\n.header-dropdown-menu .ant-dropdown-menu-submenu.ant-dropdown-menu-submenu-disabled .ant-dropdown-menu-submenu-title .ant-dropdown-menu-submenu-arrow-icon:hover {\n  color: rgba(0, 0, 0, 0.1174);\n  background: rgba(0, 0, 0, 0.1174);\n  cursor: not-allowed;\n}\n.header-dropdown-menu.ant-dropdown-menu,\n.header-dropdown-menu .ant-dropdown-menu {\n  background-color: var(--PRIMARY-COLOR);\n}\n.header-dropdown-menu.ant-dropdown-menu .ant-dropdown-menu-item-disabled,\n.header-dropdown-menu .ant-dropdown-menu .ant-dropdown-menu-item-disabled {\n  color: rgba(0, 0, 0, 0.1174);\n}\n.header-dropdown-menu.ant-dropdown-menu .ant-dropdown-menu-item-disabled:hover,\n.header-dropdown-menu .ant-dropdown-menu .ant-dropdown-menu-item-disabled:hover {\n  color: rgba(0, 0, 0, 0.1174);\n  background: rgba(0, 0, 0, 0.1174);\n  cursor: not-allowed;\n}\n.header-dropdown-menu.ant-dropdown-menu.ant-dropdown-menu-sub,\n.header-dropdown-menu .ant-dropdown-menu.ant-dropdown-menu-sub {\n  margin-left: -4px;\n}\n.header-dropdown-menu.ant-dropdown-menu:not(.ant-dropdown-menu-sub) .ant-dropdown-menu-item:first-child,\n.header-dropdown-menu.ant-dropdown-menu:not(.ant-dropdown-menu-sub) .ant-dropdown-menu-item:first-child > a {\n  border-radius: 0;\n}\n.header-dropdown-menu .ant-dropdown-menu-submenu-title,\n.header-dropdown-menu .ant-dropdown-menu-item {\n  padding: 5px 20px 5px 16px;\n  font-weight: 500;\n  font-size: 12px;\n  color: #fff;\n  display: flex;\n  justify-content: space-between;\n}\n.header-dropdown-menu .ant-dropdown-menu-submenu-title:hover,\n.header-dropdown-menu .ant-dropdown-menu-item:hover {\n  background: rgba(0, 0, 0, 0.1174);\n  border-radius: 0;\n}\n.header-dropdown-menu .ant-dropdown-menu-submenu-title .shortcutkey,\n.header-dropdown-menu .ant-dropdown-menu-item .shortcutkey {\n  margin-left: 1rem;\n}\n.ant-dropdown-menu-item-selected {\n  border-radius: 0;\n}\n.check-lang-update-btn {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-top: 1px solid rgba(255, 255, 255, 0.2);\n}\n.check-lang-update-btn i {\n  font-size: 1.3rem;\n}\n.rtl .ant-dropdown-menu-item .shortcutkey {\n  margin-right: 1rem;\n}\n.no-events {\n  pointer-events: none;\n}\n.header-web {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  min-width: 1024px;\n  word-break: keep-all;\n}\n.header-web .header-logo {\n  cursor: pointer;\n  display: inline-block;\n  color: #fff;\n  font-size: 20px;\n  font-weight: bold;\n}\n.header-web .main-menu-cell {\n  cursor: pointer;\n}\n.header-web .main-menu-cell i {\n  font-size: 16px;\n}\n.header-web .language-cell {\n  cursor: pointer;\n}\n.header-web .header-divider {\n  height: 20px !important;\n  background: rgba(255, 255, 255, 0.3);\n}\n.header-web .back-menu-cell .ant-btn.editor-header-project-button {\n  height: 100%;\n  border-radius: 0;\n}\n.header-web .back-menu-cell .ant-btn.editor-header-project-button span {\n  font-size: 14px;\n}\n.header-web .gclassroom-btn {\n  position: absolute;\n  left: 12rem;\n  width: 50px;\n  cursor: pointer;\n}\n.header-web .editor-header-publish {\n  padding: 0 20px;\n  height: 30px;\n  margin-left: 2px;\n  font-size: 14px !important;\n  font-weight: 500;\n  background: #ffffff;\n  box-shadow: 0px 1px 8px 0px rgba(0, 0, 0, 0.26);\n  color: var(--PRIMARY-COLOR);\n  border: none;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.header-web .editor-header-publish .icon-fabuchenggong {\n  margin-right: 6px;\n}\n.header-web .editor-header-publish .icon-fabu1 {\n  margin-right: 4px;\n}\n.header-web .editor-header-publish:hover {\n  box-shadow: none;\n}\n.header-web .editor-header-publish:focus {\n  background: #f9f9f9;\n  box-shadow: none;\n}\n.header-web .has-update {\n  background: #62d669;\n  color: #fff;\n}\n.header-web .editor-header-project-button > i {\n  font-size: xx-large;\n  vertical-align: initial;\n  margin-right: 4px;\n}\n.header-web .menu-trigger {\n  height: 100%;\n}\n.language-dropdown .ant-dropdown-menu.header-dropdown-menu.ant-dropdown-menu-light.ant-dropdown-menu-root.ant-dropdown-menu-vertical,\n.file-dropdown .ant-dropdown-menu.header-dropdown-menu.ant-dropdown-menu-light.ant-dropdown-menu-root.ant-dropdown-menu-vertical,\n.edit-dropdown .ant-dropdown-menu.header-dropdown-menu.ant-dropdown-menu-light.ant-dropdown-menu-root.ant-dropdown-menu-vertical,\n.tutorial-dropdown .ant-dropdown-menu.header-dropdown-menu.ant-dropdown-menu-light.ant-dropdown-menu-root.ant-dropdown-menu-vertical,\n.other-dropdown .ant-dropdown-menu.header-dropdown-menu.ant-dropdown-menu-light.ant-dropdown-menu-root.ant-dropdown-menu-vertical,\n.account-dropdown .ant-dropdown-menu.header-dropdown-menu.ant-dropdown-menu-light.ant-dropdown-menu-root.ant-dropdown-menu-vertical {\n  max-height: 426px;\n  overflow-y: auto;\n  padding: 0;\n}\n/* extend from pc.less */\n.editor-header-save-button {\n  width: 35px;\n  padding-left: 10px;\n  padding-right: 10px;\n}\n.feedback-btn,\n.makex-btn,\n.courses-btn,\n.save-operation,\n.saving-operation {\n  display: inline-flex;\n  align-items: center;\n  margin-right: 8px;\n  padding: 0 4px;\n  height: 100%;\n  border: none;\n  background: none;\n  font-size: 14px;\n  color: #fff;\n  cursor: pointer;\n  transition: background 0.3s ease-in-out;\n}\n.feedback-btn:hover,\n.makex-btn:hover,\n.courses-btn:hover,\n.save-operation:hover,\n.saving-operation:hover {\n  background: rgba(0, 0, 0, 0.1174);\n  color: #fff;\n}\n.feedback-btn span,\n.makex-btn span,\n.courses-btn span,\n.save-operation span,\n.saving-operation span {\n  margin-left: 4px;\n  font-size: 14px;\n  font-weight: 500;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.editor-header-save-list-menu {\n  background-color: #274264;\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n  width: 160px;\n  margin-top: -4px;\n}\n.editor-header-save-list-menu li {\n  color: #fff;\n}\n.editor-header-save-list-menu li:hover {\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n}\n.editor-header-local {\n  padding-left: 12px;\n  font-size: 14px;\n  font-weight: 500;\n  color: #fff;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.editor-header-save {\n  font-size: 14px;\n  color: #fff;\n}\n.user-name {\n  display: inline-block;\n  margin-right: 10px;\n  max-width: 150px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.save-tip {\n  text-align: left;\n  white-space: nowrap;\n}\n.header[dir='rtl'] .editor-header-publish {\n  margin-left: 0;\n  margin-right: 20px;\n}\n.header[dir='rtl'] .feedback-btn span,\n.header[dir='rtl'] .save-operation span,\n.header[dir='rtl'] .saving-operation span {\n  margin-left: 0;\n  margin-right: 4px;\n}\n.header[dir='rtl'] i {\n  margin-right: 0;\n  margin-left: 4px !important;\n}\n.header[dir='rtl'] input {\n  text-align: right;\n}\n",""])},312:function(e,t,n){(e.exports=n(68)(!1)).push([e.i,".dragload-holder {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n  opacity: 0;\n  background-color: rgba(144, 144, 144, 0.4);\n  border: 0.25em dashed rgba(64, 64, 64, 0.6);\n  transition: all ease-in-out 0.25s;\n}\n.dragload-holder.dragload-holder-show {\n  opacity: 1;\n}\n.dragload-holder.dragload-holder-show span {\n  font-size: 3em;\n}\n",""])},313:function(e,t,n){(e.exports=n(68)(!1)).push([e.i,".mscratch-container-box,\n.mscratch-container {\n  min-height: 10px;\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n.upload-loading {\n  top: 80px;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 99999;\n  position: fixed;\n  padding: 14px 20px;\n  border-radius: 5px;\n  border: 1px solid var(--PRIMARY-COLOR);\n  background: var(--MAIN-BG-COLOR);\n  font-size: 14px;\n  font-weight: bold;\n}\n.upload-loading i {\n  margin-right: 10px;\n}\n",""])},314:function(e,t,n){(e.exports=n(68)(!1)).push([e.i,"/*!\n * Quill Editor v1.3.6\n * https://quilljs.com/\n * Copyright (c) 2014, Jason Chen\n * Copyright (c) 2013, salesforce.com\n */\n.ql-container {\n  box-sizing: border-box;\n  font-family: Helvetica, Arial, sans-serif;\n  font-size: 13px;\n  height: 100%;\n  margin: 0px;\n  position: relative;\n}\n.ql-container.ql-disabled .ql-tooltip {\n  visibility: hidden;\n}\n.ql-container.ql-disabled .ql-editor ul[data-checked] > li::before {\n  pointer-events: none;\n}\n.ql-clipboard {\n  left: -100000px;\n  height: 1px;\n  overflow-y: hidden;\n  position: absolute;\n  top: 50%;\n}\n.ql-clipboard p {\n  margin: 0;\n  padding: 0;\n}\n.ql-editor {\n  box-sizing: border-box;\n  line-height: 1.42;\n  height: 100%;\n  outline: none;\n  overflow-y: auto;\n  padding: 12px 15px;\n  tab-size: 4;\n  -moz-tab-size: 4;\n  text-align: left;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.ql-editor > * {\n  cursor: text;\n}\n.ql-editor p,\n.ql-editor ol,\n.ql-editor ul,\n.ql-editor pre,\n.ql-editor blockquote,\n.ql-editor h1,\n.ql-editor h2,\n.ql-editor h3,\n.ql-editor h4,\n.ql-editor h5,\n.ql-editor h6 {\n  margin: 0;\n  padding: 0;\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol,\n.ql-editor ul {\n  padding-left: 1.5em;\n}\n.ql-editor ol > li,\n.ql-editor ul > li {\n  list-style-type: none;\n}\n.ql-editor ul > li::before {\n  content: '\\2022';\n}\n.ql-editor ul[data-checked=true],\n.ql-editor ul[data-checked=false] {\n  pointer-events: none;\n}\n.ql-editor ul[data-checked=true] > li *,\n.ql-editor ul[data-checked=false] > li * {\n  pointer-events: all;\n}\n.ql-editor ul[data-checked=true] > li::before,\n.ql-editor ul[data-checked=false] > li::before {\n  color: #777;\n  cursor: pointer;\n  pointer-events: all;\n}\n.ql-editor ul[data-checked=true] > li::before {\n  content: '\\2611';\n}\n.ql-editor ul[data-checked=false] > li::before {\n  content: '\\2610';\n}\n.ql-editor li::before {\n  display: inline-block;\n  white-space: nowrap;\n  width: 1.2em;\n}\n.ql-editor li:not(.ql-direction-rtl)::before {\n  margin-left: -1.5em;\n  margin-right: 0.3em;\n  text-align: right;\n}\n.ql-editor li.ql-direction-rtl::before {\n  margin-left: 0.3em;\n  margin-right: -1.5em;\n}\n.ql-editor ol li:not(.ql-direction-rtl),\n.ql-editor ul li:not(.ql-direction-rtl) {\n  padding-left: 1.5em;\n}\n.ql-editor ol li.ql-direction-rtl,\n.ql-editor ul li.ql-direction-rtl {\n  padding-right: 1.5em;\n}\n.ql-editor ol li {\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n  counter-increment: list-0;\n}\n.ql-editor ol li:before {\n  content: counter(list-0, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-1 {\n  counter-increment: list-1;\n}\n.ql-editor ol li.ql-indent-1:before {\n  content: counter(list-1, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-1 {\n  counter-reset: list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-2 {\n  counter-increment: list-2;\n}\n.ql-editor ol li.ql-indent-2:before {\n  content: counter(list-2, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-2 {\n  counter-reset: list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-3 {\n  counter-increment: list-3;\n}\n.ql-editor ol li.ql-indent-3:before {\n  content: counter(list-3, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-3 {\n  counter-reset: list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-4 {\n  counter-increment: list-4;\n}\n.ql-editor ol li.ql-indent-4:before {\n  content: counter(list-4, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-4 {\n  counter-reset: list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-5 {\n  counter-increment: list-5;\n}\n.ql-editor ol li.ql-indent-5:before {\n  content: counter(list-5, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-5 {\n  counter-reset: list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-6 {\n  counter-increment: list-6;\n}\n.ql-editor ol li.ql-indent-6:before {\n  content: counter(list-6, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-6 {\n  counter-reset: list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-7 {\n  counter-increment: list-7;\n}\n.ql-editor ol li.ql-indent-7:before {\n  content: counter(list-7, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-7 {\n  counter-reset: list-8 list-9;\n}\n.ql-editor ol li.ql-indent-8 {\n  counter-increment: list-8;\n}\n.ql-editor ol li.ql-indent-8:before {\n  content: counter(list-8, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-8 {\n  counter-reset: list-9;\n}\n.ql-editor ol li.ql-indent-9 {\n  counter-increment: list-9;\n}\n.ql-editor ol li.ql-indent-9:before {\n  content: counter(list-9, decimal) '. ';\n}\n.ql-editor .ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 3em;\n}\n.ql-editor li.ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 4.5em;\n}\n.ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 3em;\n}\n.ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 4.5em;\n}\n.ql-editor .ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 6em;\n}\n.ql-editor li.ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 7.5em;\n}\n.ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 6em;\n}\n.ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 7.5em;\n}\n.ql-editor .ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 9em;\n}\n.ql-editor li.ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 10.5em;\n}\n.ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 9em;\n}\n.ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 10.5em;\n}\n.ql-editor .ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 12em;\n}\n.ql-editor li.ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 13.5em;\n}\n.ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 12em;\n}\n.ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 13.5em;\n}\n.ql-editor .ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 15em;\n}\n.ql-editor li.ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 16.5em;\n}\n.ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 15em;\n}\n.ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 16.5em;\n}\n.ql-editor .ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 18em;\n}\n.ql-editor li.ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 19.5em;\n}\n.ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 18em;\n}\n.ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 19.5em;\n}\n.ql-editor .ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 21em;\n}\n.ql-editor li.ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 22.5em;\n}\n.ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 21em;\n}\n.ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 22.5em;\n}\n.ql-editor .ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 24em;\n}\n.ql-editor li.ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 25.5em;\n}\n.ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 24em;\n}\n.ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 25.5em;\n}\n.ql-editor .ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 27em;\n}\n.ql-editor li.ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 28.5em;\n}\n.ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 27em;\n}\n.ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 28.5em;\n}\n.ql-editor .ql-video {\n  display: block;\n  max-width: 100%;\n}\n.ql-editor .ql-video.ql-align-center {\n  margin: 0 auto;\n}\n.ql-editor .ql-video.ql-align-right {\n  margin: 0 0 0 auto;\n}\n.ql-editor .ql-bg-black {\n  background-color: #000;\n}\n.ql-editor .ql-bg-red {\n  background-color: #e60000;\n}\n.ql-editor .ql-bg-orange {\n  background-color: #f90;\n}\n.ql-editor .ql-bg-yellow {\n  background-color: #ff0;\n}\n.ql-editor .ql-bg-green {\n  background-color: #008a00;\n}\n.ql-editor .ql-bg-blue {\n  background-color: #06c;\n}\n.ql-editor .ql-bg-purple {\n  background-color: #93f;\n}\n.ql-editor .ql-color-white {\n  color: #fff;\n}\n.ql-editor .ql-color-red {\n  color: #e60000;\n}\n.ql-editor .ql-color-orange {\n  color: #f90;\n}\n.ql-editor .ql-color-yellow {\n  color: #ff0;\n}\n.ql-editor .ql-color-green {\n  color: #008a00;\n}\n.ql-editor .ql-color-blue {\n  color: #06c;\n}\n.ql-editor .ql-color-purple {\n  color: #93f;\n}\n.ql-editor .ql-font-serif {\n  font-family: Georgia, Times New Roman, serif;\n}\n.ql-editor .ql-font-monospace {\n  font-family: Monaco, Courier New, monospace;\n}\n.ql-editor .ql-size-small {\n  font-size: 0.75em;\n}\n.ql-editor .ql-size-large {\n  font-size: 1.5em;\n}\n.ql-editor .ql-size-huge {\n  font-size: 2.5em;\n}\n.ql-editor .ql-direction-rtl {\n  direction: rtl;\n  text-align: inherit;\n}\n.ql-editor .ql-align-center {\n  text-align: center;\n}\n.ql-editor .ql-align-justify {\n  text-align: justify;\n}\n.ql-editor .ql-align-right {\n  text-align: right;\n}\n.ql-editor.ql-blank::before {\n  color: rgba(0, 0, 0, 0.6);\n  content: attr(data-placeholder);\n  font-style: italic;\n  left: 15px;\n  pointer-events: none;\n  position: absolute;\n  right: 15px;\n}\n.ql-snow.ql-toolbar:after,\n.ql-snow .ql-toolbar:after {\n  clear: both;\n  content: '';\n  display: table;\n}\n.ql-snow.ql-toolbar button,\n.ql-snow .ql-toolbar button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  display: inline-block;\n  float: left;\n  height: 24px;\n  padding: 3px 5px;\n  width: 28px;\n}\n.ql-snow.ql-toolbar button svg,\n.ql-snow .ql-toolbar button svg {\n  float: left;\n  height: 100%;\n}\n.ql-snow.ql-toolbar button:active:hover,\n.ql-snow .ql-toolbar button:active:hover {\n  outline: none;\n}\n.ql-snow.ql-toolbar input.ql-image[type=file],\n.ql-snow .ql-toolbar input.ql-image[type=file] {\n  display: none;\n}\n.ql-snow.ql-toolbar button:hover,\n.ql-snow .ql-toolbar button:hover,\n.ql-snow.ql-toolbar button:focus,\n.ql-snow .ql-toolbar button:focus,\n.ql-snow.ql-toolbar button.ql-active,\n.ql-snow .ql-toolbar button.ql-active,\n.ql-snow.ql-toolbar .ql-picker-label:hover,\n.ql-snow .ql-toolbar .ql-picker-label:hover,\n.ql-snow.ql-toolbar .ql-picker-label.ql-active,\n.ql-snow .ql-toolbar .ql-picker-label.ql-active,\n.ql-snow.ql-toolbar .ql-picker-item:hover,\n.ql-snow .ql-toolbar .ql-picker-item:hover,\n.ql-snow.ql-toolbar .ql-picker-item.ql-selected,\n.ql-snow .ql-toolbar .ql-picker-item.ql-selected {\n  color: #06c;\n}\n.ql-snow.ql-toolbar button:hover .ql-fill,\n.ql-snow .ql-toolbar button:hover .ql-fill,\n.ql-snow.ql-toolbar button:focus .ql-fill,\n.ql-snow .ql-toolbar button:focus .ql-fill,\n.ql-snow.ql-toolbar button.ql-active .ql-fill,\n.ql-snow .ql-toolbar button.ql-active .ql-fill,\n.ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,\n.ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,\n.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,\n.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,\n.ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,\n.ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,\n.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,\n.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,\n.ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill {\n  fill: #06c;\n}\n.ql-snow.ql-toolbar button:hover .ql-stroke,\n.ql-snow .ql-toolbar button:hover .ql-stroke,\n.ql-snow.ql-toolbar button:focus .ql-stroke,\n.ql-snow .ql-toolbar button:focus .ql-stroke,\n.ql-snow.ql-toolbar button.ql-active .ql-stroke,\n.ql-snow .ql-toolbar button.ql-active .ql-stroke,\n.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,\n.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,\n.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,\n.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,\n.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,\n.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,\n.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,\n.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,\n.ql-snow.ql-toolbar button:hover .ql-stroke-miter,\n.ql-snow .ql-toolbar button:hover .ql-stroke-miter,\n.ql-snow.ql-toolbar button:focus .ql-stroke-miter,\n.ql-snow .ql-toolbar button:focus .ql-stroke-miter,\n.ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,\n.ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,\n.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,\n.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,\n.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,\n.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,\n.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,\n.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,\n.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,\n.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter {\n  stroke: #06c;\n}\n@media (pointer: coarse) {\n  .ql-snow.ql-toolbar button:hover:not(.ql-active),\n  .ql-snow .ql-toolbar button:hover:not(.ql-active) {\n    color: #444;\n  }\n  .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,\n  .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,\n  .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,\n  .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill {\n    fill: #444;\n  }\n  .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,\n  .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,\n  .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,\n  .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter {\n    stroke: #444;\n  }\n}\n.ql-snow {\n  box-sizing: border-box;\n}\n.ql-snow * {\n  box-sizing: border-box;\n}\n.ql-snow .ql-hidden {\n  display: none;\n}\n.ql-snow .ql-out-bottom,\n.ql-snow .ql-out-top {\n  visibility: hidden;\n}\n.ql-snow .ql-tooltip {\n  position: absolute;\n  transform: translateY(10px);\n}\n.ql-snow .ql-tooltip a {\n  cursor: pointer;\n  text-decoration: none;\n}\n.ql-snow .ql-tooltip.ql-flip {\n  transform: translateY(-10px);\n}\n.ql-snow .ql-formats {\n  display: inline-block;\n  vertical-align: middle;\n}\n.ql-snow .ql-formats:after {\n  clear: both;\n  content: '';\n  display: table;\n}\n.ql-snow .ql-stroke {\n  fill: none;\n  stroke: #444;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n  stroke-width: 2;\n}\n.ql-snow .ql-stroke-miter {\n  fill: none;\n  stroke: #444;\n  stroke-miterlimit: 10;\n  stroke-width: 2;\n}\n.ql-snow .ql-fill,\n.ql-snow .ql-stroke.ql-fill {\n  fill: #444;\n}\n.ql-snow .ql-empty {\n  fill: none;\n}\n.ql-snow .ql-even {\n  fill-rule: evenodd;\n}\n.ql-snow .ql-thin,\n.ql-snow .ql-stroke.ql-thin {\n  stroke-width: 1;\n}\n.ql-snow .ql-transparent {\n  opacity: 0.4;\n}\n.ql-snow .ql-direction svg:last-child {\n  display: none;\n}\n.ql-snow .ql-direction.ql-active svg:last-child {\n  display: inline;\n}\n.ql-snow .ql-direction.ql-active svg:first-child {\n  display: none;\n}\n.ql-snow .ql-editor h1 {\n  font-size: 2em;\n}\n.ql-snow .ql-editor h2 {\n  font-size: 1.5em;\n}\n.ql-snow .ql-editor h3 {\n  font-size: 1.17em;\n}\n.ql-snow .ql-editor h4 {\n  font-size: 1em;\n}\n.ql-snow .ql-editor h5 {\n  font-size: 0.83em;\n}\n.ql-snow .ql-editor h6 {\n  font-size: 0.67em;\n}\n.ql-snow .ql-editor a {\n  text-decoration: underline;\n}\n.ql-snow .ql-editor blockquote {\n  border-left: 4px solid #ccc;\n  margin-bottom: 5px;\n  margin-top: 5px;\n  padding-left: 16px;\n}\n.ql-snow .ql-editor code,\n.ql-snow .ql-editor pre {\n  background-color: #f0f0f0;\n  border-radius: 3px;\n}\n.ql-snow .ql-editor pre {\n  white-space: pre-wrap;\n  margin-bottom: 5px;\n  margin-top: 5px;\n  padding: 5px 10px;\n}\n.ql-snow .ql-editor code {\n  font-size: 85%;\n  padding: 2px 4px;\n}\n.ql-snow .ql-editor pre.ql-syntax {\n  background-color: #23241f;\n  color: #f8f8f2;\n  overflow: visible;\n}\n.ql-snow .ql-editor img {\n  max-width: 100%;\n}\n.ql-snow .ql-picker {\n  color: #444;\n  display: inline-block;\n  float: left;\n  font-size: 14px;\n  font-weight: 500;\n  height: 24px;\n  position: relative;\n  vertical-align: middle;\n}\n.ql-snow .ql-picker-label {\n  cursor: pointer;\n  display: inline-block;\n  height: 100%;\n  padding-left: 8px;\n  padding-right: 2px;\n  position: relative;\n  width: 100%;\n}\n.ql-snow .ql-picker-label::before {\n  display: inline-block;\n  line-height: 22px;\n}\n.ql-snow .ql-picker-options {\n  background-color: #fff;\n  display: none;\n  min-width: 100%;\n  padding: 4px 8px;\n  position: absolute;\n  white-space: nowrap;\n}\n.ql-snow .ql-picker-options .ql-picker-item {\n  cursor: pointer;\n  display: block;\n  padding-bottom: 5px;\n  padding-top: 5px;\n}\n.ql-snow .ql-picker.ql-expanded .ql-picker-label {\n  color: #ccc;\n  z-index: 2;\n}\n.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill {\n  fill: #ccc;\n}\n.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke {\n  stroke: #ccc;\n}\n.ql-snow .ql-picker.ql-expanded .ql-picker-options {\n  display: block;\n  margin-top: -1px;\n  top: 100%;\n  z-index: 1;\n}\n.ql-snow .ql-color-picker,\n.ql-snow .ql-icon-picker {\n  width: 28px;\n}\n.ql-snow .ql-color-picker .ql-picker-label,\n.ql-snow .ql-icon-picker .ql-picker-label {\n  padding: 2px 4px;\n}\n.ql-snow .ql-color-picker .ql-picker-label svg,\n.ql-snow .ql-icon-picker .ql-picker-label svg {\n  right: 4px;\n}\n.ql-snow .ql-icon-picker .ql-picker-options {\n  padding: 4px 0px;\n}\n.ql-snow .ql-icon-picker .ql-picker-item {\n  height: 24px;\n  width: 24px;\n  padding: 2px 4px;\n}\n.ql-snow .ql-color-picker .ql-picker-options {\n  padding: 3px 5px;\n  width: 152px;\n}\n.ql-snow .ql-color-picker .ql-picker-item {\n  border: 1px solid transparent;\n  float: left;\n  height: 16px;\n  margin: 2px;\n  padding: 0px;\n  width: 16px;\n}\n.ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg {\n  position: absolute;\n  margin-top: -9px;\n  right: 0;\n  top: 50%;\n  width: 18px;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=''])::before,\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=''])::before,\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=''])::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=''])::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=''])::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=''])::before {\n  content: attr(data-label);\n}\n.ql-snow .ql-picker.ql-header {\n  width: 98px;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item::before {\n  content: 'Normal';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"1\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"1\"]::before {\n  content: 'Heading 1';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"2\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"2\"]::before {\n  content: 'Heading 2';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"3\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"3\"]::before {\n  content: 'Heading 3';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"4\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"4\"]::before {\n  content: 'Heading 4';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"5\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"5\"]::before {\n  content: 'Heading 5';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"6\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"6\"]::before {\n  content: 'Heading 6';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"1\"]::before {\n  font-size: 2em;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"2\"]::before {\n  font-size: 1.5em;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"3\"]::before {\n  font-size: 1.17em;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"4\"]::before {\n  font-size: 1em;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"5\"]::before {\n  font-size: 0.83em;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"6\"]::before {\n  font-size: 0.67em;\n}\n.ql-snow .ql-picker.ql-font {\n  width: 108px;\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item::before {\n  content: 'Sans Serif';\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=serif]::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]::before {\n  content: 'Serif';\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]::before {\n  content: 'Monospace';\n}\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]::before {\n  font-family: Georgia, Times New Roman, serif;\n}\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]::before {\n  font-family: Monaco, Courier New, monospace;\n}\n.ql-snow .ql-picker.ql-size {\n  width: 98px;\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item::before {\n  content: 'Normal';\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=small]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]::before {\n  content: 'Small';\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=large]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]::before {\n  content: 'Large';\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=huge]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]::before {\n  content: 'Huge';\n}\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]::before {\n  font-size: 10px;\n}\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]::before {\n  font-size: 18px;\n}\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]::before {\n  font-size: 32px;\n}\n.ql-snow .ql-color-picker.ql-background .ql-picker-item {\n  background-color: #fff;\n}\n.ql-snow .ql-color-picker.ql-color .ql-picker-item {\n  background-color: #000;\n}\n.ql-toolbar.ql-snow {\n  border: 1px solid #ccc;\n  box-sizing: border-box;\n  font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;\n  padding: 8px;\n}\n.ql-toolbar.ql-snow .ql-formats {\n  margin-right: 15px;\n}\n.ql-toolbar.ql-snow .ql-picker-label {\n  border: 1px solid transparent;\n}\n.ql-toolbar.ql-snow .ql-picker-options {\n  border: 1px solid transparent;\n  box-shadow: rgba(0, 0, 0, 0.2) 0 2px 8px;\n}\n.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label {\n  border-color: #ccc;\n}\n.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options {\n  border-color: #ccc;\n}\n.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,\n.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover {\n  border-color: #000;\n}\n.ql-toolbar.ql-snow + .ql-container.ql-snow {\n  border-top: 0px;\n}\n.ql-snow .ql-tooltip {\n  background-color: #fff;\n  border: 1px solid #ccc;\n  box-shadow: 0px 0px 5px #ddd;\n  color: #444;\n  padding: 5px 12px;\n  white-space: nowrap;\n}\n.ql-snow .ql-tooltip::before {\n  content: \"Visit URL:\";\n  line-height: 26px;\n  margin-right: 8px;\n}\n.ql-snow .ql-tooltip input[type=text] {\n  display: none;\n  border: 1px solid #ccc;\n  font-size: 13px;\n  height: 26px;\n  margin: 0px;\n  padding: 3px 5px;\n  width: 170px;\n}\n.ql-snow .ql-tooltip a.ql-preview {\n  display: inline-block;\n  max-width: 200px;\n  overflow-x: hidden;\n  text-overflow: ellipsis;\n  vertical-align: top;\n}\n.ql-snow .ql-tooltip a.ql-action::after {\n  border-right: 1px solid #ccc;\n  content: 'Edit';\n  margin-left: 16px;\n  padding-right: 8px;\n}\n.ql-snow .ql-tooltip a.ql-remove::before {\n  content: 'Remove';\n  margin-left: 8px;\n}\n.ql-snow .ql-tooltip a {\n  line-height: 26px;\n}\n.ql-snow .ql-tooltip.ql-editing a.ql-preview,\n.ql-snow .ql-tooltip.ql-editing a.ql-remove {\n  display: none;\n}\n.ql-snow .ql-tooltip.ql-editing input[type=text] {\n  display: inline-block;\n}\n.ql-snow .ql-tooltip.ql-editing a.ql-action::after {\n  border-right: 0px;\n  content: 'Save';\n  padding-right: 0px;\n}\n.ql-snow .ql-tooltip[data-mode=link]::before {\n  content: \"Enter link:\";\n}\n.ql-snow .ql-tooltip[data-mode=formula]::before {\n  content: \"Enter formula:\";\n}\n.ql-snow .ql-tooltip[data-mode=video]::before {\n  content: \"Enter video:\";\n}\n.ql-snow a {\n  color: #06c;\n}\n.ql-container.ql-snow {\n  border: 1px solid #ccc;\n}\n",""])},315:function(e,t,n){(e.exports=n(68)(!1)).push([e.i,".help-wrapper {\n  height: 100%;\n  overflow-y: auto;\n}\n.help-wrapper * {\n  user-select: text;\n}\n.help-header {\n  padding: 16px 16px 4px 16px;\n  border-bottom: 1px solid #e0e5eb;\n}\n.help-header .sub-info {\n  display: flex;\n  justify-content: space-between;\n}\n.help-header .sub-info .author {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.help-header .sub-info .edit-time {\n  max-width: 45%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  text-align: right;\n}\n.header-img {\n  max-width: 100%;\n  margin-bottom: 8px;\n  font-size: 0;\n  display: inline-block;\n}\n.header-img svg {\n  max-width: 100%;\n}\n.header-img img {\n  height: 60px;\n}\n.help-content {\n  padding: 16px;\n}\n.help-content .retry-btn {\n  margin-left: 4px;\n  color: var(--PRIMARY-COLOR);\n  cursor: pointer;\n  text-decoration: underline;\n}\n.ql-editor {\n  height: auto;\n}\n.block-help-loading {\n  font-size: 36px;\n  display: flex;\n  height: 100%;\n  align-items: center;\n  justify-content: center;\n}\n",""])},316:function(e,t,n){(e.exports=n(68)(!1)).push([e.i,".compile-log {\n  padding: 0.5rem;\n  border: 1px solid #eee;\n  border-radius: 0.25rem;\n  height: 240px;\n  overflow: auto;\n  margin-bottom: 30px;\n  user-select: text;\n}\n.compile-log .log {\n  white-space: normal;\n  margin: 0;\n  user-select: text;\n}\n.compile-log .log.error {\n  color: #dc3805;\n}\n.progress-inner {\n  margin-bottom: 20px;\n  padding-top: 10px;\n}\n.progress-inner .fail-icon {\n  margin-left: 20px;\n  color: var(--ERROR-COLOR);\n  font-size: 20px;\n}\n",""])},317:function(e,t,n){(e.exports=n(68)(!1)).push([e.i,"#copyright {\n  position: absolute;\n  bottom: 2rem;\n  right: 5rem;\n  pointer-events: none;\n}\n#copyright img {\n  height: 24px;\n}\n",""])},318:function(e,t,n){(e.exports=n(68)(!1)).push([e.i,".guide-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1000;\n  pointer-events: none;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 200ms ease-in-out;\n}\n.guide-container.guide-visible {\n  opacity: 1;\n  visibility: visible;\n}\n.guide-bubble {\n  position: absolute;\n  z-index: 1;\n  pointer-events: auto;\n  background-color: #fff;\n  border-radius: 12px;\n  margin-top: 22px;\n  font-size: 16px;\n  font-weight: 400;\n  min-width: 32rem;\n  max-width: 42rem;\n}\n.guide-bubble[data-visible='true'] {\n  visibility: visible;\n}\n.guide-bubble[data-visible='false'] {\n  visibility: hidden;\n}\n.guide-bubble[data-placement='top'] {\n  margin-top: -22px;\n  margin-bottom: 22px;\n  margin-left: 0;\n  margin-right: 0;\n}\n.guide-bubble[data-placement='top'] .arrow-svg {\n  transform: rotate(180deg);\n  top: auto;\n}\n.guide-bubble[data-placement='bottom'] {\n  margin-top: 22px;\n  margin-bottom: 0;\n  margin-left: 0;\n  margin-right: 0;\n}\n.guide-bubble[data-placement='bottom'] .arrow-svg {\n  transform: rotate(0deg);\n  top: -14px;\n}\n.guide-bubble[data-placement='right'] {\n  margin-left: 22px;\n  margin-top: 0;\n  margin-bottom: 0;\n  margin-right: 0;\n}\n.guide-bubble[data-placement='right'] .arrow-svg {\n  transform: rotate(270deg);\n  top: auto;\n  left: -14px;\n}\n.guide-bubble[data-placement='left'] {\n  margin-top: 0;\n  margin-bottom: 0;\n  margin-left: -22px;\n  margin-right: 22px;\n}\n.guide-bubble[data-placement='left'] .arrow-svg {\n  transform: rotate(90deg);\n  top: auto;\n  left: -14px;\n}\n.guide-bubble .bubble-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 24px;\n  border-top: 1px solid #e0e5eb;\n}\n.guide-bubble .bubble-footer .skip {\n  flex: 1;\n}\n.guide-bubble .bubble-footer .skip span {\n  font-size: 14px;\n  color: #8f9aaa;\n  text-decoration: underline;\n  cursor: pointer;\n}\n.guide-bubble .bubble-footer .skip span:hover,\n.guide-bubble .bubble-footer .skip span:active {\n  color: var(--primary);\n}\n.guide-bubble .bubble-footer .progress {\n  flex: 1;\n  text-align: center;\n  color: #8f9aaa;\n}\n.guide-bubble .bubble-footer .button {\n  flex: 1;\n  white-space: nowrap;\n  text-align: right;\n}\n.guide-bubble .bubble-footer .button .btn-previous {\n  display: inline-block;\n  margin-right: 12px;\n  border-radius: 20px;\n  font-size: 16px;\n  border-color: #ffbe16;\n  color: #ffbe16;\n}\n.guide-bubble .bubble-footer .button .btn-previous:hover {\n  border-color: #ffbe16;\n  background-color: #ffbe16;\n  color: #fff;\n}\n.guide-bubble .bubble-footer .button .btn-previous:active {\n  border-color: #f6b606;\n  background-color: #f6b606;\n  color: #fff;\n}\n.guide-bubble .bubble-footer .button .btn-next {\n  display: inline-block;\n  box-shadow: 0 0 2px 0 #ffc738;\n  border-color: #ffbe16;\n  border-radius: 20px;\n  background: #ffbe16;\n  font-size: 16px;\n  color: #fff;\n}\n.guide-bubble .bubble-footer .button .btn-next:hover {\n  border-color: #ffc738;\n  background: #ffc738;\n}\n.guide-bubble .bubble-footer .button .btn-next:active {\n  border-color: #f6b606;\n  background: #f6b606;\n}\n.guide-bubble .arrow-svg {\n  position: absolute;\n  width: 30px;\n  height: 14px;\n  top: -14px;\n}\n.guide-grid-mask {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  pointer-events: none;\n  border: none;\n  border-collapse: collapse;\n}\n.guide-grid-mask td {\n  padding: 0;\n  font-size: 0;\n  color: #fff;\n  text-align: center;\n}\n.guide-grid-mask td:not(.cutout-cell) {\n  transition: background-color 0.2s ease-in-out;\n  background-color: rgba(0, 0, 0, 0.6);\n  pointer-events: auto;\n  position: relative;\n}\n.guide-grid-mask .cutout-cell {\n  background-color: transparent;\n  pointer-events: none;\n  position: relative;\n}\n.guide-grid-mask .cutout-cell .placeholder {\n  fill: rgba(0, 0, 0, 0.6);\n  stroke: none;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: block;\n}\n.guide-grid-mask .cutout-cell::before,\n.guide-grid-mask .cutout-cell::after {\n  content: '';\n  position: absolute;\n  width: 100%;\n  height: 6px;\n  left: 0;\n  pointer-events: auto;\n  background-color: transparent;\n}\n.guide-grid-mask .cutout-cell::before {\n  top: 0;\n}\n.guide-grid-mask .cutout-cell::after {\n  bottom: 0;\n}\n.cloned-block {\n  fill: #fff;\n  pointer-events: none;\n  position: absolute;\n  opacity: 1;\n  z-index: 10001;\n  line-height: 1.5;\n}\n.cloned-block .blocklyText {\n  font-size: 14pt;\n  font-family: 'PingFang SC', 'Microsoft YaHei', 'Hiragino Sans GB', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n.cloned-block .blocklyText.blocklyDropdownText {\n  fill: #fff;\n}\n.cloned-block .blocklyNonEditableText > text,\n.cloned-block .blocklyEditableText > text {\n  fill: #575e75;\n  font-weight: 500;\n}\n",""])},319:function(e,t,n){(e.exports=n(68)(!1)).push([e.i,"body {\n  min-width: 1024px;\n  min-height: 600px;\n  overflow-x: auto;\n  -webkit-font-smoothing: antialiased;\n}\n#root {\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n}\n.root-layout {\n  height: 100%;\n  position: relative;\n}\n.root-layout-list {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 100;\n  width: 100%;\n  padding-top: 50px;\n}\n.flex-row {\n  display: flex;\n  width: 100%;\n}\n.flex-row.jcc {\n  justify-content: center;\n}\n.flex-row.jcsb {\n  justify-content: space-between;\n}\n.flex-row .col.cc {\n  display: flex;\n  align-items: center;\n}\n.flex-row .col.auto-width-col {\n  flex: 1;\n}\n.cl-pd-lr {\n  padding-left: 0 !important;\n  padding-right: 0 !important;\n}\n.pd-lr {\n  padding-left: 1rem;\n  padding-right: 1rem;\n}\n.ml {\n  margin-left: 0.5em !important;\n}\n.mr {\n  margin-right: 0.5em !important;\n}\n.text-overflow {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.ant-message {\n  top: 52px;\n}\n.ant-progress-inner {\n  overflow: hidden;\n}\n.ant-progress-show-info .ant-progress-outer {\n  padding-right: calc(3em + 8px);\n  margin-right: calc(-3em - 8px);\n}\n.ant-progress-bg {\n  height: 20px !important;\n}\n.ant-progress-text {\n  font-size: 14px;\n  width: 3em;\n  text-align: right;\n  margin-left: 0;\n}\n.ant-progress-text .anticon {\n  font-size: 20px;\n}\n.has-error .ant-input:focus,\n.has-error .ant-input:active {\n  box-shadow: 0 2px 4px 0 rgba(245, 34, 45, 0.2);\n}\n.ant-popover-message {\n  max-width: 15rem;\n}\n.ant-popover-buttons {\n  text-align: center;\n}\n.btn-sm-font {\n  font-size: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.btn-sm-font span {\n  white-space: normal;\n}\n.ant-upload {\n  display: block;\n  width: 100%;\n}\n.ant-upload.ant-upload-select {\n  display: block;\n}\n.ant-select-focused .ant-select-selection,\n.ant-select-actived .ant-select-selection {\n  border: 1px solid var(--PRIMARY-COLOR);\n  box-shadow: 0 2px 4px 0 var(--LINE-COLOR);\n}\n.ant-select-selection {\n  border-radius: 18px;\n}\n.ant-select-selection:hover {\n  border-color: var(--BTN-HOVER-COLOR);\n}\n.ant-input {\n  border-radius: 20px;\n}\n.ant-input:hover {\n  border-color: var(--BTN-HOVER-COLOR);\n}\n.ant-input:focus,\n.ant-input:active {\n  border: 1px solid var(--PRIMARY-COLOR);\n  box-shadow: 0 2px 4px 0 var(--LINE-COLOR);\n}\ntextarea.ant-input {\n  border-radius: 18px;\n  padding-top: 12px;\n  padding-bottom: 12px;\n}\n.ant-input-group-addon {\n  border-radius: 0 18px 18px 0;\n}\n.vertical-center-modal {\n  text-align: center;\n  white-space: nowrap;\n}\n.vertical-center-modal::before {\n  content: '';\n  display: inline-block;\n  height: 100%;\n  vertical-align: middle;\n  width: 0;\n}\n.vertical-center-modal .ant-modal {\n  display: inline-block;\n  vertical-align: middle;\n  top: 0;\n  text-align: left;\n}\n.ant-form-explain {\n  padding-left: 0.25rem;\n  white-space: normal;\n}\n.ant-form-explain,\n.ant-form-extra {\n  margin-top: 5px;\n}\n.ant-form-item {\n  margin-bottom: 14px;\n}\n.ant-form-item-control {\n  line-height: initial !important;\n}\n.ant-form-item-with-help {\n  margin-bottom: 12px;\n}\n.ant-select-dropdown-menu-item:only-child,\n.ant-select-dropdown-menu-item:only-child > a {\n  border-radius: 8px;\n}\n.ant-select-dropdown-menu-item-active {\n  background-color: #fafafa;\n}\n.ant-menu-item-selected {\n  color: #fff;\n}\n.ant-menu-item-selected:hover {\n  color: #fff;\n}\n.ant-dropdown-menu-submenu-arrow::after {\n  color: #fff !important;\n}\n.ant-dropdown-menu-submenu-arrow .ant-dropdown-menu-submenu-arrow-icon {\n  color: #fff !important;\n}\n.ant-dropdown-menu-submenu.ant-dropdown-menu-submenu-placement-rightTop {\n  z-index: 999 !important;\n}\n.modal-hid {\n  width: 0;\n  opacity: 0;\n  overflow: hidden;\n}\n.modal-tabs {\n  min-width: 800px;\n  min-height: 600px;\n  height: 70%;\n  padding-bottom: 0;\n}\n.modal-tabs .ant-modal-content {\n  background-color: #fafafa;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  overflow: auto;\n}\n.modal-tabs .ant-modal-body {\n  padding: 0;\n  flex: 1;\n}\n.modal-tabs .ant-modal-footer {\n  background-color: #fff;\n  border-top: 1px solid #d7d7d7;\n  padding: 12px 32px 12px 32px;\n}\n.modal-tabs .ant-modal-footer .ant-btn {\n  min-width: 8rem;\n  margin-left: 20px;\n}\n.modal-tabs .ant-tabs-nav-container {\n  text-align: center;\n}\n.modal-tabs .ant-tabs-nav-container .ant-tabs-tab {\n  font-size: 18px;\n  margin: 0;\n  padding: 12px 3rem;\n}\n.modal-tabs .ant-tabs-nav-container .ant-tabs-ink-bar {\n  height: 4px;\n  border-radius: 4px;\n}\n.modal-tabs .ant-tabs {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.modal-tabs .ant-tabs-bar {\n  margin-bottom: 0;\n}\n.modal-tabs .ant-tabs-tabpane {\n  position: relative;\n  height: 100%;\n}\n.modal-tabs .ant-tabs-content {\n  flex: 1;\n  position: relative;\n}\n.modal-tabs .tab-content-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n}\n.modal-tabs .tab-content-container > .list {\n  list-style: none;\n  display: flex;\n  margin: 0;\n  padding: 0;\n  flex-wrap: wrap;\n  align-content: flex-start;\n  padding: 20px 30px 36px 30px;\n}\n.modal-tabs .tab-content-container > .list > .item {\n  width: 16.666666%;\n  padding: 10px;\n}\n.modal-tabs .tab-content-container > .list .sprites-pagination {\n  margin: 20px auto;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n}\n.modal-tabs .tabs-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n}\n.modal-tabs .modal-body-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.modal-tabs.sprites-modal {\n  height: 780px;\n  max-height: 90%;\n}\n.item-content-container {\n  width: 100%;\n  padding-top: 100%;\n  background-color: #fff;\n  border: 1px solid rgba(215, 215, 215, 0.8);\n  border-radius: 8px;\n  position: relative;\n  transform: translateZ(0);\n  transition: all 0.2s ease-in-out;\n  will-change: box-shadow;\n  cursor: pointer;\n}\n.item-content-container:hover:not(.selected) {\n  border-color: var(--BTN-HOVER-COLOR);\n  background-color: #fff;\n}\n.item-content-container.selected {\n  border-color: var(--PRIMARY-COLOR);\n  box-shadow: 0 2px 4px 0 var(--LINE-COLOR);\n  transition: none;\n}\n.item-content-container .sprite-content,\n.item-content-container .project-content {\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n}\n.item-content-container .sprite-content .project-content-loading,\n.item-content-container .project-content .project-content-loading {\n  position: absolute;\n  top: 0;\n  left: 0;\n  padding: 4px;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.3);\n  z-index: 20;\n  border-radius: 8px;\n  font-size: 20px;\n  color: white;\n}\n.item-content-container .sprite-content .project-content-loading span,\n.item-content-container .project-content .project-content-loading span {\n  margin-left: 10px;\n}\n.item-content-container .sprite-content .sprite-img,\n.item-content-container .project-content .sprite-img {\n  height: 120px;\n}\n.item-content-container .sprite-name {\n  display: flex;\n  flex: 1;\n  align-content: center;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  text-align: center;\n  margin-bottom: 0;\n  border-radius: 0 0 8px 8px;\n  background: #fbfbfb;\n  color: var(--TEXT-COLOR);\n}\n.item-content-container .sprite-name span {\n  margin: 0 1em;\n}\n.item-content-container .sprite-name:hover {\n  background: #e1e0e0;\n}\n.item-content-container .sprite-name .ant-input {\n  border: none;\n  border-radius: 0 0 8px 8px;\n  box-shadow: none;\n  background-color: transparent;\n  padding-left: 1em !important;\n  padding-right: 1em !important;\n  border: 2px solid #fbfbfb;\n  height: 100% !important;\n}\n.item-content-container .sprite-name .ant-input:hover {\n  background: #e1e0e0;\n  border: 2px solid #e1e0e0;\n}\n.item-content-container .sprite-name .ant-input:focus,\n.item-content-container .sprite-name .ant-input:active {\n  border: 2px solid #e1e0e0;\n  border-radius: 0 0 8px 8px;\n  background: white;\n  box-shadow: none;\n}\n.item-content-container .sprite-name .ant-input.ant-input-disabled {\n  cursor: default !important;\n  color: var(--TEXT-COLOR) !important;\n}\n.item-content-container .sprite-name .ant-input.ant-input-disabled:focus,\n.item-content-container .sprite-name .ant-input.ant-input-disabled:active {\n  background-color: #e1e0e0;\n  box-shadow: none;\n}\n.item-content-container .project-status {\n  position: absolute;\n  top: 4px;\n  left: 4px;\n  z-index: 10;\n  padding: 2px 10px;\n  border-radius: 8px;\n  background: rgba(0, 0, 0, 0.14);\n  font-size: 20px;\n  color: white;\n  text-align: left;\n}\n.item-content-container .project-share {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  z-index: 10;\n  border-radius: 8px;\n  background: rgba(0, 0, 0, 0.14);\n  padding: 2px 10px;\n  font-size: 20px;\n  color: white;\n  text-align: right;\n}\n.item-content-container .project-share:hover {\n  background: white;\n  color: var(--PRIMARY-COLOR);\n}\n.item-content-container .project-name {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  flex: 1;\n  margin-bottom: 0;\n  padding: 8px;\n  border-radius: 0 0 8px 8px;\n  color: var(--TEXT-COLOR);\n}\n.item-content-container .project-name .project-custom-span {\n  flex: 1;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.item-content-container .project-name .icon {\n  font-size: 16px;\n  color: #888888;\n}\n.item-content-container .project-name .icon:hover,\n.item-content-container .project-name .icon:focus {\n  color: var(--BTN-HOVER-COLOR);\n}\n.item-content-container .project-name .icon.disabled {\n  cursor: not-allowed;\n}\n.item-content-container .project-name .icon.disabled:hover,\n.item-content-container .project-name .icon.disabled:focus {\n  color: #888888;\n}\n.item-content-container .project-name p {\n  margin: 0;\n}\n.item-content-container .project-name .ant-input {\n  border-radius: 8px;\n  box-shadow: none;\n  background-color: transparent;\n  border: 1px solid white;\n  font-size: 20px;\n  color: var(--TEXT-COLOR);\n  padding: 4px 0;\n  height: 32px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.item-content-container .project-name .ant-input:hover {\n  background: #ededed;\n}\n.item-content-container .project-name .ant-input:focus,\n.item-content-container .project-name .ant-input:active {\n  border: 1px solid #ededed;\n  border-radius: 8px;\n  padding: 4px;\n  background: white;\n  box-shadow: none;\n}\n.item-content-container .project-name .ant-input.ant-input-disabled {\n  cursor: default !important;\n  color: var(--TEXT-COLOR) !important;\n}\n.item-content-container .project-name .ant-input.ant-input-disabled:hover {\n  background-color: white;\n}\n.item-content-container .project-name .ant-input.ant-input-disabled:focus,\n.item-content-container .project-name .ant-input.ant-input-disabled:active {\n  background-color: white;\n  box-shadow: none;\n  border: 1px solid white;\n  padding: 0;\n}\n.item-content-container .example-img,\n.item-content-container .device-img,\n.item-content-container .sprite-img,\n.item-content-container .project-img {\n  display: block;\n  height: 75%;\n  width: 100%;\n  position: relative;\n  border-radius: 8px 8px 0 0;\n}\n.item-content-container .example-img .img-placeholder,\n.item-content-container .device-img .img-placeholder,\n.item-content-container .sprite-img .img-placeholder,\n.item-content-container .project-img .img-placeholder {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: contain;\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n.item-content-container .example-img img,\n.item-content-container .device-img img,\n.item-content-container .sprite-img img,\n.item-content-container .project-img img {\n  display: block;\n  max-height: 100%;\n  max-width: 100%;\n  margin: 0 auto;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-user-drag: none;\n}\n.item-content-container .example-img {\n  padding: 1rem;\n}\n.item-content-container.selected .sprite-content:hover .device-img .device-marker {\n  opacity: 1;\n}\n.item-content-container .sprite-img {\n  padding: 1rem;\n}\n.item-content-container .project-img {\n  position: relative;\n  padding-top: 75%;\n  width: 100%;\n  background-position: center;\n  background-size: cover;\n}\n.item-content-container .project-img .defaultImg {\n  height: 100%;\n  background: #d7d7d7;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.item-content-container .project-img .defaultImg i {\n  font-size: 5rem;\n  color: white;\n}\n.device-container {\n  padding-top: 182px;\n  background: #fbfbfb;\n  overflow: hidden;\n}\n.device-container .sprite-content {\n  height: 180px;\n}\n.device-container .sprite-content .device-img {\n  position: relative;\n  padding: 0;\n  background: #fff;\n}\n.device-container .sprite-content .device-img .img-placeholder {\n  margin: 20px auto;\n  width: 100px;\n  height: 100px;\n}\n.device-container .sprite-content .device-img img {\n  max-width: 100%;\n  max-height: 100%;\n}\n.device-container .sprite-content .device-img .device-marker {\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  font-size: 24px;\n  opacity: 0;\n}\n.device-container .sprite-content .device-img .show {\n  opacity: 1;\n}\n.device-container .sprite-content .device-name-wrapper {\n  border-radius: 0 0 8px 8px;\n  background: #fbfbfb;\n  padding: 10px 10px 0 10px;\n  height: 48px;\n  line-height: 1;\n  width: 100%;\n}\n.device-container .sprite-content .device-name-wrapper .device-name-inner {\n  margin-bottom: 3px;\n  display: inline-block;\n  max-width: 100%;\n  line-height: 1;\n  font-size: 14px;\n  font-weight: bold;\n  color: #253858;\n}\n.device-container .sprite-content .device-name-wrapper .device-name-inner .device-name {\n  color: #253858;\n}\n.device-container .sprite-content .device-name-wrapper .device-name-inner .device-name:hover {\n  text-decoration: underline;\n  color: var(--PRIMARY-COLOR);\n}\n.device-container .sprite-content .device-name-wrapper .author {\n  font-size: 12px;\n  color: #56647d;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  transform: scale(0.84);\n  transform-origin: left;\n  display: inline-block;\n}\n.multi-img-tag,\n.multi-img-tag-inner {\n  display: block;\n  position: absolute;\n  width: 4rem;\n  height: 3rem;\n  border: 1px solid rgba(200, 200, 200, 0.8);\n  border-radius: 0.75rem;\n}\n.multi-img-tag {\n  top: 0.5rem;\n  left: 0.5rem;\n  transform: scale(0.25);\n  transform-origin: 0 0;\n}\n.multi-img-tag-inner {\n  margin-top: 0.75rem;\n  margin-left: 0.75rem;\n  background-color: rgba(255, 255, 255, 0.75);\n}\n.delete-img-tag {\n  position: absolute;\n  width: 1.25rem;\n  height: 1.25rem;\n  top: -0.6rem;\n  right: -0.6rem;\n  z-index: 2;\n  border-radius: 1rem;\n  background-color: var(--PRIMARY-COLOR);\n  color: white;\n  overflow: hidden;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.delete-img-tag:hover {\n  opacity: 0.75;\n}\n#mediaWindow .ant-select-selection {\n  transition: border-color, box-shadow 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);\n  will-change: border-color, box-shadow;\n}\n.iot-modal .ant-modal-body .ant-tabs-bar .ant-tabs-tab {\n  max-width: 192px;\n  white-space: normal;\n  word-break: break-word;\n}\n.iot-modal-form .ant-form-item-label {\n  line-height: 3em;\n  text-align: left;\n}\n.iot-modal-form .ant-form-item-label .ant-form-item-required {\n  max-width: 220px;\n  text-align: left;\n  white-space: normal;\n  word-break: break-word;\n}\n.search-container {\n  position: absolute;\n  top: 0;\n  z-index: 100;\n  height: 50px;\n  display: flex;\n  align-items: center;\n}\n.search-container .ant-input {\n  border: none;\n  box-shadow: none;\n  background-color: transparent;\n  font-size: 16px;\n  padding-left: 38px !important;\n  padding-right: 38px !important;\n}\n.search-container .ant-input:focus {\n  border: none;\n  box-shadow: none;\n}\n.search-container .icon-icondeletetext {\n  color: #8f9aaa;\n  cursor: pointer;\n}\n.content-row {\n  margin: 0 !important;\n  padding: 24px;\n  height: 100%;\n  overflow-y: auto;\n}\n.rtl {\n  direction: rtl;\n}\n.rtl.ant-modal .ant-modal-content .ant-modal-body {\n  text-align: initial;\n}\n.rtl .ant-btn > .anticon + span,\n.rtl .ant-btn > span + .anticon {\n  margin-right: 8px;\n  margin-left: 0;\n}\n.rtl .ant-pagination-prev {\n  margin-right: 0;\n}\n.rtl .ant-pagination-next {\n  margin-right: 8px;\n}\n.rtl .ant-pagination-prev,\n.rtl .ant-pagination-next {\n  transform: rotate(180deg);\n}\n.rtl .author {\n  transform-origin: right !important;\n}\n.rtl .search-container {\n  margin-right: 30px;\n}\n/*  */\n.help-wrapper h1,\n.help-wrapper h2,\n.help-wrapper h3,\n.help-wrapper h4,\n.help-wrapper h5,\n.help-wrapper h6 {\n  margin: 1rem 0;\n}\n.help-wrapper p {\n  line-height: 1.5rem;\n  font-size: 14px;\n}\n.sprite-tabs {\n  display: flex;\n  justify-content: center;\n  border-bottom: 1px solid #e8e8e8;\n}\n.sprite-tab-name {\n  cursor: pointer;\n  position: relative;\n  height: 50px;\n  font-size: 18px;\n  padding: 12px 3rem;\n}\n.sprite-tab-name.actived {\n  color: var(--PRIMARY-COLOR);\n}\n.sprite-tab-name.actived::after {\n  position: absolute;\n  content: '';\n  width: 100%;\n  left: 0;\n  bottom: 0;\n  height: 4px;\n  border-radius: 4px;\n  background: var(--PRIMARY-COLOR);\n}\n",""])},321:function(e,t,n){"use strict";var o=n(7),a=n(14),r=n(15),i=n(17),s=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};const c=n(38),l=10,d=!0,p=c.join(o.b.appRootPath,"langs");t.a=new class{getBuiltinManifest(){return s(this,void 0,void 0,(function*(){const e=c.join(p,"manifest.json");return(yield a.c.read(e)).data}))}getLocalManifest(){return s(this,void 0,void 0,(function*(){try{const e=c.join(o.b.langDirPath,"manifest.json");return(yield fetch(e).then(e=>e.json()))||{version:"v0.0.0"}}catch(e){return{version:"v0.0.0"}}}))}getRemoteManifest(){return s(this,void 0,void 0,(function*(){const e=r.a.formatAppVersion,t=`${o.b.domain.extservice[r.a.getInternational]}api/langInfo/mblock-pc/${e}/latest`;try{const e=yield fetch(t).then(e=>e.json());return 0===e.code?e.data:null}catch(e){return null}}))}updateLocalManifest(e){return s(this,void 0,void 0,(function*(){try{const t=c.join(o.b.langDirPath,"manifest.json");return yield a.c.write(t,JSON.stringify(e)),!0}catch(e){return!1}}))}checkAppUpdate(){return s(this,void 0,void 0,(function*(){return this.builtinManifest=yield this.getBuiltinManifest(),this.localManifest=yield this.getLocalManifest(),!this.localManifest||Object(a.a)(this.builtinManifest.version)>Object(a.a)(this.localManifest.version)}))}checkRemoteUpdate(){return s(this,void 0,void 0,(function*(){return this.localManifest=yield this.getLocalManifest(),this.remoteManifest=yield this.getRemoteManifest(),this.remoteManifest&&Object(a.a)(this.remoteManifest.version)>Object(a.a)(this.localManifest.version)}))}syncBuiltin(){return s(this,void 0,void 0,(function*(){if(yield this.checkAppUpdate())try{yield a.c.copy(c.join(p),c.join(o.b.langDirPath)),this.localManifest=this.builtinManifest,yield this.updateLocalManifest(this.builtinManifest)}catch(e){}}))}syncRemote(e,t,n){return s(this,void 0,void 0,(function*(){if(!Object(i.isOnline)())return t&&t(new Error("offline"));return!!(yield this.checkRemoteUpdate())&&(this.downloadId&&(yield this.abortDownloadLang()),this.downloadPackage(t=>e&&e(t)).then(()=>n&&n()).catch(e=>t&&t(e)),()=>this.abortDownloadLang())}))}downloadPackage(e){return new Promise((t,n)=>{const r=c.join(o.b.langDirPath,"temp","i18n.zip");this.downloadId=(new Date).getTime(),this.checkTimeout(n);try{a.c.downloadFile(this.remoteManifest.fileUrl,r,this.downloadId,(i,c)=>s(this,void 0,void 0,(function*(){if(i)return this.downloadFail(i,n);const{percent:s}=c;if(e&&e({percent:s}),this.timeoutIntervalId&&(this.checkTimeout(n),100===s)){if(!(yield Object(a.b)(r,this.remoteManifest.fileMd5)))return this.downloadFail("download intl file incomplete",n);const e=a.c.procFilePath([o.b.langDirPath,"temp","i18n"]);a.c.uncompress({filePath:r,extractPath:e,onError:e=>{this.downloadFail("intl uncompress error: "+e,n)},onFinish:e=>{this.processUncompress(e,e=>{e&&this.downloadFail(e,n),this.downloadComplete(),t(!0)})}})}})))}catch(e){this.downloadFail(e,n)}})}downloadFail(e,t){return s(this,void 0,void 0,(function*(){clearInterval(this.timeoutIntervalId),delete this.timeoutIntervalId,t&&t(e),this.downloadId=0}))}downloadComplete(){return s(this,void 0,void 0,(function*(){clearInterval(this.timeoutIntervalId),delete this.timeoutIntervalId,yield this.updateLocalManifest(this.remoteManifest),this.downloadId=0}))}abortDownloadLang(){return s(this,void 0,void 0,(function*(){clearInterval(this.timeoutIntervalId),delete this.timeoutIntervalId;const e=yield a.c.abortDownload(this.downloadId);return this.downloadId=0,e}))}processUncompress(e,t){return s(this,void 0,void 0,(function*(){const n=c.join(o.b.langDirPath,"i18n");try{return yield a.c.copy(e,n),t&&t(null),!0}catch(e){return t&&t(e),!1}}))}checkTimeout(e){if(!d)return;let t=1;clearInterval(this.timeoutIntervalId),this.timeoutIntervalId=setInterval(()=>{if(t>l)return clearInterval(this.timeoutIntervalId),delete this.timeoutIntervalId,e&&e("intl download check timeout"),void this.abortDownloadLang();t++},1e3)}}},332:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const o=/^https:.*\.(jpe?g|png)$/;let a=e=>e;(()=>{try{return 0===document.createElement("canvas").toDataURL("image/webp",.5).indexOf("data:image/webp")}catch(e){return!1}})()&&(a=(e,t="",n=!1)=>((n||o.test(e))&&(t&&(t=`/resize,w_${t}`),e=`${e}?x-oss-process=image${t}/format,webp`),e))},334:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r}));const o={uploading:0},a=()=>({type:"ASSETS_START_UPLOAD"}),r=()=>({type:"ASSETS_END_UPLOAD"});t.a=(e=o,t)=>{switch(t.type){case"ASSETS_START_UPLOAD":return Object.assign({},e,{uploading:Math.max(e.uploading+1,0)});case"ASSETS_END_UPLOAD":return Object.assign({},e,{uploading:Math.max(e.uploading-1,0)});default:return e}}},34:function(e,t,n){"use strict";var o=n(7),a=n(513),r=n.n(a),i=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};const s={v:"1",tid:"UA-111711661-1",cid:"",ul:"zh",an:"mblock.web",av:o.b.version||""},c=e=>{const t=new r.a("SHA-1","TEXT");return t.update(e),t.getHash("HEX")},l=function(e){return i(this,void 0,void 0,(function*(){if(""===s.cid)try{s.cid=yield new Promise(e=>{const t=window.MbApi;t&&t.machineId?t.machineId({original:!0}).then(t=>{e(c(t))}):e("")})}catch(e){s.cid=""}const t=[];Object.keys(e).forEach(n=>{const o=e[n];if(void 0!==o){const e=encodeURIComponent(n)+"="+encodeURIComponent(o);t.push(e)}});const n=function(e){const t=document.createElement("img");return t.width=1,t.height=1,t.src=e,t}("https://www.google-analytics.com/collect?"+t.join("&"));n.onload=n.onerror=function(){n.onload=null,n.onerror=null}}))},d=()=>{const{hostname:e,origin:t}=location,{characterSet:n,charset:o,title:a}=document,{width:r,height:i}=window.screen;return Object.assign(Object.assign({},s),{dh:e,dt:a,dl:t,de:n||o,sr:`${r}x${i}`})},p=(e,t={})=>{const{cate:n,label:o,value:a,type:r="event"}=t,i=Object.assign(Object.assign({},d()),{ea:e,ec:n,el:o,ev:a,t:r});l(i)};let u;u={trackingSwitchLanguage:e=>{s.ul=e,p("system",{cate:"switch_language",value:e})},trackingAction:(e,t,n)=>{const o={cate:Array.isArray(e)?e.join(" - "):e,label:Array.isArray(n)?n.join(" - "):n};p(Array.isArray(t)?t.join(" - "):t,o)},trackingScreenView:e=>{const t=Object.assign(Object.assign({},d()),{ea:"screen_view",cd:e,t:"screenview"});l(t)}};t.a=u},367:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));const o={loadingExtensions:[],downloadingExtMap:{}},a=e=>({type:"UPDATE_LOADING_EXTENSION_LIST",value:e});t.a=(e=o,t)=>{switch(t.type){case"UPDATE_LOADING_EXTENSION_LIST":return Object.assign({},e,{loadingExtensions:t.value});case"UPDATE_DOWNLOADING_EXTENSION_LIST":return Object.assign({},e,{downloadingExtMap:t.value});default:return e}}},41:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"j",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return f})),n.d(t,"g",(function(){return E})),n.d(t,"h",(function(){return g})),n.d(t,"i",(function(){return T}));var o=n(29),a=n(20),r=n(5),i=n(3),s=n(4),c=n.n(s);const l="DISCOVERY_DEVICE",d="SWITCH_CONNECT_MODE",p="CONNECT_DEVICE",u="DISCONNECT_DEVICE",h="CONNECT_STATUS",m="CONNECT_DEVICE_MBLOCK_INFO",f="CONNECT_CURRENT",E="RESET_CONNECT_DEVICE",g="SET_IS_SHOW_ALL",T="SET_IS_SOFT_DISCONNECT",b=(new Map).set(r.a.CONNECT_TYPE.SERIAL,5e3).set(r.a.CONNECT_TYPE.BLE,8e3).set(r.a.CONNECT_TYPE.HID,5e3).set(r.a.CONNECT_TYPE["24G"],5e3).set(r.a.CONNECT_TYPE.WIFI,5e3),S=(e,t,n,o)=>(o&&(e.payload.status=r.a.CONNECT_STATUS.CONNECT_SUCCESS,e.payload.connectionInfo=o,e.payload.connectedType=t,e.payload.device={...n,address:e.payload.connectionInfo.connectionId,rawPort:e.payload.connectionInfo.rawPort}),e);t.k={discovery:e=>{const t={type:l,payload:{scanStatus:r.a.SCAN_STATUS.SCANNING,type:e}};return o.default.isInstall()?async(n,a)=>{n(t);try{t.payload.scanStatus=r.a.SCAN_STATUS.SCAN_SUCCESS;let n={};n=e===r.a.CONNECT_TYPE.BLE?await((e,t)=>new Promise((n,a)=>{o.default.discovery(e,(e,o)=>{e?a(e):(c.a.isFunction(t)&&t(o),n(o))})}))(e):await(e=>new Promise((t,n)=>{o.default.discovery(e,(o,a)=>{o?n(o):e!==r.a.CONNECT_TYPE.BLE&&t(a)},(e,t)=>{})}))(e),t.payload.scanData={[e]:n}}catch(e){t.payload.scanStatus=r.a.SCAN_STATUS.SCAN_FAIL}t.payload.isShowAll=a().connect.isShowAll,e===a().connect.type&&n(t)}:(t.payload.status=r.a.CONNECT_STATUS.NOT_SERVICE,t.payload.device=!1,t)},switchMode:e=>t=>{t({type:d,payload:{type:e,current:"",scanStatus:r.a.SCAN_STATUS.SCAN_READY,scanData:{},isShowAll:!1}})},connect:(e,t,n,a,s)=>{const c={type:p,payload:{status:r.a.CONNECT_STATUS.CONNECTING}};return async(l,d)=>{l(c);const p=d().connect;p.connectionInfo&&p.connectionInfo.connectionId&&o.default.disconnect(p.type,p.connectionInfo.connectionId,(e,t)=>{});try{c.payload.status=r.a.CONNECT_STATUS.CONNECT_FAIL;const e=await((e,t)=>new Promise((n,a)=>{setTimeout(()=>{a("timeout")},b.get(e)),o.default.connect(e,t,(e,t)=>{e?a(e):n(t)})}))(t,n);e&&(c.payload.status=r.a.CONNECT_STATUS.CONNECT_SUCCESS,c.payload.connectionInfo=e)}catch(e){"timeout"===e&&(c.payload.status=r.a.CONNECT_STATUS.CONNECT_TIMEOUT)}S(c,t,e,void 0),c.payload.status===r.a.CONNECT_STATUS.CONNECT_SUCCESS?(c.payload.connectedType=t,c.payload.device={...e,address:c.payload.connectionInfo.connectionId,rawPort:c.payload.connectionInfo.rawPort},l(c),a&&a(),i.default.emit("DeviceConnected",c.payload.device,t)):(s&&s(),l(c))}},connectEnd:S,disconnect:(e,t,n,s=!1)=>(s||o.default.disconnect(e,t,(e,t)=>{}),a.a.remove(r.a.CONNECT_DEVICE_ID_KEY),i.default.emit("DeviceDisconnected",n,e,s),{type:u,payload:{status:r.a.CONNECT_STATUS.NOT_CONNECTED,device:n,isBroken:s}}),current:e=>({type:f,payload:{current:e}}),setDeviceInfo:e=>({type:m,payload:{device:e}}),resetConnectDevice:(e,t)=>({type:E,payload:{device:e,isRemove:t}}),Service:o.default,setIsShowAll:e=>({type:g,payload:{isShowAll:e}}),setSoftDisconnectMode:e=>({type:T,payload:{isSoftDisconnect:e}})}},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return h})),n.d(t,"g",(function(){return m})),n.d(t,"c",(function(){return E})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return T}));var o=n(240),a=n.n(o),r=n(3),i=n(7),s=n(20),c=n(17),l=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};const d=e=>fetch(`${e}?v${i.b.version}`),p={supportLangs:{en:{name:"English"},zh:{name:""},"zh-hant":{name:""},ar:{name:""},ca:{name:"Catal"},cs:{name:"esky"},de:{name:"Deutsch"},es:{name:"Espaol"},fa:{name:""},fr:{name:"Franais"},ko:{name:""},km:{name:""},id:{name:"Bahasa Indonesia"},it:{name:"Italiano"},nl:{name:"Nederlands"},ja:{name:""},"ja-jph":{name:""},pl:{name:"Polski"},hr:{name:"Hrvatski"},pt:{name:"Portugus"},ru:{name:""},fi:{name:"Suomi"},tr:{name:"Trke"},uk:{name:""},vi:{name:"Ting Vit"},tk:{name:"rkmene"}},localeData:{en:{name:"English",locale:a.a.en,messages:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n(624)),n(625)),n(626)),n(627)),n(628)),n(629)),n(630)),n(631)),n(632)),n(633)),n(634)),langKey:"en"},zh:{name:"",locale:a.a.zh,messages:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n(635)),n(636)),n(637)),n(638)),n(639)),n(640)),n(641)),n(642)),n(643)),n(644)),n(645)),langKey:"zh"}}},u=()=>l(void 0,void 0,void 0,(function*(){const e=`${i.b.langDirPath}manifest.json`;try{const t=yield d(e);if(t&&t.ok){const e=yield t.json();e&&e.version&&(p.supportLangs=e.supportLangs)}}catch(e){}return p.supportLangs})),h=()=>s.a.lang,m=e=>s.a.setLang(e),f=e=>{const t={};for(const n in e)if(0===n.indexOf("ext-i18n/")){const o=n.replace("ext-i18n/","");["cognitive","tm"].includes(o)?t[o]=Object.assign(Object.assign({},e[n]),e["ext-i18n/common/media"]):t[o]=e[n]}return t},E=()=>{const e=h();if(e)return e;return Object(c.getNavigatorLang)()},g=e=>-1!==["ar","ckb","fa","he"].indexOf(e),T=e=>l(void 0,void 0,void 0,(function*(){if(!e)return;"zhhant"===(e=e.toLowerCase())&&(e="zh-hant");const{supportLangs:t,localeData:n}=p;t[e]||(e="en");const o=n[e];if(o&&o.mscratchMsgs)return o;try{const r=yield(e=>{const t=`${i.b.langDirPath}i18n/${e}.json`;return d(t).then(e=>e.json())})(e);if(r){const i=Object.assign(o?o.messages:{},r["mblock5-i18n"]||p.localeData.en.messages),s=Object.assign(r["mscratch-i18n"],{extI18n:f(r)});n[e]={name:t[e].name,locale:a.a[e],messages:i,mscratchMsgs:s,langKey:e}}}catch(e){}return r.default.emit("LocaleDataUpdated",e,n[e]),n[e]}))},48:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var o=n(42),a=n(26);const r=o.a.localeData.en.messages,i=({messages:e,id:t,values:n,defaultMessage:a})=>{e||(e=(o.a.localeData[Object(o.d)()]||o.a.localeData.en).messages);let i=e[t]||a||r[t]||t;return n&&(i=i.format(...n)),i};t.a=Object(a.connect)(e=>({messages:e.intlr.messages}))(i)},49:function(e,t,n){"use strict";var o=n(18);const a=(e,t,n)=>{o.a.instance.logger&&o.a.instance.logger[e](t,n)};let r=new class{log(e,t=""){a("log",e,t)}info(e,t=""){a("info",e,t)}warn(e,t=""){a("info",e,t)}error(e,t=""){a("info",e,t)}trace(e,t=""){a("info",e,t)}debug(e,t=""){a("info",e,t)}};t.a=r},5:function(e,t,n){"use strict";var o={USER_ACCESS_TOKEN_KEY:"Token",USER_ACCESS_ACCESSTOKEN_KEY:"accesstoken",USER_ACCESS_UTOKEN_KEY:"utoken",USER_INFO_KEY:"User",CONNECT_DEVICE_KEY:"ConnectDevice",CONNECT_DEVICE_ID_KEY:"ConnectDeviceId",LAST_CONNECT_TYPE_KEY:"ConnectType",INTL_LANG_KEY:"IntlLang",FEEDBACK_CACHE_KEY:"Feedback",REMIND_UPDATE:"RemindUpdate",IGNORE_UPDATE_VERSIONS:"IgnoreUpdateVersions",LOADED_EXTENSIONS:"LoadedExtensions",INSTALLED_EXT:"InstalledExtensions",INTERNATIONAL_VERSION:"InternationalVersion",DEFAULT_DEVICE:"DefaultDevice",APP_VERSION:"AppVerion"};var a={CODEY:"codey",MICROBIT:"microbit",NEURON:"neuron",MCORE:"mcore",AURIGA:"auriga"};var r={FN_PROTOCOL:"http://www.makeblock.com/terms/",ZH_PROTOCOL:"http://www.makeblock.com/cn/agreement/"},i=n(86),s=n(92);t.a=Object.assign(Object.assign({},o),{DEVICE:a,PROTOCOL:r,REQUEST_STATUS:s.a,UPLOAD_STATUS:{READY:"ready",UPLOADED:"uploaded",DONE:"done",FAILED:"failed",PROCESSING:"processing",COMPILING:"compiling",COMPILE_FAILED:"compileFailed"},CONNECT_TYPE:i.b,CONNECT_STATUS:i.a,SCAN_STATUS:i.c,PROJECT_ACCEPT:["application/mblock","application/json","application/sb2","application/sb3"],PROJECT_SUFFIX:["mblock","json","sb2","sb3"],LOGIN_AVAILABLE_BLOCKS:["iot.ifttt_pub","iot.ifttt_recv","iot.iot_connect_network_new","iot.data_addtolist_cloudlist","iot.data_itemoflist_cloudlist","iot.data_lengthoflist_cloudlist","iot.iot_connect_network","iot.iot_if_connect_network","iot.iot_air","iot.iot_sun","iot.iot_weather","cognitive.beginSpeechToText","cognitive.speechToTextResult","cognitive.beginFaceDetection","cognitive.faceDetectionResult","cognitive.beginEmotionRecognition","cognitive.emotionValue","cognitive.emotionType","cognitive.beginImageToText","cognitive.beginHandwrittenToText","cognitive.imageToTextResult"],LOGIN_BLOCKS_BELONGTO_EXT:["cognitive","iot"],SYNC_CONNECT_STATE_TYPE:{ONREADY:0,PROJECT:1,ADD_DEVICE:2,REMOVE_DEVICE:3,CONNECTED:4,SERVER_OFFLINE:5,CONNECT_BROKEN:6},SENSOR_CALIBRATE_TYPE:{COLOR:"color",GYRO:"gyro"},SHOW_COMPILING_DEVICE:["mcore","auriga"],SPRITE_SUFFIX:["svg","png","jpg","sprite2","sprite3"],SPRITE_TYPE:{LIBS:"libs",USER_LIBS:"user_libs",COSTUMES:"costumes",USER_COSTUMES:"user_costumes",SOUNDS:"sounds",USER_SOUNDS:"user_sounds",BACKDROPS:"backdrops",USER_BACKDROPS:"user_backdrops",DEVICES:"devices"},SPRIET_ACCEPT:["image/jpeg","image/png","image/svg+xml","image/gif",".sprite2",".sprite3"],COSTUME_ACCEPT:["image/jpeg","image/png","image/svg+xml","image/gif"],SPRIET_SOUNDS_ACCEPT:["audio/mp3","audio/wav","audio/mpeg"],SPRITE_FILE_PREFIX:"U_",PROJECT_STATUS:{NORMAL:0,WILL_DOWNLOAD:1,WILL_UPLOAD_FILE:2,WILL_UPLOAD_RECORD:3,WILL_UPLOAD_ALL:4,UPLOADING:5,WILL_DELETE:6},PROJECT_TYPE:{EXAMPLE:"example",PRESET:"preset",LOCAL:"local",LIST:"list"},PROJECT_SAVE_STATUS:{DOING:"DOING",FAILURE:"FAILURE",SUCCESS:"SUCCESS"},PROJECT_SYNC_STATUS:{SYNCING:"syncing",SUCCESS:"success",FAIL:"fail",NONETWORK:"noNetWork"},LANG_DOWNLOAD_STATUS:{DOING:"DOING",FAILURE:"FAILURE",SUCCESS:"SUCCESS"},PROJECT_SAVE_TIMEOUT:6e4,SPRITE_SUPPORT_STATUS:{ALL:0,ONLY_ZH:1,ONLY_EN:2,NONE:3}})},504:function(e,t,n){"use strict";n(1149);var o=n(0),a=n.n(o),r=n(26),i=n(67),s=n(4);var c=()=>{const[e,t]=Object(o.useState)([window.outerWidth,window.outerHeight]);return Object(o.useEffect)(()=>{const e=Object(s.debounce)(()=>{t([window.outerWidth,window.outerHeight])},300,{trailing:!1});return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e};const l=new(n(40).EventEmitter);var d,p;window.GuideEmitter=l,function(e){e.START="GuideStart",e.SKIP="GuideSkip",e.PREVIEW="GuidePreview",e.FINISH="GuideFinish"}(d||(d={})),function(e){e.MOVE_TO_WORKSPACE="MoveBlockToWorkspace",e.CONNECT="ConnectBlock",e.CLICK_PARAM="ClickBlockParam",e.DELETE="DeleteBlock",e.CLICK_CATE="ClickCate"}(p||(p={}));const u=Object.values(p);var h,m,f;!function(e){e.TIPS="Tips",e.CLICK="ClickDom"}(h||(h={})),function(e){e.CREATED="created",e.DELETED="deleted",e.MOVE="move"}(m||(m={})),function(e){e.TOP_RIGHT="tr",e.TOP_CENTER="tc",e.TOP_LEFT="tl",e.BOTTOM_RIGHT="br",e.BOTTOM_CENTER="bc",e.BOTTOM_LEFT="bl",e.RIGHT_TOP="rt",e.RIGHT_CENTER="rc",e.RIGHT_BOTTOM="rb",e.LEFT_TOP="lt",e.LEFT_CENTER="lc",e.LEFT_BOTTOM="lb"}(f||(f={}));const E=(e,t)=>t>0?{transitionDuration:`${t}ms`,transitionProperty:e,transitionTimingFunction:"cubic-bezier(0.55, 0.06, 0.68, 0.19)"}:{};var g;!function(e){e.PREVIEW="GUIDE_PREVIEW",e.START_RECORD="GUIDE_START_RECORD",e.END_RECORD="GUIDE_END_RECORD"}(g||(g={}));var T=e=>{const{target:{left:t,top:n,width:s,height:l},type:d,content:p,action:u,hasSkip:m,hasPrevious:g,progress:T,duration:b,placement:S=f.BOTTOM_CENTER,next:O,previous:w,skip:I}=e,C=Object(o.useRef)(null),[v,R]=Object(o.useState)(""),[A,y]=Object(o.useState)(["auto","auto"]),[N,k]=Object(o.useState)([t,n,s,l]),[L,P]=c(),[D,M,x,U]=N,[_,j]=A,{messages:q}=Object(r.useSelector)(e=>e.intlr);Object(o.useEffect)(()=>{const e=C.current;if(e instanceof HTMLElement){const t=e.getBoundingClientRect(),n=F(t);k(n)}},[e,L,P]);const F=e=>{const{TOP_RIGHT:t,TOP_CENTER:n,TOP_LEFT:o,BOTTOM_RIGHT:a,BOTTOM_CENTER:r,BOTTOM_LEFT:i,RIGHT_TOP:s,RIGHT_CENTER:c,RIGHT_BOTTOM:l,LEFT_TOP:d,LEFT_CENTER:p,LEFT_BOTTOM:u}=f;let h=[0,0,0,0];switch(S){case a:h=B(e,"right","bottom");break;case r:h=B(e,"center","bottom");break;case i:h=B(e,"left","bottom");break;case t:h=B(e,"right","top");break;case n:h=B(e,"center","top");break;case o:h=B(e,"left","top");break;case s:h=G(e,"right","top");break;case c:h=G(e,"right","center");break;case l:h=G(e,"right","bottom");break;case d:h=G(e,"left","top");break;case p:h=G(e,"left","center");break;case u:h=G(e,"left","bottom")}return h},B=(e,o,a)=>{y(["auto","auto"]);let r=0,i=0;"right"===o?(r=t+s-e.width,i=t+.75*s-r-15,r<0&&(r=t,i=t+s/4-r-15)):"left"===o?(r=t,i=t+s/4-r-15,r+e.width>L&&(r=t+s-e.width,i=t+.75*s-r-15)):(r=t-(e.width-s)/2,r+e.width>L&&(r=t+s-e.width),i=t+s/2-r-15);let c=0,d=-14;return"top"===a?(c=n-e.height,d=e.height,c-8-14<0&&(y(["auto",e.height-58-8-14+c]),d=e.height-8-14+c,c=22),R("top")):(c=n+l,R("bottom")),[r,c,i,d]},G=(e,o,a)=>{y(["auto","auto"]);let r=0,i=0;"top"===a?(r=n,i=n+l/4-r-7):"bottom"===a?(r=n+l-e.height,i=n+.75*l-r-7):(r=n-(e.height-l)/2,i=n+l/2-r-7),r<0&&(r=n);let c=0,d=-14;return"left"===o?(c=t-e.width-14,d=e.width-7,R("left")):(c=t+s,d=-21,R("right")),[c,r,d,i]};return p?a.a.createElement("div",{ref:C,className:"guide-bubble",style:Object.assign({top:M,left:D},E("top, left",b)),"data-placement":v},a.a.createElement("svg",{className:"arrow-svg",viewBox:"0 0 30 14",style:Object.assign({left:x,top:U},E("left",0))},a.a.createElement("g",{transform:"translate(-260.000000, -80.000000)",fill:"#fff"},a.a.createElement("path",{d:"M290,94 L260,93.9995233 L270.573783,82.0892664 C272.990646,79.3610605 276.876004,79.3051067 279.353512,81.9193914 L279.513063,82.09462 L290,94 Z"}))),a.a.createElement("div",{style:{width:_,height:j,overflow:"auto"}},p),d===h.TIPS?a.a.createElement("div",{className:"bubble-footer"},a.a.createElement("div",{className:"skip"},m&&a.a.createElement("span",{onClick:()=>{I&&I()}},q["BUTTON.SKIP.TEXT"])),a.a.createElement("span",{className:"progress"},T),a.a.createElement("div",{className:"button"},g&&a.a.createElement(i.a,{className:"btn-previous",onClick:()=>{w&&w()}},q["BUTTON.PREVIOUS.TEXT"]),a.a.createElement(i.a,{className:"btn-next",onClick:()=>{O&&O()}},q[u||"BUTTON.NEXT.TEXT"]))):null):null};var b=e=>{const{target:{width:t,height:n,rx:r,ry:i,ox:s,oy:c},type:l}=e,d=t+2*s,p=n+2*c,[m,f]=Object(o.useState)({pointerEvents:"auto",height:p});return Object(o.useEffect)(()=>{l&&u.includes(l)||l===h.CLICK?f({pointerEvents:"none",height:p}):f({pointerEvents:"auto",height:p})},[e]),a.a.createElement("svg",{className:"placeholder",style:m},a.a.createElement("defs",null,a.a.createElement("mask",{id:"guideMask"},a.a.createElement("rect",{x:"0",y:"0",width:d,height:p,stroke:"none",fill:"#fff"}),a.a.createElement("rect",{width:d,height:p,rx:r,ry:i,x:"0",y:"0",fill:"#000"}))),a.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",stroke:"none",mask:"url(#guideMask)",fill:"rgba(0, 0, 0, 0.6)"}))};var S=e=>{const{target:t}=e,{top:n,left:o,width:r,height:i,ox:s,oy:c}=t,l=Math.max(n||0,0),d=Math.max(o||0,0);return a.a.createElement("table",{className:"guide-grid-mask"},a.a.createElement("tbody",null,l?a.a.createElement("tr",null,a.a.createElement("td",{colSpan:d?3:2,style:{height:n-c}},"")):null,a.a.createElement("tr",null,d?a.a.createElement("td",{style:{width:o-s}},""):null,a.a.createElement("td",{className:"cutout-cell",style:{width:r+2*s||0,height:i+2*c||0}},a.a.createElement(b,Object.assign({},e))),a.a.createElement("td",null,"")),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:d?3:2},""))))},O=n(20),w=n(15);class I{constructor(){this._mscratch=null,this._isFinish=!1,this._onStart=()=>{},this._onEnd=()=>{}}set data(e){this._data=e}set mscratch(e){e&&(this._mscratch=e,this._init())}set onStart(e){this._onStart=e}set onEnd(e){this._onEnd=e}get isFinish(){return this._isFinish}dispose(){Array.isArray(this._listeners)&&(this._listeners.forEach(e=>{"function"==typeof e&&e()}),this._listeners=void 0)}_blockSetup(e){e.contextMenu=!1;const t=()=>{e.contextMenu=!0,e.svgGroup_.removeEventListener("mouseup",t),e.svgGroup_.removeEventListener("mouseleave",n),setTimeout(()=>{this._onEnd(this.isFinish)},0)},n=t=>{2!==t.button&&2!==t.buttons||(e.svgGroup_.removeEventListener("mouseleave",n),this._onEnd(this.isFinish))};e.svgGroup_.addEventListener("mouseup",t),e.svgGroup_.addEventListener("mouseleave",n)}}const C={[p.MOVE_TO_WORKSPACE]:class extends I{_init(){this._mscratch&&(Array.isArray(this._listeners)||(this._listeners=[]),this._listeners.push(this._mscratch.scratchEvents.onBlockSelected(e=>{this._blockSetup(e),this._onStart()})),this._listeners.push(this._mscratch.scratchEvents.onBlockDragEnd((...e)=>{const{status:t}=e[1];t===m.CREATED&&(this._isFinish=!0)})))}},[p.CONNECT]:class extends I{_init(){this._mscratch&&(Array.isArray(this._listeners)||(this._listeners=[]),this._listeners.push(this._mscratch.scratchEvents.onBlockSelected(e=>{this._blockSetup(e),this._onStart()})),this._listeners.push(this._mscratch.scratchEvents.onBlockConnected((...e)=>{var t,n,o;const[a,r]=e;(null===(o=null===(n=null===(t=this._data)||void 0===t?void 0:t.source)||void 0===n?void 0:n.blockIds)||void 0===o?void 0:o.toString())===[a.id,r.id].toString()&&(this._isFinish=!0)})))}},[p.CLICK_PARAM]:class extends I{_init(){this._mscratch&&(Array.isArray(this._listeners)||(this._listeners=[]),this._listeners.push(this._mscratch.scratchEvents.onBlockSelected(e=>{this._blockSetup(e),this._onStart()})),this._listeners.push(this._mscratch.scratchEvents.onFieldClicked((...e)=>{var t;const[n,o]=e,a=n.sourceBlock_;(null===(t=this._data)||void 0===t?void 0:t.source.blockIds)===a.id&&(this._isFinish=!0,o.movable_=!0)})))}},[p.DELETE]:class extends I{_init(){this._mscratch&&(Array.isArray(this._listeners)||(this._listeners=[]),this._listeners.push(this._mscratch.scratchEvents.onBlockSelected(e=>{e.fieldEditable=!1,this._blockSetup(e),this._onStart()})),this._listeners.push(this._mscratch.scratchEvents.onBlockDragEnd((...e)=>{var t;const[n,{status:o}]=e;o===m.DELETED&&(null===(t=this._data)||void 0===t?void 0:t.source.blockIds)===n.id&&(n.fieldEditable=!0,this._isFinish=!0)})))}},[p.CLICK_CATE]:class extends I{constructor(){super(...arguments),this._cate={}}_init(){this._mscratch&&(Array.isArray(this._listeners)||(this._listeners=[]),this._listeners.push(this._mscratch.scratchEvents.onCategorySelected((...e)=>{var t,n;const[o]=e;this._cate=o,(null===(n=null===(t=this._data)||void 0===t?void 0:t.source)||void 0===n?void 0:n.blockIds)===this._cate.id_&&(this._isFinish=!0),this._onEnd(this.isFinish)})))}get source(){var e;return{start:`.scratchCategoryMenuRow.${null===(e=this._cate)||void 0===e?void 0:e.id_}`}}}};class v{constructor(e,t){const n=e.source.type;n in C&&(this._checker=new C[n],this._checker.data=e,this._checker.mscratch=t.mscratch,this._checker.onStart=t.onStart,this._checker.onEnd=t.onEnd)}dispose(){this._checker&&"function"==typeof this._checker.dispose&&this._checker.dispose()}}var R=e=>{const t=c(),[n,a]=Object(o.useState)(0),[r,i]=Object(o.useState)(),[s,m]=Object(o.useState)(),[f,E]=Object(o.useState)(void 0!==s),[g,T]=Object(o.useState)(),[b,S]=Object(o.useState)([0,0]),I=r&&r[n],C=(e,t)=>{let n=document.querySelector(e),o=!1;if(!n&&g&&(n=g.querySelector(e),o=!0),n){n.scrollIntoView();let{rx:e,ry:a}=(e=>{let t=0,n=0,o=0;const a=getComputedStyle(e),{borderRadius:r,paddingLeft:i,paddingTop:s}=a;try{t=parseInt(r.replace("px","")),n=parseInt(i.replace("px","")),o=parseInt(s.replace("px",""))}catch(e){}return o=n>0&&o>0?n:n=0,{rx:t-n,ry:t-o}})(n);const{top:r,left:i,width:s,height:c}=n.getBoundingClientRect(),[l,d]=o?b:[0,0];let u=0,h=0;return t!==p.CONNECT&&t!==p.MOVE_TO_WORKSPACE&&t!==p.DELETE||(u=h=e=a=6),{top:Math.round(r+l),left:Math.round(i+d),width:Math.round(s),height:Math.round(c),rx:Math.round(e),ry:Math.round(a),ox:u,oy:h,ele:n}}return null},R=(e,t,n)=>{var o;if("string"==typeof t){const a=C(t,n);if(a){const{left:t,width:n,top:r,height:i}=a;return(null===(o=I)||void 0===o?void 0:o.source.type)===p.DELETE?{x:t+n/2-e.left,y:0}:{x:t-e.left,y:r+i-e.top-4}}return{x:0,y:0}}return t},A=()=>{if(I){(()=>{if(!g){const e=document.querySelector("#programIframe");if(e instanceof HTMLIFrameElement){const{top:t,left:n}=e.getBoundingClientRect(),{contentDocument:o}=e;o&&T(o),S([t,n])}}})();const{content:e,placement:t,action:o,hasSkip:a,hasPrevious:r,progress:i,source:{start:s,type:c,end:l}}=I,d=C(s,c);if(d){const s={target:Object.assign(Object.assign({},d),{end:R(d,l,c)}),duration:n>0?300:0,placement:t,content:e,action:o,hasSkip:a,hasPrevious:r,progress:i,type:c,next:N,skip:k,previous:y,finish:L};m(s)}}},y=()=>{a(n-1)},N=()=>{a(n+1)},k=()=>{L()},L=()=>{m(void 0),O.a.setAppVersion(w.a.formatAppVersion)};return Object(o.useEffect)(()=>{A()},[I,t,g]),Object(o.useEffect)(()=>{if(I&&s){const{source:{type:t}}=I;if(E(!0),t!==h.CLICK){const t=new v(I,{mscratch:e,onStart(){E(!1)},onEnd(e){var t;e?N():I&&(u.includes(null===(t=I.source)||void 0===t?void 0:t.type)?A():E(!0))}});return()=>{t.dispose()}}{const{target:{ele:e}}=s;if(e){const t=()=>{N()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}}return()=>{}},[s]),Object(o.useEffect)(()=>{r&&n===r.length&&(m(void 0),O.a.setAppVersion(w.a.formatAppVersion))},[n]),Object(o.useEffect)(()=>{const e={[d.START]:e=>{e&&(a(0),E(!1),i(Array.isArray(e)?e:[e]))},[d.FINISH]:()=>{N()},[d.SKIP]:e=>{e=Array.isArray(e)?e:[e],a(e.length-1),E(!1),i(e)},[d.PREVIEW]:e=>{e?(a(0),E(!1),i(Array.isArray(e)?e:[e])):i([])}},t=[];for(const n in e){const o=e[n];l.on(n,o),t.push(()=>{l.off(n,o)})}return()=>{t.forEach(e=>{"function"==typeof e&&e()})}},[]),{visible:f,data:s}};const A=e=>{const{mscratch:t}=e,{visible:n,data:o}=R(t),r=["guide-container"];return n&&r.push("guide-visible"),a.a.createElement(a.a.Fragment,null,a.a.createElement("section",{className:r.join(" ")},o?a.a.createElement(a.a.Fragment,null,a.a.createElement(T,Object.assign({},o)),a.a.createElement(S,Object.assign({},o))):null))};A.Emitter=l,A.GuideEvent=d;var y=A;t.a=y},51:function(e,t,n){"use strict";n.r(t),n.d(t,"defaultLangKey",(function(){return i})),n.d(t,"defaultMessages",(function(){return s})),n.d(t,"updateLang",(function(){return l})),n.d(t,"change",(function(){return d})),n.d(t,"updateSupportedLangNames",(function(){return p})),n.d(t,"updateDownloadStatus",(function(){return u})),n.d(t,"updateDownloadPercent",(function(){return h})),n.d(t,"updateLatestStatus",(function(){return m})),n.d(t,"updateReadyStatus",(function(){return f}));var o=n(3),a=n(5),r=n(42);const i=Object(r.c)(),s=(r.a.localeData[i]||r.a.localeData.en).messages,c={isLatest:!1,downloadStatus:a.a.LANG_DOWNLOAD_STATUS.DOING,downloadPercent:0,isReady:!1,supportedLangs:{en:{name:"English"},zh:{name:""}},langKey:i,messages:s,rtl:Object(r.e)(i)},l=(e,t)=>({type:"SWITCH_LANGUAGE",payload:{langKey:e,messages:t,rtl:Object(r.e)(e)}}),d=e=>t=>{Object(r.f)(e).then(e=>{if(e)return o.default.emit("SwitchLanguage",e.langKey),Object(r.g)(e.langKey),t(l(e.langKey,e.messages))})},p=()=>e=>{Object(r.b)().then(t=>{if(t)return e({type:"UPDATE_SUPPORTED_LANG_NAMES",payload:{supportedLangs:t}})})},u=e=>({type:"UPDATE_DOWNLOAD_STATUS",payload:{downloadStatus:e}}),h=e=>({type:"UPDATE_DOWNLOAD_PERCENT",payload:{downloadPercent:e}}),m=e=>({type:"UPDATE_LATEST_STATUS",payload:{isLatest:e}}),f=e=>({type:"UPDATE_READY_STATUS",payload:{isReady:e}});t.default={reducer:(e=c,t)=>{switch(t.type){case"SWITCH_LANGUAGE":case"UPDATE_SUPPORTED_LANG_NAMES":case"UPDATE_DOWNLOAD_STATUS":case"UPDATE_DOWNLOAD_PERCENT":case"UPDATE_LATEST_STATUS":case"UPDATE_READY_STATUS":return Object.assign({},e,t.payload);default:return e}},intlInitialState:c}},510:function(e,t,n){"use strict";(function(e){var o=n(29),a=n(22),r=n(3),i=n(49),s=n(511),c=n(21),l=n(41);const d=n(264);let p;const u=async function(e,t){const n=c.a.getState().connect.type;p=c.a.getState().connect.current;const r=await m(o.default,n);if("reset_port"==r[0]){const s={comName:r[1].comName,baudRate:1200,deviceId:Object(a.b)().deviceId,name:Object(a.b)().name,id:Object(a.b)().id};window.currentPort.close(async r=>{r&&i.a.debug("",r),await new d(e=>{setTimeout(e,500)});let c=!1;o.default.connect(n,s,(r,i)=>{if(c)return;if(c=!0,r)return void t(r,null);(e=i.rawPort).on("error",e=>{});const s=d.promisify(t=>{t(null,e)}),l=d.promisify(e.set.bind(e));d.join(s().then((function(){return l({rts:!0,dtr:!0})})).delay(250).then((function(){return l({rts:!1,dtr:!1})})).delay(50).then((function(){o.default.disconnect(i.type,i.connectionId)})).then((function(){return new d((e,t)=>{let r=0;const i=setInterval(()=>{if(r++,r>50)return clearInterval(i),void t();o.default.discovery(n,async(t,o)=>{if(t)return;let r=[];Object(a.b)().config.options.connect[n]&&Object(a.b)().config.options.connect[n].productId&&(r=Object(a.b)().config.options.connect[n].productId.split(",").map(e=>parseInt(e,16)));const s=o.filter((function(e){return r[1]===parseInt(e.productId,16)}));if(s.length){clearInterval(i);const t={comName:s[0].comName,baudRate:parseInt(Object(a.b)().config.options.connect[n].baudRate),deviceId:Object(a.a)().deviceId,name:Object(a.a)().name,id:Object(a.b)().id};e(t)}})},100)})})).then(async e=>{try{await h(n,e),t(null)}catch(e){t(e)}}).catch(e=>{t(e,null)}))})},!0)}else if("bootload_port"==r[0]){const e={comName:r[1].comName,baudRate:parseInt(Object(a.b)().config.options.connect[n].baudRate),deviceId:Object(a.b)().deviceId,name:Object(a.b)().name,id:Object(a.b)().id};window.currentPort.close(async o=>{o&&i.a.debug("",o),await new d(e=>{setTimeout(e,200)});try{await h(n,e),t(null)}catch(o){t(o)}},!0)}else t(new Error("no serial port"))},h=(e,t)=>new d((n,a)=>{o.default.connect(e,t,(o,i)=>{if(o)return void a(o);const s={type:l.b,payload:{status:""}};l.k.connectEnd(s,e,{deviceId:t.deviceId,name:t.name},i),c.a.dispatch(s),r.default.emit("DeviceConnected",Object.assign({},t,i),e),n()})}),m=(e,t)=>{let n=[];return Object(a.b)().config.options.connect[t]&&(n=Object(a.b)().config.options.connect[t].productId.split(",").map(e=>parseInt(e,16))),new d(o=>{e.discovery(t,(e,t)=>{if(!e){for(let e=0;e<t.length;e++){if(n[0]==parseInt(t[e].productId,16))return void o(["reset_port",t[e]]);if(n[1]==parseInt(t[e].productId,16))return void o(["bootload_port",t[e]])}o(["none_port"])}})})};t.a=function(t,n,o,a){u(t,r=>{if(r)return void a(r,null);let c,l;t=window.currentPort;d.promisify(t.set.bind(t));let p=function(e,t,n,a){s.a.init(e,t,(function(e,t){if(e)throw e;t.erase((function(){t.program(n.toString(),o,(function(){t.verify((function(e){if(e)throw e;a()}))}))}))}))};p=d.promisify(p),t?(c=d.promisify(e=>{e(null,t)}),l=()=>{t.close(e=>{},!0)}):i.a.error("serial port not set"),setTimeout(()=>{d.join(n,c(),(function(e){return e})).then((function(n){return p(t,{signature:e.from([67,65,84,69,82,73,78]).toString(),debug:!1},n)})).then(()=>{l(),a(null,!0)}).catch(e=>{e&&(e.message.indexOf("3020")>-1?i.a.info("board is not match"):e.message.indexOf("timeout")>-1&&i.a.info("board firmware: timeout")),l(),a(e,null)})},600)})}}).call(this,n(24).Buffer)},511:function(e,t,n){"use strict";(function(e){var o=n(217),a=n.n(o),r={},i=function(e){return(e+"").charCodeAt(0)};let s=0;r.Flasher=function(e,t){var n=this;this.options=t||{},this.sp=e,this.signature=this.options.signature||"LUFACDC",this.options.debug&&this.sp.on("data",(function(e){for(var t=0;t<e.length;t++){var n=e.toString().substring(t,t+1);(n.charCodeAt(0)<32||n.charCodeAt(0)>126)&&(n=".")}})),this.c=function(e,t,o){return n.cmds.push({value:e,callback:function(e){t&&t(e)},expectedResponseLength:o}),this},this.flashChunkSize=0,this.bytes=[],this.cmds=[]},r.Flasher.prototype={run:function(t){var n=this;setTimeout((function(){if(!n.running){var o=n.cmds.shift();if(o){s=setTimeout((function(){clearTimeout(s),n.sp.emit("error","time out")}),2e3),n.running=!0,n.options.debug;var a=new e(0),r=function(i){clearTimeout(s),i&&(a=e.concat([a,i])),(void 0===o.expectedResponseLength||o.expectedResponseLength<=a.length)&&(n.sp.removeListener("data",r),n.running=!1,o.callback(a),setTimeout((function(){n.cmds.length>0?n.run(t):t&&t()}),0))};n.sp.on("data",r),n.sp.write(o.value),n.progressHandle&&n.progressHandle(Math.round((n.progressTotalLength-n.cmds.length)/n.progressTotalLength*100))}}}),0)},prepare:function(e){var t=this;this.c("S",(function(n){n.toString()!==t.signature&&e(new Error("Invalid device signature; expecting: "+t.signature+" received: "+n.toString()))})).c("V").c("v").c("p").c("a").c("b",(function(n){"Y"!=(n.toString()||"X")[0]&&e(new Error("Buffered memory access not supported.")),t.flashChunkSize=n.readUInt16BE(1)})).c("t").c("TD").c("P").c("s"),this.run((function(){e(null,t)}))},erase:function(e){e&&e()},program:function(e,t,n){var o,r=this,s=[];this.totalBytes=0,this.c([i("A"),0,0],(function(){r.progressHandle=t,o=a.a.parse(e),r.totalBytes=o.data.length,Array.prototype.push.apply(s,o.data),r.allBytes=s,r.options.debug,r.chunksSent=[];for(var n=0;n<s.length;n+=r.flashChunkSize){var c=Array.prototype.slice.call(o.data.slice(n,n+r.flashChunkSize));r.chunksSent.push(c),r.c([i("B"),c.length>>8&255,255&c.length,i("F")].concat(c))}r.progressTotalLength=r.cmds.length})),this.run((function(){r.progressHandle=null,n&&n()}))},verify:function(e){this.c("L").c("E"),this.run((function(){e()}))}},r.init=function(e,t,n){"function"!=typeof t||n||(n=t,t={}),new r.Flasher(e,t).prepare(n)},t.a=r}).call(this,n(24).Buffer)},52:function(e,t,n){"use strict";var o=n(32);t.a=o.a.createFromIconfontCN({})},522:function(e,t){},527:function(e,t,n){"use strict";(function(t,o){const a=n(40).EventEmitter,r=n(159),i=[7,8],s=[1,2],c=["none","even","mark","odd","space"],l=["RTSCTS"],d=window.chrome,p={baudrate:9600,parity:"none",rtscts:!1,databits:8,stopbits:1,buffersize:256};function u(e,n,o,r,...u){let h;if(a.call(this),"function"!=typeof(r=u.pop()||r)&&(r=e=>{e&&this.emit("error",e)}),o=null==o||o,(n="function"!=typeof n&&n||{}).baudRate=n.baudRate||n.baudrate||p.baudrate,n.dataBits=n.dataBits||n.databits||p.databits,-1===i.indexOf(n.dataBits))return h=new Error('Invalid "databits": '+n.dataBits),void r(h);if(n.stopBits=n.stopBits||n.stopbits||p.stopbits,-1===s.indexOf(n.stopBits))return h=new Error('Invalid "stopbits": '+n.stopbits),void r(h);if(n.parity=n.parity||p.parity,-1===c.indexOf(n.parity))return h=new Error('Invalid "parity": '+n.parity),void r(h);if(!e)return h=new Error("Invalid port specified: "+e),void r(h);if(n.rtscts=p.rtscts,n.flowControl||n.flowcontrol){const e=n.flowControl||n.flowcontrol;if("boolean"==typeof e)n.rtscts=!0;else{if(!e.every((function(e){const t=e.toUpperCase(),o=l.indexOf(t);if(o<0){const e=new Error('Invalid "flowControl": '+t+". Valid options: "+l.join(", "));return r(e),!1}switch(o){case 0:n.rtscts=!0}return!0})))return}}if(n.bufferSize=n.bufferSize||n.buffersize||p.buffersize,n.serial=n.serial||void 0!==d&&d.serial,!n.serial)throw new Error("No access to serial ports. Try loading as a Chrome Application.");this.options=function(e){switch(e.dataBits){case 7:e.dataBits="seven";break;case 8:e.dataBits="eight"}switch(e.stopBits){case 1:e.stopBits="one";break;case 2:e.stopBits="two"}switch(e.parity){case"none":e.parity="no"}return e}(n),this.options.serial.onReceiveError.addListener(e=>{switch(e.error){case"disconnected":case"device_lost":case"system_error":h=new Error("Disconnected"),this.options.disconnectedCallback&&this.options.disconnectedCallback(h),this.emit("disconnect",h,this.isOpen())}}),this.path=e,o&&t.nextTick((function(){this.open(r)}))}r.inherits(u,a),u.prototype.connectionId=-1,u.prototype.open=function(e){const t={bitrate:parseInt(this.options.baudRate,10),dataBits:this.options.dataBits,parityBit:this.options.parity,stopBits:this.options.stopBits,ctsFlowControl:this.options.rtscts};return this.options.serial.connect(this.path,t,this.proxy("onOpen",e)),this},u.prototype.onOpen=function(e,t){d.runtime.lastError?"function"==typeof e?e(d.runtime.lastError):this.emit("error",d.runtime.lastError):(this.connectionId=t.connectionId,-1!==this.connectionId?(this.emit("open",t),this._reader=this.proxy("onRead"),this.options.serial.onReceive.addListener(this._reader),"function"==typeof e&&e(d.runtime.lastError,t)):this.emit("error",new Error("Could not open port.")))},u.prototype.onRead=function(e){if(e&&this.connectionId===e.connectionId)if(this.options.dataCallback)this.options.dataCallback(e.data);else{const t={type:"Buffer",data:e.data};this.emit("data",t)}},u.prototype.write=function(e,t,n){if(this.connectionId<0){const e=new Error("Serialport not open.");"function"==typeof n?n(e):this.emit("error",e)}else this.options.serial.send(this.connectionId,e,(function(e){"function"==typeof n&&n(d.runtime.lastError,e)}))},u.prototype.close=function(e,t){if(this.connectionId<0){const t=new Error("Serialport not open.");"function"==typeof e?e(t):this.emit("error",t)}else this.options.serial.disconnect(this.connectionId,this.proxy("onClose",e)),t&&(this.connectionId=-1)},u.prototype.onClose=function(e,t){this.connectionId=-1,this.emit("close"),this.removeAllListeners(),this._reader&&(this.options.serial.onReceive.removeListener(this._reader),this._reader=null),"function"==typeof e&&e(d.runtime.lastError,t)},u.prototype.flush=function(e){if(this.connectionId<0){const t=new Error("Serialport not open.");"function"==typeof e?e(t):this.emit("error",t)}else this.options.serial.flush(this.connectionId,t=>{d.runtime.lastError?"function"==typeof e?e(d.runtime.lastError,t):this.emit("error",d.runtime.lastError):"function"==typeof e&&e(null,t)})},u.prototype.drain=function(e){if(this.connectionId<0){const t=new Error("Serialport not open.");"function"==typeof e?e(t):this.emit("error",t)}else"function"==typeof e&&e()},u.prototype.proxy=function(...e){const t=[];for(let n=0;n<e.length;n++)t[n]=e[n];const n=t.splice(0,1)[0];return(...e)=>{const o=[];for(let t=0;t<e.length;t++)o[t]=e[t];const a=t.concat(o);this[n].apply(this,a)}},u.prototype.set=function(e,t){this.options.serial.setControlSignals(this.connectionId,e,(function(e){"function"==typeof t&&t(d.runtime.lastError,e)}))},u.prototype.isOpen=function(){return this.connectionId>-1},e.exports={SerialPort:u,list:function(e){void 0!==d&&d.serial?d.serial.getDevices((function(t){const n=new Array(t.length);for(let e=0;e<t.length;e++)n[e]={comName:t[e].path,manufacturer:t[e].displayName,serialNumber:"",pnpId:"",locationId:"",vendorId:"0x"+(t[e].vendorId||0).toString(16),productId:"0x"+(t[e].productId||0).toString(16)};"function"==typeof e&&e(d.runtime.lastError,n)})):"function"==typeof e&&e(new Error("No access to serial ports. Try loading as a Chrome Application."),null)},buffer2ArrayBuffer:function(e){const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=e[t];return t},used:[]}}).call(this,n(43),n(24).Buffer)},528:function(e,t,n){e.exports=n.p+"static/resource/2814e3674c4cd311abe12942a140cd7b.svg"},529:function(e,t,n){e.exports=n.p+"static/resource/ff08deaf5d4353d9d51e75bd4d06f5f7.svg"},532:function(e,t,n){e.exports=n.p+"static/resource/6d16ddef7882db55d5e6c5c968151ead.svg"},533:function(e,t,n){e.exports=n.p+"static/resource/201f284152a83402814b9209e62566a0.svg"},534:function(e,t,n){"use strict";n.r(t),n.d(t,"UploadCmp",(function(){return v}));var o=n(4),a=n.n(o),r=n(0),i=n.n(r),s=n(26),c=n(63),l=n(1163),d=n(32),p=n(548),u=n(67),h=n(5),m=n(3),f=n(13),E=n(14),g=n(79),T=n(22),b=n(18),S=n(99),O=n(52);n(1147);function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{UPLOAD_STATUS:I}=h.a;class C extends i.a.Component{constructor(e){super(e),w(this,"getEditingTarget",()=>{try{const e=Object(T.b)();this.upload=e.config.options.upload}catch(e){}}),w(this,"doUploadCode",(e=!1)=>{e?b.a.instance.uploadRetry():this.props.uploadCode(),this.isRetry=e}),this.state={logs:[],prettyLogs:[]},this.isRetry=!1,this.upload=null,this.getEditingTarget(),this.initListeners()}componentDidMount(){a.a.isEmpty(this.props.upload)||this.doUploadCode()}componentWillUnmount(){for(const e in this.listeners)m.default.removeListener(e,this.listeners[e]);this.props.onReady()}initListeners(){this.listeners={CompilerLog:e=>{const{logs:t}=this.state;t.push(e),this.setState({logs:t},()=>{this.logContainer.scrollTop=this.logContainer.scrollHeight})},ConnectBroken:()=>{this.broken=!0},UploadCodeProgress:(e,t)=>{this.props.uploadCodeProgress(e,t)},UploadedCode:()=>{const{intlr:e}=this.props;a.a.delay(()=>{c.a.success(e.messages["UPLOAD.MESSAGE.SUCCESS"]),m.default.emit("UploadCodeSuccess",this.isRetry),f.a.replace("/")},600)},UploadCodeFail:()=>{const{intlr:e}=this.props;this.broken||(this.props.uploadCodeFail(),c.a.error(e.messages["UPLOAD.MESSAGE.FAIL"]),m.default.emit("UploadCodeFailed",this.isRetry))},CompileFailed:()=>{const{intlr:e}=this.props;this.props.uploadCodeFail(),c.a.error(e.messages["UPLOAD.COMPLIE.FAILED"])}};for(const e in this.listeners)m.default.on(e,this.listeners[e])}status(){const{progress_status:e}=this.props.upload;return e===I.UPLOADED?"success":"active"}handleCancel(){f.a.replace("/")}render(){const{logs:e}=this.state,{upload:t,intlr:n}=this.props;if(a.a.isEmpty(t))return this.handleCancel(),null;const{progress_percent:o,progress_status:r}=t,s=r===I.COMPILING,c=r===I.FAILED,h=this.upload&&this.upload.tips&&this.upload.tips.fail||[],m=this.upload&&this.upload.helpLink||"";return i.a.createElement(l.a,{visible:!0,width:400,title:n.messages[`UPLOAD.${s?"COMPLIE":"CODE"}.TITLE`],maskClosable:!1,keyboard:!1,closable:r!==I.PROCESSING&&r!==I.COMPILING,onCancel:this.handleCancel.bind(this),footer:null},s?i.a.createElement("p",{style:{textAlign:"center"}},i.a.createElement(d.a,{style:{fontSize:"2rem"},type:"loading"})):i.a.createElement("div",{className:"flex-row progress-inner"},i.a.createElement(p.a,{percent:o,status:this.status(),showInfo:!c}),c&&i.a.createElement(O.a,{type:"icon-wangluoyichangchengseV",className:"icon-wangluoyichangchengseV fail-icon"}))," ",c&&i.a.createElement("ul",{className:"helpTip fail"},h.map((e,t)=>i.a.createElement("li",{key:t},Object(S.a)(e)))," ",m&&i.a.createElement("li",null,n.messages["CONNECT.PROBLEM.TIP"],i.a.createElement("a",{href:m,rel:"nofollow me noopener noreferrer",target:"_blank",onClick:e=>E.c.openLink(e,m)},n.messages["CONNECT.HELPLINK.TEXT"])))," ",a.a.isEmpty(e)?null:i.a.createElement("section",{className:"compile-log",ref:e=>this.logContainer=e},e.map((e,t)=>{const n=["error","fail"];let o="log";for(const t of n)if(e.toLowerCase().includes(t)){o="log error";break}return i.a.createElement("p",{className:o,key:t},e)}))," ",c?i.a.createElement("div",{style:{textAlign:"center",marginBottom:10}},i.a.createElement(u.a,{type:"primary",ghost:!0,onClick:()=>this.handleCancel()},n.messages["BUTTON.CANCEL.TEXT"]),i.a.createElement(u.a,{type:"primary",style:{marginLeft:"8px"},onClick:()=>this.doUploadCode(!0)},n.messages["BUTTON.RETRY.TEXT"])):null)}}const v=C;t.default=Object(s.connect)(e=>({intlr:e.intlr,upload:e.upload}),e=>({onReady:()=>e(g.e.uploadCodePrepare()),uploadCodeFail:()=>e(g.e.uploadCodeFail()),uploadCode:(t,n)=>e(g.e.uploadCode(t,n)),uploadCodeProgress:(t,n)=>e(g.e.uploadCodeProgress(t,n))}))(C)},535:function(e,t,n){e.exports=n.p+"static/resource/d2fd3bb5fd488799dc0a250976dbdc87.png"},537:function(e,t,n){"use strict";n(4);var o=n(141),a=n(231);t.a={setEnv:e=>({type:o.b,payload:{env:e}}),setIsArmOS:()=>e=>{a.a.getInfo("os",{methods:["cpus"]},t=>{let n=!1;t.some(e=>-1!==e.model.toLowerCase().indexOf("snapdragon"))&&(n=!0),e({type:o.c,payload:{isArmOS:n}})})}}},551:function(e,t,n){n(552),e.exports=n(1156)},552:function(e,t,n){var o=n(248);"string"==typeof o&&(o=[[e.i,o,""]]);var a={transform:void 0},r=n(88)(o,a);o.locals&&(e.exports=o.locals),o.locals||e.hot.accept(248,(function(){var t=n(248);"string"==typeof t&&(t=[[e.i,t,""]]),r(t)})),e.hot.dispose((function(){r()}))},555:function(e,t,n){(e.exports=n(68)(!1)).push([e.i,":root {\n    --PRIMARY-COLOR: #1eaaff;\n    /* 2 */\n    --LINE-COLOR: #BCDAFB;\n    /* 3 */\n    --BG-COLOR: #E2F4FF;\n    /* 4 */\n    --MAIN-BG-COLOR: #E8F6FF;\n    --BTN-HOVER-COLOR: #4ABAFF;\n    --BTN-ACTIVE-COLOR: #1C9BEB;\n    --TEXT-COLOR: #455671;\n    --ERROR-COLOR: #ff7171;\n\n    /* \n    \n    primary-color: #1eaaff;\n    success-color: #25cc76;\n    secondary-color: #6ae36c;\n    error-color: #ff7171;\n    warning-color: #fdc02f; */\n}",""])},56:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return E})),n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return f}));var o=n(38),a=n.n(o),r=n(4),i=n.n(r),s=n(7),c=n(137),l=n(17),d=n(15),p=n(14),u=n(76),h=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};const m={Lastest:0,ToUpdate:1,Updated:2},f={None:0,Downloading:1},E={device:"device",ext:"ext"},g=s.b.extDirPath||"",T=a.a.join(s.b.appRootPath||"","exts");const b=new class{constructor(){this.localExtList={ext:[],device:[]},this.remoteExtList={ext:[],device:[]},this.extSupportVersionList=[],this.waitInitExtDir=null,this.listUpdateListeners=[],this.localExtTags=[],this.waitInitExtDir=this.initExtDir(),this.saveExtListToFile=i.a.throttle(this.saveExtListToFile.bind(this),300),this.getRemoteExtList=i.a.throttle(this.getRemoteExtList.bind(this),300)}getExtList(e,t){return h(this,void 0,void 0,(function*(){return this.waitInitExtDir&&(yield this.waitInitExtDir),yield this.getLocalExtList(e),this.localExtList[e].length?(t&&t(this.localExtList[e]),yield this.getRemoteExtList(e),t&&t(this.localExtList[e]),this.localExtList[e]):t&&t(yield this.getAppExtList(e))}))}getLocalExtList(e){return h(this,void 0,void 0,(function*(){if(!this.localExtList[e].length)try{this.localExtList[e]=yield fetch(`${g}${e}.json`).then(e=>e.json())}catch(e){}return this.localExtList[e]||[]}))}getAppExtList(e){return h(this,void 0,void 0,(function*(){try{const t=a.a.join(T,`${e}.json`);return yield fetch(t).then(e=>e.json())}catch(e){return null}}))}getRemoteExtList(e){return h(this,void 0,void 0,(function*(){if(!this.remoteExtList[e].length){let t=[];try{t=(yield c.a.getPublishedExtList("mblockpc",d.a.formatAppVersion,e,"","","","",3e3,"")).list}catch(e){}this.remoteExtList[e]=t,yield this.syncRemoteList(e)}return this.remoteExtList[e]}))}syncRemoteList(e){return h(this,void 0,void 0,(function*(){let t=this.localExtList[e];const n=this.remoteExtList[e],o=[];t.forEach((e,t)=>{n.find(t=>e.id.toLowerCase()===t.id.toLowerCase())||(e.updateStatus!==m.ToUpdate||e.downloadStatus||(e.updateStatus=m.Lastest),e.originVersion||o.push(t))}),t=this.localExtList[e]=t.filter((e,t)=>!o.includes(t)),n.forEach(e=>{if(!this.checkExtInfo(e)||!Object(u.d)(e.platform,"mblockpc"))return;let n=t.find(t=>t.id.toLowerCase()==e.id.toLowerCase());if(!n)return n=Object.assign(Object.assign({},e),{updateStatus:m.ToUpdate,downloadStatus:f.None}),delete n.originVersion,void t.push(n);n.downloadStatus!==f.Downloading&&n.updateStatus!==m.Updated&&((n.isDev||n.originVersion&&Object(p.a)(n.originVersion)<Object(p.a)(e.version))&&(n.updateStatus=m.ToUpdate,n.version=e.version,Object(u.d)(n.platform,"mblockpc")||(delete n.originVersion,n.platform=e.platform)),n.remoteTargets=e.targets,n.sortId=e.sortId,n.categorys=e.categorys)}),this.localExtList[e]=i.a.orderBy(t,["sortId"],["asc"]),yield this.saveExtListToFile(e)}))}saveExtListToFile(e){return h(this,void 0,void 0,(function*(){try{const t=a.a.join(g,`${e}.json`);return this.listUpdateListeners.length&&this.listUpdateListeners.forEach(e=>e()),yield p.c.write(t,JSON.stringify(this.localExtList[e]||[])),!0}catch(e){return!1}}))}saveExtTagsToFile(e){return h(this,void 0,void 0,(function*(){try{const t=a.a.join(g,"tag.json");return yield p.c.write(t,JSON.stringify(e||[])),!0}catch(e){return!1}}))}getLocalExtTags(){return h(this,void 0,void 0,(function*(){if(!this.localExtTags.length)try{this.localExtTags=yield fetch(`${g}tag.json`).then(e=>e.json())}catch(e){}return this.localExtTags||[]}))}checkExtInfo(e){return e.version||(e.version="v0.0.0"),e.id&&e.main&&e.version}syncAppExtList(e,t){return h(this,void 0,void 0,(function*(){try{let n=!1;yield this.getLocalExtList(e);const o=this.localExtList[e];for(let e=0;e<t.length;e++){const r=t[e];if(!this.checkExtInfo(r)||!Object(u.d)(r.platform,"mblockpc"))continue;const i=o.findIndex(e=>e.id.toLowerCase()==r.id.toLowerCase()),s=o[i],c=r.main.split("/")[0];if(-1===i)yield p.c.copy(a.a.join(T,c),a.a.join(g,c)),o.push(r),n=!0;else{if(s.isDev){s.updateStatus=m.ToUpdate;continue}s.originVersion&&Object(p.a)(s.originVersion)<Object(p.a)(r.version)&&(yield p.c.copy(a.a.join(T,c),a.a.join(g,c)),o[i]=r,n=!0)}}this.localExtList[e]=i.a.orderBy(o,["sortId"],["asc"]),n&&(yield this.saveExtListToFile(e))}catch(e){}}))}abortDownloadExt(e){return h(this,void 0,void 0,(function*(){return yield p.c.abortDownload(`ext-${e.toLowerCase()}`)}))}downloadExt(e,t,n){if(!i.a.has(this.localExtList,e))return void(n&&n(new Error("not found the list of type"),null));t=t.toLowerCase();const o=this.remoteExtList[e].find(e=>e.id.toLowerCase()===t.toLowerCase()),r=this.localExtList[e].find(e=>e.id.toLowerCase()===t.toLowerCase());if(r&&o&&r.updateStatus==m.ToUpdate&&!r.downloadStatus){const i=a.a.join(g,"temp",`${t}.mext`);try{r.downloadStatus=f.Downloading,r.progress=0,n&&n(null,r),p.c.downloadFile(o.fileUrl,i,`ext-${t}`,(t,a)=>h(this,void 0,void 0,(function*(){null==t?(r.progress=a.percent,n&&n(null,r),100==a.percent&&this.onDownloadedExt(i,r,o,n)):(r.downloadStatus=f.None,this.saveExtListToFile(e),n&&n(t,r))})))}catch(t){r.downloadStatus=f.None,this.saveExtListToFile(e),n&&n(t,r)}}else n&&n(new Error("not found the extension"),r)}onDownloadedExt(e,t,n,o){return h(this,void 0,void 0,(function*(){const a=t.device?E.device:E.ext;if(yield this.checkMd5(e,n.fileMd5)){const r=p.c.procFilePath([g,"temp",n.id.toLowerCase()]);p.c.uncompress({filePath:e,extractPath:r,onError:n=>{p.c.removeDir(e),Object.assign(t,{downloadStatus:f.None}),this.saveExtListToFile(a),o&&o(n,t)},onFinish:r=>{p.c.removeDir(e),this.procUncompressExt(r,e=>{Object.assign(t,{downloadStatus:f.None}),e||Object.assign(t,n,{updateStatus:t.originVersion?m.Updated:m.Lastest,originVersion:n.version,isDev:!1}),o&&o(e,t),this.saveExtListToFile(a)})}})}else Object.assign(t,{downloadStatus:f.None}),this.saveExtListToFile(a),o&&o("download file incomplete",t)}))}checkMd5(e,t){return h(this,void 0,void 0,(function*(){return yield Object(p.b)(e,t)}))}dragExtFile(e,t){if(e instanceof File){if("mext"==Object(l.getFileSuffix)(e.name).toLowerCase()){const n=Object(l.getFileName)(e.name),o=p.c.procFilePath([g,"temp",n]);p.c.uncompress({file:e,extractPath:o,onError:e=>{t&&t(e)},onFinish:e=>h(this,void 0,void 0,(function*(){this.procUncompressExt(e,(e,n)=>h(this,void 0,void 0,(function*(){let a=n;e||(a=yield this.onAddedDevExt(n,o));const r=e&&(e.message||"the suffix of file is incorrect");t&&t(e&&new Error(r),a)})))}))})}else t&&t(new Error("the suffix of file is incorrect"))}else t&&t(new Error("file is not instanceof File"))}onAddedDevExt(e,t){return h(this,void 0,void 0,(function*(){const t=e.device?E.device:E.ext,n=yield this.getLocalExtList(t),o=n.findIndex(t=>t.id.toLowerCase()==e.id.toLowerCase()),a=Object.assign(Object.assign({},e),{originVersion:e.version,updateStatus:m.Lastest,downloadStatus:f.None,isDev:!0});return-1!==o?(n[o].originVersion&&(a.updateStatus=m.Updated),n[o]=a):n.push(a),yield this.saveExtListToFile(t),a}))}procUncompressExt(e,t){return h(this,void 0,void 0,(function*(){try{const n=a.a.join(e,"manifest.json"),o=yield p.c.read(n);if(!o||!o.data)throw new Error("manifest miss data");const r=o.data;if(!this.checkExtInfo(r))throw new Error("manifest info incorrect");if(!i.a.isEmpty(this.extSupportVersionList)&&!i.a.isEmpty(r.extApiVersion)&&!Object(p.d)(this.extSupportVersionList,r.extApiVersion))throw new Error("manifest info apiVersion is not supported");const s=r.main.split("/")[0],c=a.a.join(g,s);return yield p.c.copy(e,c),yield p.c.removeDir(e),t&&t(null,r),!0}catch(e){return t&&t(e),!1}}))}initExtDir(){return h(this,void 0,void 0,(function*(){try{yield p.c.copy(a.a.join(T,"common"),a.a.join(s.b.extDirPath||"","common"));const e=[E.device,E.ext];for(const t of e){const e=yield this.getAppExtList(t);Array.isArray(e)&&e.length>0&&(yield this.syncAppExtList(t,e))}yield this.initProcExtUpdate()}catch(e){}try{setTimeout(()=>h(this,void 0,void 0,(function*(){this.extSupportVersionList=yield c.a.getExtVersionList(s.b.version||"")})),0)}catch(e){this.extSupportVersionList=[]}this.waitInitExtDir=null}))}initProcExtUpdate(){return h(this,void 0,void 0,(function*(){const e=[E.device,E.ext];for(const t of e){yield this.getLocalExtList(t);const e=this.localExtList[t];for(const t of e)t.downloadStatus===f.Downloading&&(t.downloadStatus=f.None),t.updateStatus!==m.Updated&&t.updateStatus!==m.Lastest||delete t.updateStatus,t.isDev&&(t.updateStatus=m.ToUpdate);this.saveExtListToFile(t)}}))}onListUpdate(e){return-1===this.listUpdateListeners.indexOf(e)&&this.listUpdateListeners.push(e),()=>{const t=this.listUpdateListeners.indexOf(e);-1!==t&&this.listUpdateListeners.splice(t,1)}}}},624:function(e){e.exports=JSON.parse('{"MBLOCK":"mBlock","MBLOCK.TEXT":"Sign up/Sign in mBlock","MENU.FILE":"File","MENU.FILE.NEW":"New Project","MENU.FILE.OPEN":"Open from your computer","MENU.FILE.SAVE":"Save","MENU.FILE.SAVEAS":"Save As...","MENU.FILE.DEMOS":"Example Programs","MENU.PROJECTS":"My Projects","MENU.EDIT":"Edit","MENU.EDIT.RESTORE":"Restore","MENU.EDIT.TURBO":"Stage Turbo Mode On","MENU.EDIT.TURBO.OFF":"Stage Turbo Mode Off","MENU.EDIT.SHRINK":"Hide Stage","MENU.EDIT.SHRINK.OFF":"Unhide Stage","MENU.EDIT.UNDO":"Undo","MENU.EDIT.REDO":"Redo","MENU.HELP":"Help","MENU.HELP.ABOUT":"About mBlock","MENU.HELP.FEEDBACK":"Feedback","MENU.HELP.UPDATER.CHECKER":"Check For Updates","MENU.FIRMWARE":"Upload Firmware","MENU.LANGUAGE":"Language","MENU.EXIT":"Exit","MENU.MODE.BLOCK":"Blocks","MENU.MODE.CODE":"Code","MENU.TOOL":"Tools","MENU.CLOUDLIST":"Cloud Data","MENU.HELP.UPDATEFIRMWARE":"Device Firmware Updates","MENU.HELP.GUIDE":"User Guide","IFTTT.TITLE":"IFTTT","IFTTT.CONTENT.TEXT":"Go to IFTTT Configure Service","IFTTT.CONTENT.TEXT.BEFORE":"Go to","IFTTT.CONTENT.TEXT.AFTER":"Configure Service","BUTTON.UPGRADE.NOW.TEXT":"Upgrade now","BUTTON.UPGRADE.LATER.TEXT":"Upgrade later","BUTTON.UPGRADE.SKIP.TEXT":"Skip this version","BUTTON.RESTART.NOW.TEXT":"Restart now","BUTTON.RESTART.LATER.TEXT":"Restart later","BUTTON.FIRMWARE.NOW.TEXT":"Update now","BUTTON.FIRMWARE.LATER.TEXT":"Update later","BUTTON.GOTO.TEXT":"Go to","BUTTON.IKNOW.TEXT":"OK","BUTTON.SEE.DOCS.TEXT":"See Docs","BUTTON.GO.DOWNLOAD.TEXT":"Download","BUTTON.UPDATE.TEXT":"Updates","BUTTON.UPDATE.NOT.NOW.TEXT":"Not Now","BUTTON.RETRY.TEXT":"Retry","BUTTON.OK.TEXT":"OK","BUTTON.CANCEL.TEXT":"Cancel","BUTTON.NEXT.TEXT":"Next","BUTTON.LOGIN.TEXT":"Sign in","BUTTON.BACK.TEXT":"Back","BUTTON.FINISH.TEXT":"Finish","BUTTON.SUBMIT.TEXT":"Submit","BUTTON.CONFIRM.TEXT":"Confirm","BUTTON.CLOSE.TEXT":"Close","BUTTON.YES.TEXT":"Yes","BUTTON.NO.TEXT":"No","BUTTON.YES.SAVE.TEXT":"Save","BUTTON.NO.SAVE.TEXT":"Don\'t Save","BUTTON.UPLOAD.TEXT":"Upload","BUTTON.CONTINUE.CONNECT.TEXT":"Connect","BUTTON.UPDATE.SERIAL.TEXT":"Change a new COM","BUTTON.UPDATE.FIRMWARE.TEXT":"Update Firmware","BUTTON.REGISTER.LOGIN":"Sign up/Sign in","BUTTON.ADD":"Add","BUTTON.REMOVE":"Remove","BUTTON.DELETE":"Delete","BUTTON.CREATE":"Create","BUTTON.LOGOUT":"Sign out","BUTTON.SHARE":"Publish","BUTTON.GO.DOWNLOAD":"Go to download","BUTTON.STARTUP":"Already installed, start now","BUTTON.LATER":"Later","BUTTON.PYTHON.EDITOR":"Python editor","BUTTON.CANCEL.SHARE":"Yes","BUTTON.SHARE.CHECK":"Go to the publish page","BUTTON.SHARE.THINK":"Let me think","BUTTON.KNOW.MORE":"Learn more","BUTTON.SKIP.TEXT":"Skip","BUTTON.PREVIOUS.TEXT":"Previous","BUTTON.SKIP.INTRODUCTION":"Skip guide","SCANING.SERIAL":"Scanning for a COM port...","SCANING.BLE":"Scanning for the Bluetooth...","SHOW.CONNECTABLE.DEVICES.TEXT":"Show all connectable devices","SCANING.ABLE.DEVICE.TEXT":"Searching for connectable devices","NOTSERVER.TEXT":"The device driver is not enabled.","NOTSERVER.SOLUTION.TEXT":"Solutions","DOWNLOAD.NOW":"Download Now","UPLOAD.CODE.TITLE":"Upload Progress","UPLOAD.COMPLIE.TITLE":"Compiling","UPLOAD.COMPLIE.FAILED":"Compile failed","UPLOAD.FIRMWARE.TITLE":"Upload Firmware","UPLOAD.FIRMWARE.SELECT.TITLE":"Click here to select the firmware for upload","UPLOAD.MESSAGE.SUCCESS":"The code has been uploaded.","UPLOAD.MESSAGE.FAIL":"Code upload failed. Please try again!","UPLOAD.MESSAGE.SUCCESS.FIRMAWARE":"The firmware update is finished. Please reconnect the device.","UPLOAD.MESSAGE.FAIL.FIRMAWARE":"The firmware upload failed. You can try to upload again.","UPLOAD.DISCONNECT.MESSAGE":"The device has been disconnected. Upload failed!","CHOOSE.DEVICE.LABEL":"Select a device","CHOOSE.FIRMWARE.LABEL":"Select firmware","CHOOSE.FIRMWARE.LOCAL":"Choose a local firmware","CHOOSE.FIRMWARE.MSG":"Please select a firmware","VERSION.TEXT":"Version:","GRATITUDE.TEXT":"These {0} make mBlock possible.","OPENSOURCE.TEXT":"open source software","FILENAME.EMPTY":"Untitled","CONFIRM.SAVE.TITLE":"Save","CONFIRM.SAVE.TEXT":"The file has been modified. Save it?","CONFIRM.SAVE.ADAPT.TEXT":"The file has been modified. Remix it?","EXPORT.SUCCESS.MSG":"The file has been saved.","EXPORT.FAIL.MSG":"Failed to save the file\\n","IMPORT.FORMAT.ERROR.MSG":"File in wrong format","IMPORT.CONTENT.ERROR.MSG":"Data check failure","IMPORT.SUCCESS.MSG":"The file has been opened.","IMPORT.FAIL.MSG":"Failed to open the file.","DRAG.HOLDER.TEXT":"Drag the file and drop here.","USER.INTERNATIONAL":"Switch to mBlock 5 International","USER.DOMESTICAL":"Switch to mBlock 5 China","USER.OVERAGE":"Are you 16 or older?","USER.AGREEMENT":"Privacy Policy","USER.AGREE.TEXT":"Agree and continue","USER.GUARDIAN":"Guardian Consent","USER.GUARDIAN.TEXT":"Considering that you are under the age of 16, you need to inform your parents or other guardians.This is important because it\'s about your privacy.","USER.GUARDIAN.CONFIRM.TEXT":"I am his/her guardian","USER.EMAIL.LOGIN":"Sign in...","USER.STUDENTID.LOGIN":"Sign in with Student account","USER.LOGIN.SUCCESS.MSG":"You have signed in!","USER.LOGIN.FAIL.MSG":"Failed to Sign in!","USER.REGISTER":"Create an Account","USER.REGISTER.SUCCESS.MSG":"You have signed up!","USER.REGISTER.FAIL.MSG":"Failed to sign up!","USER.LOGOUT":"Sign out","USER.LOGOUT.SUCCESS.MSG":"You have signed out!","USER.LOGOUT.FAIL.MSG":"Failed to sign out.","USER.PROFILE":"Account Settings","USER.BIND":"account bound","USER.ASSIGN.WORK":"Assign schoolwork","USER.SUBMIT.WORK":"Submit schoolwork","USER.DELETE":"Delete Your Account","USER.CREATE.ACCOUNT":"Create account","USER.DELETE.ACCOUNT":"Your account ","USER.DELETE.TEXT":" will be deleted. If you delete the account, the account can\'t be restored and the data will be removed, still proceed to delete?","USER.DELETE.THINK":"Think again","USER.DELETE.FAIL.MSG":"Failed to delete the account!","USER.FORGET.PASSWORD":"Find your password","USER.RESET.PASSWORD":"Reset your password","USER.FINDPWD.SUCCESS.MSG":"You have reset the password.","USER.FINDPWD.FAIL.MSG":"Failed to reset the password!","USER.LOGIN.EXPIRE.MSG":"Invalid signin. Please try again.","SOCIAL.LOGIN":"Sign in using a third-party account","OTHER.LOGIN":"Or continue with","FORGET.PASSWORD":"Forgot Your Password?","UPDATE.PASSWORD":"Update Password","UPDATE.PASSWORD.CURRENT":"Current password","UPDATE.PASSWORD.NEW":"New password","USER.UPDATE.SUCCESS.MSG":"Password updated successfully!","USER.UPDATE.FAIL.MSG":"Failed to update password!","REGISTER.AGREE":"By signing up, you agree to","PROTOCOL.TEXT":"Terms of Service","NO.CODE":"No verification code received?","FORM.BUTTON.CODE.TEXT":"verification code","FORM.BUTTON.CODE.SENDED":"Resend after {0}s","FORM.BUTTON.CODE.SEND.SUCCESS.MSG":"The verification code has been sent to your email.","FORM.BUTTON.CODE.SEND.FAIL.MSG":"Failed to send the verification code. Please try again later!","FORM.BUTTON.CODE.SEND.AGAIN":"Send again","FORM.FIELD.NICKNAME.PH":"Nickname","FORM.FIELD.EMAIL":"Email","FORM.FIELD.EMAIL.PH":"Email/Student account","FORM.FIELD.EMAIL.TYPE.MSG":"Please enter a valid email address or student account","FORM.FIELD.EMAIL.ONLY.TYPE.MSG":"Please enter a valid email address","FORM.FIELD.EMAIL.OVER.TYPE.MSG":"The maximum length of a valid email address is 100 characters","FORM.FIELD.EMAIL.MSG":"Please enter your email address or student account","FORM.FIELD.EMAIL.USED.MSG":"The email address is already registered. Please return to Sign up again.","FORM.FIELD.STUDENTID.PH":"Account","FORM.FIELD.STUDENTID.TYPE.MSG":"Account in wrong format!","FORM.FIELD.STUDENTID.MSG":"Please enter account","FORM.FIELD.PASSWORD":"Password","FORM.FIELD.PASSWORD.PH":"Please enter password","FORM.FIELD.PASSWORD.NEW.PH":"Enter a new password","FORM.FIELD.PASSWORD.OLD.PH":"Please enter the current password","FORM.FIELD.PASSWORD.OLD.MSG":"Please enter the correct password","FORM.FIELD.PASSWORD.MSG":"Format error, please enter 6-20 characters","FORM.FIELD.PASSWORD.MIN.MSG":"The password must contain 6 characters at least!","FORM.FIELD.PASSWORD.MAX.MSG":"The password can contain 20 characters at most!","FORM.FIELD.PASSWORD.CONTACT.MSG":"Please enter correct password. Contact teachers if you forgot the password.","FORM.FIELD.CODE.PH":"Verification code","FORM.FIELD.CODE.MSG":"Please enter your email verification code!","FORM.FIELD.CODE.CURRENT.MSG":"Please enter correct verify code","RENAME.ERR.NULL.MSG":"File name cannot be empty","RENAME.ERR.PREFIX.MSG":"The file name cannot start with + - .","RENAME.ERR.CONTAIN.MSG":"The file name can\'t contain characters like \\\\ / : * ? \\" < > | @ , # $ & ( ) ","RENAME.ERR.KEY.MSG":"are illegal characters, please retype","RENAME.ERR.EXIST.MSG":"The file name has been created.","NETWORK.ERR.MSG":"Network error! Please try again later!","SOCIAL.WECHAT":"Wechat","SOCIAL.QQ":"QQ","SOCIAL.GOOGLE":"Google","MSG.10001":"Illegal email format!","MSG.10002":"The email has been taken!","MSG.10003":"The email has been associated!","MSG.10004":"The email account does not exist!","MSG.10005":"Wrong e-mail password!","MSG.10006":"Illegal verification code!","MSG.10007":"The UID does not exit!","MSG.10008":"Illegal string length!","MSG.10009":"Illegal character type!","MSG.10010":"Illegal UID!","MSG.10011":"Third-party authorization error!","MSG.10012":"The new password and the old password are not the same!","MSG.10013":"Incorrect ID or password!","MSG.10014":"Invalid association with other third-party media!","MSG.10015":"Invalid association with email!","MSG.10016":"The third-party associated does not exist!","MSG.10017":"Incorrect request parameter!","MSG.10018":"The third-party media has been associated!","MSG.10101":"WeChat approval error!","MSG.10102":"WeChat callback error!","MSG.10103":"QQ approval error!","MSG.10104":"Facebook approval error!","MSG.10105":"Google approval error!","MSG.10106":"Callback state error!","MSG.10107":"Failed to cancel the association!","MSG.20001":"Please do not Sign in twice!","MSG.20002":"Please Sign in first!","MSG.20003":"JSONException!","MSG.20004":"Incorrect request parameter!","MSG.20005":"Illegal email format!","MSG.20006":"Incorrect user name or password!","MSG.20007":"Wrong verification code!","MSG.20008":"The email has been taken!","MSG.20009":"The email account does not exist","MSG.30001":"Not signed in","MSG.30002":"Unknown error. Failed to read/write redis.","MSG.30003":"Unsupported mainboard type","MSG.30004":"Incorrect request parameter!","MSG.30005":"The cloud list does not exist.","MSG.30006":"The cloud list has been created.","MSG.30007":"The cloud list has reached its maximum length.","MSG.30008":"The could list has reached its limit in number.","MSG.99999":"Network error. Please check your network.","MSG.404":"Request failed. Please try again later. 404","MSG.500":"Request failed. Please try again later. 500","MSG.503":"Request failed. Please try again later. 503","MSG.-1":"Request failed. Please try again later. -1","WEBGL.NOT.SUPPORT":"Your video card drive version is too low, please update it and then try again.","BLOCK.USE.NEED.LOGIN":"You need to Sign in to use the block.","BLOCK.USE.NEED.LOGINANDOPEN":"The block is available only after you sign in and open the Upload mode.","DOWNLOAD.LOADING.TEXT":"Loading...","DOWNLOAD.LOADING.FAILURE":"Download failure","DOWNLOAD.LOADING.NETWORK.DISCONNECT":"Network error","MENU.FILE.SAVEMY":"Save as My Project","MENU.FILE.LOCALFILE":"Local file","MENU.FILE.SAVEING":"Saving...","MENU.FILE.SAVE.SUCCESS":"Saved successfully","MENU.FILE.SAVE.FAIL":"Save failed","MENU.FILE.UPLOAD.FAIL":"Save failed. You can download the project to your computer.","MENU.FILE.SAVE.NAME":"Project name","FORM.FIELD.NEWNAME.MAX.MSG":"The project name should include 48 characters at most.","FORM.FIELD.NEWNAME.REQUIRE.MSG":"Please give your project a name","DOWNLOAD.LOADING.RETRY":"Click to retry","USER.LOGIN.TO_LOGIN_TIP":"Please sign in first","MENU.FILE.PUBLISH.SUCCESS":"published","MENU.FILE.PUBLISH.UPDATE":"update success","MENU.FILE.NEW.WEB":"New","MENU.FILE.OPEN.WEB":"Open","MENU.FILE.SAVE.WEB":"Save","MENU.FILE.SAVEAS.WEB":"Save as...","MENU.FILE.IMPORT":"Open from your computer","MENU.FILE.EXPORT":"Save to your computer","MENU.FILE.SAVELOCAL":"Save","USER.HOME_PAGE":"Profile","USER.CLOUD_SERVICE_KEY":"Cloud service auth code","USER.YOUR_CLOUD_SERVICE_KEY":"Your exclusive auth code","USER.CLOUD_SERVICE_KEY_TIP":"Your exclusive auth code is generated. Providing it to anyone else will reduce counts of access available of yours to the service.","USER.COPY_CLOUD_SERVICE_KEY":"Copy auth code","USER.COPY_SUCCESS":"Copied!","BROWSER.COMPATIBLE_TIP":"The web browser you are using doesn\'t support all the features that mBlock Web offers. Please use Chrome or download mBlock PC to get the best experience. ","BROWSER.COMPATIBLE_TIP.DOWNLOAD":"Go to download","MENU.FILE.VIEW_WORKS":"View project page","MENU.FILE.ADAPT.SAVE":"Remix and save","MENU.FILE.ADAPT":"Remix","MENU.NO.LOGIN.TOOLTIP":"Sign in to store your project in the cloud~","PROJECT.LOADING_TIP":"loading...","DEVICE.STATUS.UPDATING":"Updating...","DEVICE.STATUS.DOWNLOADING":"Downloading...","DEVICE.STATUS.REOPEN":"Updated successfully! You can restart the application now.","DEVICE.INSTALL.STATUS.FAIL":"Network error or file error. {0} install failed.","DEVICE.UPDATE.STATUS.FAIL":"Network error or file error. {0} update failed.","MENU.LANG.CHECK.UPDATE":"Translation Updates","MENU.LANG.CHECK.UPDATE.TITLE":"Check for Updates","LANG.CHECKER.NETWORK.ERROR":"Translation update failed. Please check the network and try again.","LANG.CHECKER.DOING":"Updating translation...","LANG.CHECKER.SUCCESS":"Already updated the translation!","LANG.CHECKER.IS.LATEST":"Translation already up-to-date!","MENU.MAKEX":"Competition","MENU.COURSES":"Courses","MENU.TUTORIAL":"Tutorials","MENU.LEARNING.CENTER":"Learning Center","BUTTON.CHART.DOWNLOAD":"download","BUTTON.CHART.TABLE":"table","BUTTON.CHART.LINE":"line chart","BUTTON.CHART.BAR":"bar chart","MESSAGE.CHART.REATCHMAXXAXISDATA":"The data input already exceeds the limit {0}, so the input has stopped.","MESSAGE.CHART.REATCHMAXLENGEND":"The legends you created exceed the limit {0}, so you can\'t add more","CHART.DEFAULT.XAXISNAME":"category","CHART.DEFAULT.YAXISNAME":"value","MENU.FILE.PUBLISH.TO":"Share to...","PROJECT.SHARE.TO.TITLE":"Share project to","ACCOUNT.SWITCH.TO":"Switch to","IMPORT.EXTINPROJECT.FAIL":"The devices or extensions necessary for this project are not published yet, so the project fails to work as intended.","MENU.OTHER.ABOUT":"About mBlock","MENU.OTHER.JOIN":"Cooperation","MENU.OTHER.VERSION.INTRODUCE":"About version {0}","MENU.OTHER.DRIVER.INSTALL":"Serial driver quick install","MENU.OTHER.DEFAULT.EDITOR":"Set as default editor","DEVICE.DEFAULT":"Mostly used device","DEVICE.DEFAULT.SET":"Set as mostly used device","DEVICE.DEFAULT.SET.SUCCESS":"Already set! It will take effect when a new project is created.","DEVICE.BECOME.DEVELOPER":"Become an mBlock developer to add more devices.","DEVICE.CREATE":"Create Extension","DEVICE.MOREINFO":"More Info","BLOCK.HELP.NO.HELP":"Help documentation is on its way. Stay tuned!","BLOCK.HELP.EDIT.TIME":"Final edit","MENU.EDIT.COMPANION.OPEN":"Open Companion Mode","MENU.EDIT.COMPANION.CLOSE":"Close Companion Mode","COMPANION.CATEGORY.DISABLE":"Companion extension of \'{0}\' need to be online and connected.","USER.ACCOUNT":"Account Center","DEFAULT.EDITOR.TEXT":"Set the following as the default editor when mBlock for desktop runs:","MBLOCK.LINK":"Block-based Editor","MCODE.LINK":"Python Editor","MCODE.LINK.TIP":"New Python editor is online. Software and hardware interaction, massive third-party libraries, waiting for you to experience","MCODE.LINK.HELP":"See the difference","MLINK.NOTICE.MODAL.TITLE":"Available for both block-based coding and Python editors","MLINK.NOTICE.MODAL.DESC":"mLink 2 is here for both your block-based coding and Python editors","MLINK.NOTICE.MODAL.TIP":"mLink 2 adopts a brand new technical solution, so to ensure higher reliability, please remove the old version you already installed before you continue.","MBLOCK.CHARACTER.TITLE":"mBlock v{0} is coming!  ","MBLOCK.CHARACTER.DESC1":"A perfect tool for everyone to learn AIoT and Python  CyberPi","MBLOCK.CHARACTER.DESC2":"Courses Supermarket is coming! There\'s an ocean of courses here. And they are free for a limited time!","MBLOCK.CHARACTER.DESC3":"mBlock Python Editor is updated to support Python 3 and MicroPython","MBLOCK.CHARACTER.KNOW.MORE.PARAMS":"More details","MBLOCK.CHARACTER.STEP1.TITLE":"A perfect tool for everyone to learn AIoT and Python  CyberPi","MBLOCK.CHARACTER.STEP3.TITLE":"mBlock Python Editor is here. A brand new one!","MBLOCK.CHARACTER.STEP3.DESC":"You can learn more from About Version {0} in More."}')},625:function(e){e.exports=JSON.parse('{"CALIBRATE.COLOR.TITLE":"Calibrate the color sensor of Codey Rocky","CALIBRATE_COLOR_DESCRIPTION":["Put your Codey Rocky in the environment that needs calibration (working environment), and rotate the IR color sensor to the bottom.","Place the white color identification card under the color sensor (if your color card is damaged or lost, use a white printer paper then).","Just click the Calibrate button below. Calibration finished!","Please aim the color sensor to the center of the Color Identification Card."],"CALIBRATE.GYRO.TITLE":"Calibrate the gyro of Codey","CALIBRATE_GYRO_DESCRIPTION":["Put your Codey in a stable place.","Just click the Calibrate button below.Calibration finished!"],"CALIBRATE.BUTTON.TEXT":"Calibrate","CALIBRATE.BUTTON.TEXT.LOADING":"Calibrating...","CALIBRATE.MSG.SUCCESS":"Calibration success","CALIBRATE.MSG.FAIL":"Calibration failed, please try again."}')},626:function(e){e.exports=JSON.parse('{"FEEDBACK.MODAL.TITLE":"Feedback","FEEDBACK.FORM.PROFESSION":"Your are a","FEEDBACK.PROFESSION.LIST":["Teacher","Student","Parent","Maker"],"FEEDBACK.FORM.DESCRIPTION":"Your suggestions/feedback","FEEDBACK.FORM.DESCRIPTION.REQUIRE":"Please enter your suggestions/feedback","FEEDBACK.FORM.ATTACHMENT":"Attachments","FEEDBACK.FORM.ATTACHMENT.UPLOAD.TEXT":"Upload error video or project file.","FEEDBACK.FORM.ATTACHMENT.UPLOAD.MAXSIZE":"File size 10M","FEEDBACK.FORM.CONTACT":"Your contact email","FEEDBACK.FORM.CALL":"What is your name?","FEEDBACK.ADD.SUCCESS":"Submitted!","FEEDBACK.ADD.FAILED":"Fail to submit. Please try again.","FEEDBACK.WECHAT.AFTER.SALE":"Makeblock After-sale","FEEDBACK.FOLLOW.WECHAT":"Follow the official account to get help from our technicians in real time."}')},627:function(e){e.exports=JSON.parse('{"UPDATER.CHECKER.TITLE":"Check for Updates","UPDATER.CHECKER.CHECKING":"Checking for updates...","UPDATER.CHECKER.LATEST.TITLE":"Already up-to-date.","UPDATER.CHECKER.LATEST.TEXT":"An update is not necessary because the current version is the latest one.","UPDATER.CHECKER.NETWORK.TITLE":"Network Connection Error","UPDATER.CHECKER.NETWORK.TEXT":"No network connection detected. Please try again later.","UPDATER.CHECKER.CONTENT.TITLE":"A new version is available now.","UPDATER.CHECKER.CONTENT.VERSION.BEFORE":"An update to the version","UPDATER.CHECKER.CONTENT.FEATURES.LABEL":"New Version Features:","UPDATER.RESTART.TITLE":"Restart","UPDATER.RESTART.CONTENT.TITLE":"Update completed.","UPDATER.RESTART.CONTENT.TEXT":"Please restart the software to experience the new version.","UPDATER.RESTART.CONTENT.TITLE.WIN":"An update is finished. Please restart the software to try new features.","UPDATER.RESTART.CONTENT.TEXT.WIN":"To ensure the system stability, you need to start the software manually.","UPDATER.FIRMWARE.TITLE":"To Update Firmware?","UPDATER.FIRMWARE.CONTENT.TITLE":"The firmware does not match the software, so the program may fail to run properly.","UPDATER.FIRMWARE.CONTENT.TEXT":"It may take one minute to upgrade the firmware. To avoid that the progress is disrupted, please keep your computer running properly and do not work on other operations during the period.","UPDATER.FIRMWARE.CONTENT.TEXT.BLE":"Please connect your device with the computer with the USB cable. Then upgrade the firmware according to the onscreen instructions. Then upload the program.","UPDATER.FIRMWARE.SUCCESS.TITLE":"The update is finished.","UPDATER.FIRMWARE.SUCCESS.CONTENT.TITLE":"The firmware update is finished!","UPDATER.FIRMWARE.SUCCESS.CONTENT.TEXT":"Please restart the device for a better experience.","UPDATER.FIRMWARE.FAILED.TITLE":"Update failed.","UPDATER.FIRMWARE.FAILED.CONTENT.TITLE":"The firmware update failed again.","UPDATER.FIRMWARE.FAILED.CONTENT.TIPS":"Failed again? Please check if the device is connected in the right way.","UPDATER.FIRMWARE.LOADING.TITLE":"Updating the firmware...","UPDATER.FIRMWARE.LOADING.CONTENT.TEXT":"Please do not close the software or do anything with the software.","UPDATER.PROGRESS.ERROR":"Network Connection Error. Please try again later.","UPDATER.PROGRESS.PERCENT":"Update Progress:{0}%","UPDATER.REMIND.TEXT":"Remind me when any update is available.","UPDATER.NOT.SUPPORT.UPDATE":"The current version does not support auto-update.","UPDATER.FRIMWARE.M.TITLE":"Device Firmware Updates","UPDATER.FRIMWARE.F.DEVICE.TEXT":"Device","UPDATER.FRIMWARE.F.VERSION.TEXT":"Firmware Version","UPDATER.FRIMWARE.NOTCONNECT":"No device is connected. Please connect your device first.","UPDATER.NO.NEED.UPDATE":"The current firmware matches the software, so an update is not necessary.","UPDATER.CANT.USE.BLE.TITLE":"The current version does not support firmware updates via Bluetooth.","UPDATER.CANT.USE.BLE.TEXT":"Please connect your device to the computer before updating your device.","UPDATE.FACTORY.DATA.RESET":"Factory reset","UPDATE.FACTORY.DATA.LATEST":"online firmware"}')},628:function(e){e.exports=JSON.parse('{"PROGRAM.DEMOS.TITLE":"Example Programs","PROGRAM.DEMOS.EVENT":"Events"}')},629:function(e){e.exports=JSON.parse('{"CONNECT.TITLE":"Connect Device","CONNECT.ONLY.TIP":"Only one device can be connected at a time in this version. A new device connection will lead to the disconnection of the existing one.","CONNECT.PROBLEM.TIP":"If you run into issues, please click ","CONNECT.SERIAL":"USB","CONNECT.HID":"2.4G","CONNECT.HID.DESCRIPTION":"1. Install the 2.4G module on the robot <br> 2. Power on the robot <br> 3. Press the button at the top of the 2.4G module <br> 4. Connect the 2.4 G module to your computer","CONNECT.BLE":"Bluetooth","CONNECT.WIFI":"Wi-Fi","CONNECT.BUTTON.TEXT":"Connect","CONNECT.CHOOSE.SERIAL":"Please select a COM port.","CONNECT.CHOOSE.BLE":"Please select a Bluetooth device to connect","CONNECT.LIST.EMPTY":"No device can be detected to connect.","CONNECT.STATUS.CONNECTED":"The device has been connected.","CONNECT.STATUS.DISCONNECTED":"The device has been disconnected.","CONNECT.MESSAGE.SUCCESS":"Connected!","CONNECT.MESSAGE.FAIL":"Connection error. Please try to connect again.","CONNECT.HELPLINK.TEXT":"Help Document","CONNECT.UNABLE.TITLE":"Unidentified device","CONNECT.UNABLE.TEXT":"The device you connected may be not {0}, or the firmware of {0} has been damaged.\\n\\n\\tYou can: \\n\\t- Change another COM port.\\n\\t- Update the device firmware\\n\\nIf you are using a Bluetooth adapter, please check if the adapter is well connected to the device.","CONNECT.LEARN.MORE.TEXT":"Learn More","CONNECT.CONNECTED":"connected","CONNECT.FIRMWARE.BLE.WARN":"The device needs to update the firmware via a USB connection","CONNECT.HELPER.TITLE":"Connection helper","CONNECT.NO.SUPPORT.CH340":"Your computer doesn\'t support CH340 drive, please connect via other options.","CONNECT.NO.SUPPORT.ARM":"The drive is not available on ARM-based computers. We are reaching out to the drive provider to seek compatibility support.","CONNECT.BLE.DRIVER.UPDATE":"Necessary Bluetooth drive is not found on your computer, \\n please follow {0}, to install the drive and restart mLink to try again.","CONNECT.NO.SUPPORT.BLE":"Our program doesn\'t support your computer\'s Bluetooth, please connect it on another computer or use another connection option.","CONNECT.BLE.HELP":"Can not find my Bluetooth device ?"}')},630:function(e){e.exports=JSON.parse('{"CODEY":"Codey","ROCKY":"Rocky","CODEY_ROCKY":"Codey Rocky","NEURON":"Neuron","MBOT":"mBot","STAGE":"Stage","AI":"AI","IOT":"IoT","HALOCODE":"HaloCode"}')},631:function(e){e.exports=JSON.parse('{"HARDDRIVER.DRIVER_NOT_START":"Device driver not turned on","HARDDRIVER.MLINK_NOT_TURN_ON":"mLink not turned on","HARDDRIVER.MSG":"Before connecting a device, you need to install and turn on the mBlock Web device driver.","HARDDRIVER.DOWNLOAD":"Download","HARDDRIVER.INSTALL_MLINK":"Install mLink","HARDDRIVER.OK_BUTTON":"Retry","HARDDRIVER.CANCEL_BUTTON":"Cancel","HARDDRIVER.MLINK_MSG":"You need to install and enable mLink before connecting to devices.","BUTTON.REFRESH.TEXT":"Refresh and try again","HARDDRIVER.DOWNLOAD.FAIL":"The firmware download failed. Please check the network and try again.","HARDDRIVER.DRIVER.UPDATE":"Hardware Driver Update","HARDDRIVER.DRIVER.CHECKER.MSG":"Your mLink version is too low, some features fail to work properly. Please update it first.","HARDDRIVER.DRIVER.NEW.CHARACTER":"New Features","PROMPT.TITLE":"Prompt","HARDDRIVER.NO.SERVER.TEXT":"Something wrong with the configuration environment on your computer, so the hardware device can\'t be detected and connected. Please follow the docs for troubleshooting."}')},632:function(e){e.exports=JSON.parse('{"EXTENSION.TITLE":"Extension center","EXTENSION.EMPTY":"Coming Soon...","EXTENSION.ADDED":"The extension has been added.","EXTENSION.REMOVED":"The extension has been removed.","EXTENSION.REMOVED.FAIL":"The extension is being used and cannot be removed for the time being.","EXTENSION.REMOVED.CONFIRM":"Are you sure you want to remove it? After removing, you will not be able to use the building blocks of the extension.","EXTENSION.INSTALL.SUCCESS":"Installed Successfully","EXTENSION.INSTALL.FAIL":"File error. Install Failed","EXTENSION.UPDATE.SUCCESS":"Updated Successfully","EXTENSION.UPDATE.FAIL":"Update Failed","EXTENSION.NEW.TEXT":"New extension","EXTENSION.UPDATE.TEXT":"Extension update","DEVICE.NEW.TEXT":"New device","DEVICE.UPDATE.TEXT":"Device update","EXTENSION.NOTSUPPORT.TEXT":"This .mext file version not supported.","EXTENSION.DEVELOPER":"Developers","EXTENSION.DEVELOPER.OFFICIAL":"By mBlock official","EXTENSION.DEVELOPER.TIP.OFFICIAL":"This extension is developed and maintained by mBlock.","EXTENSION.DEVELOPER.TIP.UNOFFICIAL":"This extension is developed by a third party. It will be maintained and updated at intervals.","EXTENSION.EMPTY.TIP":"Nothing found yet. Click \'Create Extension\' on the upper right to add one.","EXTENSION.DEVICE.EMPTY.TIP":"Add devices to diversify your extensions~","EXTENSION.DEVICE.EXT.EMPTY.TIP":"No extension found yet for this device.","EXTENSION.MORE.TEXT":"More","EXTENSION.BECOME.DEVELOPER":"Become a developer of mBlock to unlock more potential.","EXTENSION.TAB.PREVIEW":"My Extensions","EXTENSION.TAB.ONLINE":"Other Extensions","EXTENSION.TAB.SPRITE":"Sprite Extensions","EXTENSION.TAB.DEVICE":"Device Extensions"}')},633:function(e){e.exports=JSON.parse('{"SPRITE.LIBS.TITLE":"Sprite Library","SPRITE.LIBS.USER.TITLE":"My Sprites","SPRITE.COSTUMES.TITLE":"Costumes","SPRITE.COSTUMES.USER.TITLE":"My Costumes","SPRITE.BACKDROPS.TITLE":"Backdrop Library","SPRITE.BACKDROPS.USER.TITLE":"My Backdrops","SPRITE.SOUNDS.TITLE":"Sound Library","SPRITE.SOUNDS.USER.TITLE":"My Sounds","SPRITE.DEVICES.TITLE":"Device Library","SPRITE.DEVICES.USER.TITLE":"My Device","SPRITE.UPLOAD.MSG":"\\"{0}\\", upload JPG, PNG or SVG file only!","SPRITE.UPLOAD.SIZE.LIMIT.MSG":"\\"{0}\\", maximum file upload size is 2MB!","SPRITE.SVG.UPLOAD.SIZE.LIMIT.MSG":"\\"{0}\\", maximum svg file upload size is 500KB","SPRITE.SOUNDS.UPLOAD.MSG":"\\"{0}\\", upload MP3WAV file only!","SPRITE.SOUNDS.UPLOAD.SIZE.LIMIT.MSG":"\\"{0}\\", maximum file upload size is 20MB","SPRITE.UPLOAD.EXISTS.MSG":"\\"{0}\\" has existed!","SPRITE.SEARCH.TEXT":"Search","SPRITE.SEARCH.EMAMPLE.TEXT":"No result found. Use another keyword~","SPRITE.LIBS.EMPTY.TEXT":"Nothing found. Upload or draw what your need.","SPRITE.SOUNDS.EMPTY.TEXT":"Nothing found. Upload or record a sound.","SPRITE.LOAD.FAIL.MSG":"File parsing failed","SPRITE.LIBS.UPLOAD":"Upload","SPRITE.LIBS.DRAW":"Paint","SPRITE.LIBS.SCREEN":"Camera","SPRITE.COSTUMES.UPLOAD":"Upload","SPRITE.COSTUMES.DRAW":"Paint","SPRITE.COSTUMES.SCREEN":"Camera","SPRITE.BACKDROPS.UPLOAD":"Upload","SPRITE.BACKDROPS.DRAW":"Paint","SPRITE.BACKDROPS.SCREEN":"Camera","SPRITE.SOUNDS.UPLOAD":"Upload","SPRITE.SOUNDS.RECORD":"Record","SPRITE.CLASSIFY.ALL":"All","SPRITE.CLASSIFY.ANIMALS":"Animals","SPRITE.CLASSIFY.PEOPLE":"People","SPRITE.CLASSIFY.FANTASY":"Fantasy","SPRITE.CLASSIFY.PLANTS":"Plants","SPRITE.CLASSIFY.FOOD":"Food","SPRITE.CLASSIFY.BUILDINGS":"Buildings","SPRITE.CLASSIFY.TRANSPORTATION":"Transportation","SPRITE.CLASSIFY.DANCE":"Dance","SPRITE.CLASSIFY.MUSIC":"Music","SPRITE.CLASSIFY.SPORTS":"Sports","SPRITE.CLASSIFY.FASHION":"Fashion","SPRITE.CLASSIFY.PROPS":"Props","SPRITE.CLASSIFY.SCHOOL":"School","SPRITE.CLASSIFY.NATURE":"Nature","SPRITE.CLASSIFY.CITY":"City","SPRITE.CLASSIFY.OUTDOORS":"Outdoors","SPRITE.CLASSIFY.INDOORS":"Indoors","SPRITE.CLASSIFY.SPACE":"Space","SPRITE.CLASSIFY.HOLIDAYS":"Holidays","SPRITE.CLASSIFY.ICONS":"Icons","SPRITE.CLASSIFY.EFFECTS":"Effects","SPRITE.CLASSIFY.LOOPS":"Loops","SPRITE.CLASSIFY.NOTES":"Notes","SPRITE.CLASSIFY.PERCUSSION":"Percussion","SPRITE.CLASSIFY.VOICE":"Voice","SPRITE.CLASSIFY.WACKY":"Wacky","SPRITE.CLASSIFY.GRID":"Grid"}')},634:function(e){e.exports=JSON.parse('{"PROJECT.SHOW.DIALOG.TITLE":"Open","PROJECT.SAVE.DIALOG.TITLE":"Save","PROJECT.DIALOG.FILTER.NAME":"mBlock Project","PROJECT.MENU.OPEN":"Open","PROJECT.MENU.SHARE":"Share","PROJECT.MENU.RENAME":"Rename","PROJECT.MENU.COPY":"Copy","PROJECT.MENU.EXPORT":"Save to computer","PROJECT.MENU.DELETE":"Delete","PROJECT.MENU.EDITSHARED":"Go to the publish page","PROJECT.MENU.CANCELSHARE":"unshare","PROJECT.STATUS.SYNCING":"Project list syncing...","PROJECT.STATUS.SUCCESS":"Sync success","PROJECT.STATUS.NONETWORK":"Network error. Please check it.","PROJECT.STATUS.FAIL":"Sync failure. Try again.","PROJECT.STATUS.WILLUPLOAD":"Not uploaded","PROJECT.STATUS.UPLOADING":"Uploading","PROJECT.STATUS.WILLDOWNLOAD":"To be downloaded","PROJECT.DELETE":"Delete the project","PROJECT.DELETE.TEXT":"Continue to delete the project?","PROJECT.DELETE.ALSO.TEXT":"The project will also be removed from the cloud. Continue to delete it?","PROJECT.CONFIRM.LOGOUT.WILLUPLOAD.TEXT":"There is a project to be uploaded in My Project. You wont be able to sync it with the cloud if you sign out. Continue? ","PROJECT.CONFIRM.LOGOUT.SYNC.TEXT":"You wont be able to sync projects with the cloud if you sign out. Continue","PROJECT.EXPORT.LOCAL.MSG":"Your project file has been saved to {0}","PROJECT.EXPORT.MYPROJECTS.MSG":"Your project file has been saved to My Project","PROJECT.NAME":"Project Name","PROJECT.NAME.MIN.LENGTH.TEXT":"The project name can not be empty.","PROJECT.NAME.MAX.LENGTH.TEXT":"The project name can include 48 characters at most.","PROJECT.MAX.LENGTH.TEXT":"The length should not exceed 1000 characters.","PROJECT.INTRODUCTION":"Project Introduction","PROJECT.INTRODUCTION.PLACEHOLDER":"Give more details about your project. Remember to specify the original authors if you adapt, repost or borrow others projects or materials ","PROJECT.OPERATION":"How-to Guide ","PROJECT.OPERATION.PLACEHOLDER":"Tell other people how to operate your project.","PROJECT.AGREE.TEXT":"Ive read and accept Makeblocks ","PROJECT.AGREEMENT":"Community Guidelines ","PROJECT.SHARE.DELETE":"Delete the shared project?","PROJECT.SHARE.DELETE.TEXT":"The project has been shared. After you delete the project, it will be withdrawn from the Community and removed from the cloud. Continue to delete it?","PROJECT.SHARE.DELETE.ERROR":"Deletion failed","PROJECT.PUBLISH":"Share","PROJECT.SHARE.DELETE.ERROR.NETWORK":"Network error. Deletion failed.","PROJECT.SHARE.SUCCESS":"Finish sharing your project on the publish page. And there are more waiting in the ","PROJECT.SHARE.SOCIAL":"Community","PROJECT.SHARE.LOOKING":"to be explored ~","PROJECT.SHARE.ERROR.NETWORK":"Failed to share the project. Please check the network and then try again","PROJECT.CANCEL.SHARE":"Cancel the project sharing?","PROJECT.CANCEL.SHARE.ERROR.NETWORK":"Unshare failed. Please check the network and then try again.","PROJECT.CANCEL.SHARE.SUCCESS":"Unshare success","PROJECT.CANCEL.SHARE.TEXT":"The project will not be found in the Project Community after you unshare the project. Continue?","PROJECT.LIST.EMPTY.TEXT":"Your project list is empty","PROJECT.SORTBY.RECENT":"Recent"}')},635:function(e){e.exports=JSON.parse('{"MBLOCK":"","MBLOCK.TEXT":"","MENU.FILE":"","MENU.FILE.NEW":"","MENU.FILE.OPEN":"","MENU.FILE.SAVE":"","MENU.FILE.SAVEAS":"","MENU.FILE.DEMOS":"","MENU.PROJECTS":"","MENU.EDIT":"","MENU.EDIT.RESTORE":"","MENU.EDIT.TURBO":"","MENU.EDIT.TURBO.OFF":"","MENU.EDIT.SHRINK":"","MENU.EDIT.SHRINK.OFF":"","MENU.EDIT.UNDO":"","MENU.EDIT.REDO":"","MENU.HELP":"","MENU.HELP.ABOUT":"","MENU.HELP.FEEDBACK":"","MENU.HELP.UPDATER.CHECKER":"","MENU.FIRMWARE":"","MENU.LANGUAGE":"","MENU.EXIT":"","MENU.MODE.BLOCK":"","MENU.MODE.CODE":"","MENU.TOOL":"","MENU.CLOUDLIST":"","MENU.HELP.UPDATEFIRMWARE":"","MENU.HELP.GUIDE":"","IFTTT.TITLE":"IFTTT","IFTTT.CONTENT.TEXT":" IFTTT ","IFTTT.CONTENT.TEXT.BEFORE":"","IFTTT.CONTENT.TEXT.AFTER":"","BUTTON.UPGRADE.NOW.TEXT":"","BUTTON.UPGRADE.LATER.TEXT":"","BUTTON.UPGRADE.SKIP.TEXT":"","BUTTON.RESTART.NOW.TEXT":"","BUTTON.RESTART.LATER.TEXT":"","BUTTON.FIRMWARE.NOW.TEXT":"","BUTTON.FIRMWARE.LATER.TEXT":"","BUTTON.GOTO.TEXT":"","BUTTON.IKNOW.TEXT":"","BUTTON.SEE.DOCS.TEXT":"","BUTTON.GO.DOWNLOAD.TEXT":"","BUTTON.UPDATE.TEXT":"","BUTTON.UPDATE.NOT.NOW.TEXT":"","BUTTON.RETRY.TEXT":"","BUTTON.OK.TEXT":"","BUTTON.CANCEL.TEXT":"","BUTTON.NEXT.TEXT":"","BUTTON.LOGIN.TEXT":"","BUTTON.BACK.TEXT":"","BUTTON.FINISH.TEXT":"","BUTTON.SUBMIT.TEXT":"","BUTTON.CONFIRM.TEXT":"","BUTTON.CLOSE.TEXT":"","BUTTON.YES.TEXT":"","BUTTON.NO.TEXT":"","BUTTON.YES.SAVE.TEXT":"","BUTTON.NO.SAVE.TEXT":"","BUTTON.UPLOAD.TEXT":"","BUTTON.CONTINUE.CONNECT.TEXT":"","BUTTON.UPDATE.SERIAL.TEXT":"","BUTTON.UPDATE.FIRMWARE.TEXT":"","BUTTON.REGISTER.LOGIN":"/","BUTTON.ADD":"","BUTTON.REMOVE":"","BUTTON.DELETE":"","BUTTON.CREATE":"","BUTTON.LOGOUT":"","BUTTON.SHARE":"","BUTTON.GO.DOWNLOAD":"","BUTTON.STARTUP":"","BUTTON.LATER":"","BUTTON.PYTHON.EDITOR":"Python","BUTTON.CANCEL.SHARE":"","BUTTON.SHARE.CHECK":"","BUTTON.SHARE.THINK":"","BUTTON.KNOW.MORE":"","BUTTON.SKIP.TEXT":"","BUTTON.PREVIOUS.TEXT":"","BUTTON.SKIP.INTRODUCTION":"","SCANING.SERIAL":"...","SCANING.BLE":"...","SCANING.ABLE.DEVICE.TEXT":"","SHOW.CONNECTABLE.DEVICES.TEXT":"","NOTSERVER.TEXT":"","NOTSERVER.SOLUTION.TEXT":"","DOWNLOAD.NOW":"","UPLOAD.CODE.TITLE":"","UPLOAD.COMPLIE.TITLE":"","UPLOAD.COMPLIE.FAILED":"","UPLOAD.FIRMWARE.TITLE":"","UPLOAD.FIRMWARE.SELECT.TITLE":"","UPLOAD.MESSAGE.SUCCESS":"","UPLOAD.MESSAGE.FAIL":"","UPLOAD.MESSAGE.SUCCESS.FIRMAWARE":"","UPLOAD.MESSAGE.FAIL.FIRMAWARE":"","UPLOAD.DISCONNECT.MESSAGE":"","CHOOSE.DEVICE.LABEL":"","CHOOSE.FIRMWARE.LABEL":"","CHOOSE.FIRMWARE.LOCAL":"","CHOOSE.FIRMWARE.MSG":"","VERSION.TEXT":"","GRATITUDE.TEXT":"{0}","OPENSOURCE.TEXT":"","FILENAME.EMPTY":"","CONFIRM.SAVE.TITLE":"","CONFIRM.SAVE.TEXT":"","CONFIRM.SAVE.ADAPT.TEXT":"","EXPORT.SUCCESS.MSG":"","EXPORT.FAIL.MSG":"","IMPORT.FORMAT.ERROR.MSG":"","IMPORT.CONTENT.ERROR.MSG":"","IMPORT.SUCCESS.MSG":"","IMPORT.FAIL.MSG":"","DRAG.HOLDER.TEXT":"","USER.INTERNATIONAL":"","USER.DOMESTICAL":"","USER.OVERAGE":"16","USER.AGREEMENT":"","USER.AGREE.TEXT":"","USER.GUARDIAN":"","USER.GUARDIAN.TEXT":"16","USER.GUARDIAN.CONFIRM.TEXT":"/","USER.EMAIL.LOGIN":"","USER.STUDENTID.LOGIN":"","USER.LOGIN.SUCCESS.MSG":"","USER.LOGIN.FAIL.MSG":"","USER.REGISTER":"","USER.REGISTER.SUCCESS.MSG":"","USER.REGISTER.FAIL.MSG":"","USER.LOGOUT":"","USER.LOGOUT.SUCCESS.MSG":"","USER.LOGOUT.FAIL.MSG":"","USER.PROFILE":"","USER.BIND":"","USER.ASSIGN.WORK":"","USER.SUBMIT.WORK":"","USER.DELETE":"","USER.CREATE.ACCOUNT":"","USER.DELETE.ACCOUNT":"","USER.DELETE.TEXT":"","USER.DELETE.THINK":"","USER.DELETE.FAIL.MSG":"","USER.FORGET.PASSWORD":"","USER.RESET.PASSWORD":"","USER.FINDPWD.SUCCESS.MSG":"","USER.FINDPWD.FAIL.MSG":"","USER.LOGIN.EXPIRE.MSG":"","SOCIAL.LOGIN":"","OTHER.LOGIN":"","FORGET.PASSWORD":"","UPDATE.PASSWORD":"","UPDATE.PASSWORD.CURRENT":"","UPDATE.PASSWORD.NEW":"","USER.UPDATE.SUCCESS.MSG":"","USER.UPDATE.FAIL.MSG":"","REGISTER.AGREE":"","PROTOCOL.TEXT":"","NO.CODE":"","FORM.BUTTON.CODE.TEXT":"","FORM.BUTTON.CODE.SENDED":"{0} ","FORM.BUTTON.CODE.SEND.SUCCESS.MSG":":","FORM.BUTTON.CODE.SEND.FAIL.MSG":"","FORM.BUTTON.CODE.SEND.AGAIN":"","FORM.FIELD.NICKNAME.PH":"","FORM.FIELD.EMAIL":"","FORM.FIELD.EMAIL.PH":"/","FORM.FIELD.EMAIL.TYPE.MSG":"","FORM.FIELD.EMAIL.ONLY.TYPE.MSG":"","FORM.FIELD.EMAIL.OVER.TYPE.MSG":"100","FORM.FIELD.EMAIL.MSG":"","FORM.FIELD.EMAIL.USED.MSG":"","FORM.FIELD.STUDENTID.PH":"","FORM.FIELD.STUDENTID.TYPE.MSG":"","FORM.FIELD.STUDENTID.MSG":"","FORM.FIELD.PASSWORD":"","FORM.FIELD.PASSWORD.PH":"","FORM.FIELD.PASSWORD.NEW.PH":"","FORM.FIELD.PASSWORD.OLD.PH":"","FORM.FIELD.PASSWORD.OLD.MSG":"","FORM.FIELD.PASSWORD.MSG":"6-20","FORM.FIELD.PASSWORD.MIN.MSG":" 6 ","FORM.FIELD.PASSWORD.MAX.MSG":" 20 ","FORM.FIELD.PASSWORD.CONTACT.MSG":"","FORM.FIELD.CODE.PH":"","FORM.FIELD.CODE.MSG":"","FORM.FIELD.CODE.CURRENT.MSG":"","RENAME.ERR.NULL.MSG":"","RENAME.ERR.PREFIX.MSG":"+ - .","RENAME.ERR.CONTAIN.MSG":" \\\\ / : * ? \\" < > | @ , # $ & ( ) ","RENAME.ERR.KEY.MSG":"","RENAME.ERR.EXIST.MSG":"","NETWORK.ERR.MSG":"","SOCIAL.WECHAT":"","SOCIAL.QQ":"QQ","SOCIAL.GOOGLE":"","MSG.10001":"!","MSG.10002":"","MSG.10003":"!","MSG.10004":"!","MSG.10005":"!","MSG.10006":"!","MSG.10007":"Uid !","MSG.10008":"!","MSG.10009":"!","MSG.10010":" Uid!","MSG.10011":"!","MSG.10012":"!","MSG.10013":"!","MSG.10014":"!","MSG.10015":"!","MSG.10016":"!","MSG.10017":"!","MSG.10018":"!","MSG.10101":"!","MSG.10102":"!","MSG.10103":"QQ !","MSG.10104":"Facebook !","MSG.10105":"Google !","MSG.10106":" state !","MSG.10107":"!","MSG.20001":"!","MSG.20002":"!","MSG.20003":" JSON !","MSG.20004":"!","MSG.20005":"!","MSG.20006":"","MSG.20007":"","MSG.20008":"","MSG.20009":"","MSG.30001":"","MSG.30002":" redis ","MSG.30003":"","MSG.30004":"","MSG.30005":"","MSG.30006":"","MSG.30007":"","MSG.30008":"","MSG.99999":"","MSG.404":"404","MSG.500":"500","MSG.503":"503","MSG.-1":"-1","WEBGL.NOT.SUPPORT":"","BLOCK.USE.NEED.LOGIN":"","BLOCK.USE.NEED.LOGINANDOPEN":"","DOWNLOAD.LOADING.TEXT":"...","DOWNLOAD.LOADING.FAILURE":"","DOWNLOAD.LOADING.NETWORK.DISCONNECT":"","MENU.FILE.SAVEMY":"","MENU.FILE.LOCALFILE":"","MENU.FILE.SAVEING":"...","MENU.FILE.SAVE.SUCCESS":"","MENU.FILE.SAVE.FAIL":"","MENU.FILE.UPLOAD.FAIL":"","MENU.FILE.SAVE.NAME":"","FORM.FIELD.NEWNAME.MAX.MSG":"48","FORM.FIELD.NEWNAME.REQUIRE.MSG":"","DOWNLOAD.LOADING.RETRY":"","USER.LOGIN.TO_LOGIN_TIP":"","MENU.FILE.PUBLISH.SUCCESS":"","MENU.FILE.PUBLISH.UPDATE":"","MENU.FILE.NEW.WEB":"","MENU.FILE.OPEN.WEB":"","MENU.FILE.SAVE.WEB":"","MENU.FILE.SAVEAS.WEB":"","MENU.FILE.IMPORT":"","MENU.FILE.EXPORT":"","MENU.FILE.SAVELOCAL":"","USER.HOME_PAGE":"","USER.CLOUD_SERVICE_KEY":"","USER.YOUR_CLOUD_SERVICE_KEY":"","USER.CLOUD_SERVICE_KEY_TIP":"","USER.COPY_CLOUD_SERVICE_KEY":"","USER.COPY_SUCCESS":"","BROWSER.COMPATIBLE_TIP":"Chrome","BROWSER.COMPATIBLE_TIP.DOWNLOAD":"","MENU.FILE.VIEW_WORKS":"","MENU.FILE.ADAPT.SAVE":"","MENU.FILE.ADAPT":"","MENU.NO.LOGIN.TOOLTIP":"~","PROJECT.LOADING_TIP":"...","DEVICE.STATUS.UPDATING":"...","DEVICE.STATUS.DOWNLOADING":"...","DEVICE.STATUS.REOPEN":"","DEVICE.INSTALL.STATUS.FAIL":"{0} ","DEVICE.UPDATE.STATUS.FAIL":"{0} ","MENU.LANG.CHECK.UPDATE":"","MENU.LANG.CHECK.UPDATE.TITLE":"","LANG.CHECKER.NETWORK.ERROR":"","LANG.CHECKER.DOING":"","LANG.CHECKER.SUCCESS":"","LANG.CHECKER.IS.LATEST":"","MENU.MAKEX":"","MENU.COURSES":"","MENU.TUTORIAL":"","MENU.LEARNING.CENTER":"","BUTTON.CHART.DOWNLOAD":"","BUTTON.CHART.TABLE":"","BUTTON.CHART.LINE":"","BUTTON.CHART.BAR":"","MESSAGE.CHART.REATCHMAXXAXISDATA":"{0}","MESSAGE.CHART.REATCHMAXLENGEND":"{0}","CHART.DEFAULT.XAXISNAME":"","CHART.DEFAULT.YAXISNAME":"","MENU.FILE.PUBLISH.TO":"...","PROJECT.SHARE.TO.TITLE":"","ACCOUNT.SWITCH.TO":"","IMPORT.EXTINPROJECT.FAIL":"","DEVICE.BECOME.DEVELOPER":"","DEVICE.CREATE":"","DEVICE.MOREINFO":"","MENU.OTHER.ABOUT":"","MENU.OTHER.JOIN":"","MENU.OTHER.VERSION.INTRODUCE":"{0} ","MENU.OTHER.DRIVER.INSTALL":"","MENU.OTHER.DEFAULT.EDITOR":"","DEVICE.DEFAULT.SET.SUCCESS":"","DEVICE.DEFAULT":"","DEVICE.DEFAULT.SET":"","BLOCK.HELP.NO.HELP":"","BLOCK.HELP.EDIT.TIME":"","MENU.EDIT.COMPANION.OPEN":"","MENU.EDIT.COMPANION.CLOSE":"","COMPANION.CATEGORY.DISABLE":"{0}","USER.ACCOUNT":"","DEFAULT.EDITOR.TEXT":"","MBLOCK.LINK":"","MCODE.LINK":"Python ","MCODE.LINK.TIP":" Python ","MCODE.LINK.HELP":"","MLINK.NOTICE.MODAL.TITLE":" Python ","MLINK.NOTICE.MODAL.DESC":"mLink 2  Python ","MLINK.NOTICE.MODAL.TIP":"mLink 2  mLink","MBLOCK.CHARACTER.TITLE":" v{0} ","MBLOCK.CHARACTER.DESC1":" AIoT Python ","MBLOCK.CHARACTER.DESC2":" ","MBLOCK.CHARACTER.DESC3":" Python  Python 3  MicroPython","MBLOCK.CHARACTER.KNOW.MORE.PARAMS":"","MBLOCK.CHARACTER.STEP1.TITLE":" AIoT Python ","MBLOCK.CHARACTER.STEP3.TITLE":" Python ","MBLOCK.CHARACTER.STEP3.DESC":"{0}"}')},636:function(e){e.exports=JSON.parse('{"CALIBRATE.COLOR.TITLE":"","CALIBRATE_COLOR_DESCRIPTION":["","","",""],"CALIBRATE.GYRO.TITLE":"","CALIBRATE_GYRO_DESCRIPTION":["",""],"CALIBRATE.BUTTON.TEXT":"","CALIBRATE.BUTTON.TEXT.LOADING":"...","CALIBRATE.MSG.SUCCESS":"","CALIBRATE.MSG.FAIL":""}')},637:function(e){e.exports=JSON.parse('{"FEEDBACK.MODAL.TITLE":"","FEEDBACK.FORM.PROFESSION":"","FEEDBACK.PROFESSION.LIST":["","","",""],"FEEDBACK.FORM.DESCRIPTION":"/","FEEDBACK.FORM.DESCRIPTION.REQUIRE":"/","FEEDBACK.FORM.ATTACHMENT":"","FEEDBACK.FORM.ATTACHMENT.UPLOAD.TEXT":"","FEEDBACK.FORM.ATTACHMENT.UPLOAD.MAXSIZE":" 10M","FEEDBACK.FORM.CONTACT":"","FEEDBACK.FORM.CALL":"","FEEDBACK.ADD.SUCCESS":"","FEEDBACK.ADD.FAILED":"","FEEDBACK.WECHAT.AFTER.SALE":"","FEEDBACK.FOLLOW.WECHAT":""}')},638:function(e){e.exports=JSON.parse('{"UPDATER.CHECKER.TITLE":"","UPDATER.CHECKER.CHECKING":"......","UPDATER.CHECKER.LATEST.TITLE":"","UPDATER.CHECKER.LATEST.TEXT":"","UPDATER.CHECKER.NETWORK.TITLE":"","UPDATER.CHECKER.NETWORK.TEXT":"","UPDATER.CHECKER.CONTENT.TITLE":"","UPDATER.CHECKER.CONTENT.VERSION.BEFORE":"","UPDATER.CHECKER.CONTENT.FEATURES.LABEL":"","UPDATER.RESTART.TITLE":"","UPDATER.RESTART.CONTENT.TITLE":"","UPDATER.RESTART.CONTENT.TEXT":"","UPDATER.RESTART.CONTENT.TITLE.WIN":"","UPDATER.RESTART.CONTENT.TEXT.WIN":"","UPDATER.FIRMWARE.TITLE":"","UPDATER.FIRMWARE.CONTENT.TITLE":"","UPDATER.FIRMWARE.CONTENT.TEXT":"","UPDATER.FIRMWARE.CONTENT.TEXT.BLE":" USB ","UPDATER.FIRMWARE.SUCCESS.TITLE":"","UPDATER.FIRMWARE.SUCCESS.CONTENT.TITLE":"","UPDATER.FIRMWARE.SUCCESS.CONTENT.TEXT":"","UPDATER.FIRMWARE.FAILED.TITLE":"","UPDATER.FIRMWARE.FAILED.CONTENT.TITLE":"","UPDATER.FIRMWARE.FAILED.CONTENT.TIPS":"","UPDATER.FIRMWARE.LOADING.TITLE":"...","UPDATER.FIRMWARE.LOADING.CONTENT.TEXT":"","UPDATER.PROGRESS.ERROR":"","UPDATER.PROGRESS.PERCENT":"{0}%","UPDATER.REMIND.TEXT":"","UPDATER.NOT.SUPPORT.UPDATE":"","UPDATER.FRIMWARE.M.TITLE":"","UPDATER.FRIMWARE.F.DEVICE.TEXT":"","UPDATER.FRIMWARE.F.VERSION.TEXT":"","UPDATER.FRIMWARE.NOTCONNECT":"","UPDATER.NO.NEED.UPDATE":"","UPDATER.CANT.USE.BLE.TITLE":"","UPDATER.CANT.USE.BLE.TEXT":" USB ","UPDATE.FACTORY.DATA.RESET":"","UPDATE.FACTORY.DATA.LATEST":""}')},639:function(e){e.exports=JSON.parse('{"PROGRAM.DEMOS.TITLE":"","PROGRAM.DEMOS.EVENT":""}')},64:function(e,t,n){"use strict";n.r(t),n.d(t,"onNew",(function(){return l})),n.d(t,"onOpen",(function(){return d})),n.d(t,"onExport",(function(){return p})),n.d(t,"onImport",(function(){return u})),n.d(t,"onClearProjects",(function(){return h})),n.d(t,"onSetProjectPlatformType",(function(){return m})),n.d(t,"setProjectCloudThirdPlatform",(function(){return f})),n.d(t,"onInitProjectInfo",(function(){return E})),n.d(t,"onSetLoadingPageState",(function(){return g})),n.d(t,"onShortcutkey",(function(){return T}));var o=n(21),a=n(30),r=n(19),i=n(3),s=n(13),c=n(5);const l=()=>{"/"!=s.a.location.pathname&&r.a.setSaved(),o.a.dispatch(a.a.createProject())},d=async(e,t,n={})=>{o.a.dispatch(a.a.openProject(e,t,n))},p=()=>{o.a.dispatch(a.a.exportProject(!0))},u=()=>{o.a.dispatch(a.a.openProject(null,c.a.PROJECT_TYPE.LOCAL))},h=()=>{o.a.dispatch(a.a.clearProjects())},m=(e,t)=>{o.a.dispatch(a.a.setProjectPlatformType(e,t))},f=e=>{o.a.dispatch(a.a.setProjectCloudThirdPlatform(e))},E=()=>{o.a.dispatch(a.a.initProjectInfo())},g=e=>{o.a.dispatch(a.a.setLoadingPageState(e))},T=e=>{const{project:t,intlr:n}=o.a.getState(),{name:i,isSelfProject:l,projectId:d}=t;"save"===e&&"/"===s.a.location.pathname&&(t.projectType===c.a.PROJECT_TYPE.LOCAL?o.a.dispatch(a.a.exportProject(!1)):l?o.a.dispatch(a.a.saveProject(!1,{name:i})):o.a.dispatch(a.a.saveProject(!1,{name:`${i}-${n.messages["MENU.FILE.ADAPT"]}`,isSelfProject:!1,isShare:!0,projectId:r.a.getCorrectId(d)}))),"saveas"===e&&"/"===s.a.location.pathname&&s.a.replace("/web/saveas")};t.default=()=>{i.default.on("MscratchDidMount",()=>{setTimeout(()=>{r.a.setSaved()},1200)})}},640:function(e){e.exports=JSON.parse('{"CONNECT.TITLE":"","CONNECT.ONLY.TIP":"","CONNECT.PROBLEM.TIP":"","CONNECT.SERIAL":"USB","CONNECT.HID":"2.4G","CONNECT.HID.DESCRIPTION":"1. 2.4g<br>2. <br>3. 2.4G<br>4. 2.4 g","CONNECT.BLE":"","CONNECT.WIFI":"Wi-Fi","CONNECT.BUTTON.TEXT":" ","CONNECT.CHOOSE.SERIAL":"","CONNECT.CHOOSE.BLE":"","CONNECT.LIST.EMPTY":"","CONNECT.STATUS.CONNECTED":"","CONNECT.STATUS.DISCONNECTED":"","CONNECT.MESSAGE.SUCCESS":"","CONNECT.MESSAGE.FAIL":"","CONNECT.HELPLINK.TEXT":"","CONNECT.UNABLE.TITLE":"","CONNECT.UNABLE.TEXT":"{0}{0}\\n\\t\\n\\t- \\n\\t- \\n\\n","CONNECT.LEARN.MORE.TEXT":"","CONNECT.CONNECTED":"","CONNECT.FIRMWARE.BLE.WARN":"USB","CONNECT.HELPER.TITLE":"","CONNECT.NO.SUPPORT.CH340":"CH340\\n","CONNECT.NO.SUPPORT.ARM":"ARM\\n","CONNECT.BLE.DRIVER.UPDATE":"\\n {0} mLink ","CONNECT.NO.SUPPORT.BLE":"","CONNECT.BLE.HELP":""}')},641:function(e){e.exports=JSON.parse('{"CODEY":"","ROCKY":"","CODEY_ROCKY":"","NEURON":"","MBOT":"mBot","STAGE":"","AI":"AI","IOT":"IoT","HALOCODE":""}')},642:function(e){e.exports=JSON.parse('{"HARDDRIVER.DRIVER_NOT_START":"","HARDDRIVER.MLINK_NOT_TURN_ON":"mLink","HARDDRIVER.MSG":"mBlock Web","HARDDRIVER.DOWNLOAD":"","HARDDRIVER.INSTALL_MLINK":"mLink","HARDDRIVER.OK_BUTTON":"","HARDDRIVER.CANCEL_BUTTON":"","HARDDRIVER.MLINK_MSG":" mLink ","BUTTON.REFRESH.TEXT":"","HARDDRIVER.DOWNLOAD.FAIL":"","HARDDRIVER.DRIVER.UPDATE":"","HARDDRIVER.DRIVER.CHECKER.MSG":" mLink","HARDDRIVER.DRIVER.NEW.CHARACTER":"","PROMPT.TITLE":"","HARDDRIVER.NO.SERVER.TEXT":""}')},643:function(e){e.exports=JSON.parse('{"EXTENSION.TITLE":"","EXTENSION.EMPTY":"...","EXTENSION.ADDED":"","EXTENSION.REMOVED":"","EXTENSION.REMOVED.FAIL":"","EXTENSION.REMOVED.CONFIRM":"","EXTENSION.INSTALL.SUCCESS":"","EXTENSION.INSTALL.FAIL":"","EXTENSION.UPDATE.SUCCESS":"","EXTENSION.UPDATE.FAIL":"","EXTENSION.NEW.TEXT":"","EXTENSION.UPDATE.TEXT":"","DEVICE.NEW.TEXT":"","DEVICE.UPDATE.TEXT":"","EXTENSION.NOTSUPPORT.TEXT":".mext","EXTENSION.DEVELOPER":"","EXTENSION.DEVELOPER.OFFICIAL":"","EXTENSION.DEVELOPER.TIP.OFFICIAL":"","EXTENSION.DEVELOPER.TIP.UNOFFICIAL":"","EXTENSION.EMPTY.TIP":"","EXTENSION.DEVICE.EMPTY.TIP":"","EXTENSION.DEVICE.EXT.EMPTY.TIP":"","EXTENSION.MORE.TEXT":"","EXTENSION.BECOME.DEVELOPER":"","EXTENSION.TAB.PREVIEW":"","EXTENSION.TAB.ONLINE":"","EXTENSION.TAB.SPRITE":"","EXTENSION.TAB.DEVICE":""}')},644:function(e){e.exports=JSON.parse('{"SPRITE.LIBS.TITLE":"","SPRITE.LIBS.USER.TITLE":"","SPRITE.COSTUMES.TITLE":"","SPRITE.COSTUMES.USER.TITLE":"","SPRITE.BACKDROPS.TITLE":"","SPRITE.BACKDROPS.USER.TITLE":"","SPRITE.SOUNDS.TITLE":"","SPRITE.SOUNDS.USER.TITLE":"","SPRITE.DEVICES.TITLE":"","SPRITE.DEVICES.USER.TITLE":"","SPRITE.UPLOAD.MSG":"\\"{0}\\" JPGPNG  SVG ","SPRITE.UPLOAD.SIZE.LIMIT.MSG":"\\"{0}\\"2MB","SPRITE.SVG.UPLOAD.SIZE.LIMIT.MSG":"\\"{0}\\", 500KBsvg","SPRITE.SOUNDS.UPLOAD.MSG":"\\"{0}\\" MP3WAV ","SPRITE.SOUNDS.UPLOAD.SIZE.LIMIT.MSG":"\\"{0}\\"20MB","SPRITE.UPLOAD.EXISTS.MSG":"\\"{0}\\" ","SPRITE.SEARCH.TEXT":"","SPRITE.SEARCH.EMAMPLE.TEXT":"~","SPRITE.LIBS.EMPTY.TEXT":"","SPRITE.SOUNDS.EMPTY.TEXT":"","SPRITE.LOAD.FAIL.MSG":"","SPRITE.LIBS.UPLOAD":"","SPRITE.LIBS.DRAW":"","SPRITE.LIBS.SCREEN":"","SPRITE.COSTUMES.UPLOAD":"","SPRITE.COSTUMES.DRAW":"","SPRITE.COSTUMES.SCREEN":"","SPRITE.BACKDROPS.UPLOAD":"","SPRITE.BACKDROPS.DRAW":"","SPRITE.BACKDROPS.SCREEN":"","SPRITE.SOUNDS.UPLOAD":"","SPRITE.SOUNDS.RECORD":"","SPRITE.CLASSIFY.ALL":"","SPRITE.CLASSIFY.ANIMALS":"","SPRITE.CLASSIFY.PEOPLE":"","SPRITE.CLASSIFY.FANTASY":"","SPRITE.CLASSIFY.PLANTS":"","SPRITE.CLASSIFY.FOOD":"","SPRITE.CLASSIFY.BUILDINGS":"","SPRITE.CLASSIFY.TRANSPORTATION":"","SPRITE.CLASSIFY.DANCE":"","SPRITE.CLASSIFY.MUSIC":"","SPRITE.CLASSIFY.SPORTS":"","SPRITE.CLASSIFY.FASHION":"","SPRITE.CLASSIFY.PROPS":"","SPRITE.CLASSIFY.SCHOOL":"","SPRITE.CLASSIFY.NATURE":"","SPRITE.CLASSIFY.CITY":"","SPRITE.CLASSIFY.OUTDOORS":"","SPRITE.CLASSIFY.INDOORS":"","SPRITE.CLASSIFY.SPACE":"","SPRITE.CLASSIFY.HOLIDAYS":"","SPRITE.CLASSIFY.ICONS":"","SPRITE.CLASSIFY.EFFECTS":"","SPRITE.CLASSIFY.LOOPS":"","SPRITE.CLASSIFY.NOTES":"","SPRITE.CLASSIFY.PERCUSSION":"","SPRITE.CLASSIFY.VOICE":"","SPRITE.CLASSIFY.WACKY":"","SPRITE.CLASSIFY.GRID":""}')},645:function(e){e.exports=JSON.parse('{"PROJECT.SHOW.DIALOG.TITLE":"","PROJECT.SAVE.DIALOG.TITLE":"","PROJECT.DIALOG.FILTER.NAME":"","PROJECT.MENU.OPEN":"","PROJECT.MENU.SHARE":"","PROJECT.MENU.RENAME":"","PROJECT.MENU.COPY":"","PROJECT.MENU.EXPORT":"","PROJECT.MENU.DELETE":"","PROJECT.MENU.EDITSHARED":"","PROJECT.MENU.CANCELSHARE":"","PROJECT.STATUS.SYNCING":"...","PROJECT.STATUS.SUCCESS":"","PROJECT.STATUS.NONETWORK":"","PROJECT.STATUS.FAIL":"","PROJECT.STATUS.WILLUPLOAD":"","PROJECT.STATUS.UPLOADING":"","PROJECT.STATUS.WILLDOWNLOAD":"","PROJECT.DELETE":"","PROJECT.DELETE.TEXT":"","PROJECT.DELETE.ALSO.TEXT":"","PROJECT.CONFIRM.LOGOUT.WILLUPLOAD.TEXT":"\\"\\"","PROJECT.CONFIRM.LOGOUT.SYNC.TEXT":"","PROJECT.EXPORT.LOCAL.MSG":" {0}","PROJECT.EXPORT.MYPROJECTS.MSG":"","PROJECT.NAME":"","PROJECT.NAME.MIN.LENGTH.TEXT":"","PROJECT.NAME.MAX.LENGTH.TEXT":"48","PROJECT.MAX.LENGTH.TEXT":"1000","PROJECT.INTRODUCTION":"","PROJECT.INTRODUCTION.PLACEHOLDER":"","PROJECT.OPERATION":"","PROJECT.OPERATION.PLACEHOLDER":"","PROJECT.AGREE.TEXT":"Makeblock","PROJECT.AGREEMENT":"","PROJECT.SHARE.DELETE":"","PROJECT.SHARE.DELETE.TEXT":"","PROJECT.SHARE.DELETE.ERROR":"","PROJECT.SHARE.DELETE.ERROR.NETWORK":"","PROJECT.PUBLISH":"","PROJECT.SHARE.SUCCESS":"","PROJECT.SHARE.SOCIAL":"","PROJECT.SHARE.LOOKING":"~","PROJECT.SHARE.ERROR.NETWORK":"","PROJECT.CANCEL.SHARE.ERROR.NETWORK":"","PROJECT.CANCEL.SHARE":"","PROJECT.CANCEL.SHARE.SUCCESS":"","PROJECT.CANCEL.SHARE.TEXT":"","PROJECT.LIST.EMPTY.TEXT":"","PROJECT.SORTBY.RECENT":""}')},646:function(e,t,n){var o={"./dev/domain.json":647,"./preview/domain.json":648,"./production/domain.json":649,"./test/domain.json":650};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=646},647:function(e){e.exports=JSON.parse('{"passport2":{"zh":"https://passport-dev.makeblock.com/","en":"https://passport-dev.mblock.cc/"},"iot":"https://iothub-dev.makeblock.com/","weather":"https://mweather-dev.makeblock.com/","air":{"zh":"http://msapi-dev.makeblock.com/","en":"http://msapi-dev.makeblock.com/"},"mblock":"https://apimblock-dev.makeblock.com/","mblock_edu":"https://apimblock-dev.makeblock.com/","qiniu":"http://up-z2.qiniu.com/","gateway":"https://classroom-dev.makeblock.com/","cloud":{"zh":"https://mblock-dev.makeblock.com/","en":"https://planet-dev.makeblock.com/"},"ext":{"zh":"//extapi-dev.makeblock.com/api/v2/","en":"//extapi-dev.makeblock.com/api/v2/"},"extservice":{"zh":"//extservice-dev.makeblock.com/","en":"//extservice-dev.makeblock.com/"},"box":"http://platforms-test.makeblock.com/","steam-platform":"https://org-api-dev.makeblock.com/"}')},648:function(e){e.exports=JSON.parse('{"passport2":{"zh":"https://passport2.makeblock.com/","en":"https://passport2.mblock.cc/"},"iot":"https://iothub.makeblock.com/","weather":"https://mweather.makeblock.com/","air":{"zh":"https://msapi.makeblock.com/","en":"https://msapi.mblock.cc/"},"mblock":"https://apimblock.makeblock.com/","mblock_edu":"https://apimblock-pre.makeblock.com/","qiniu":"https://up-z2.qiniu.com/","gateway":"https://classroomtest.makeblock.com/","cloud":{"zh":"https://mblock.makeblock.com/","en":"https://planet.mblock.cc/"},"ext":{"zh":"https://extapi.makeblock.com/api/v2/","en":"https://extapi.mblock.cc/api/v2/"},"extservice":{"zh":"https://extservice.makeblock.com/","en":"https://extservice.mblock.cc/"},"box":"https://platforms.makeblock.com/","steam-platform":"https://org-api-pre.makeblock.com/"}')},649:function(e){e.exports=JSON.parse('{"passport2":{"zh":"https://passport2.makeblock.com/","en":"https://passport2.mblock.cc/"},"iot":"https://iothub.makeblock.com/","weather":"https://mweather.makeblock.com/","air":{"zh":"https://msapi.makeblock.com/","en":"https://msapi.mblock.cc/"},"mblock":"https://apimblock.makeblock.com/","mblock_edu":"https://apimblock.makeblock.com/","qiniu":"https://up-z2.qiniu.com/","gateway":"https://classroomtest.makeblock.com/","cloud":{"zh":"https://mblock.makeblock.com/","en":"https://planet.mblock.cc/"},"ext":{"zh":"https://extapi.makeblock.com/api/v2/","en":"https://extapi.mblock.cc/api/v2/"},"extservice":{"zh":"https://extservice.makeblock.com/","en":"https://extservice.mblock.cc/"},"box":"https://platforms.makeblock.com/","steam-platform":"https://org-api.makeblock.com/"}')},65:function(e,t,n){"use strict";n.r(t);var o=n(223),a=n(218),r=n(23);var i=new class{constructor(){this.domain=r.default.domainconfig.gateway;r.default.configToRequestAction.call(this,{token:{method:"post",url:"Qiniu/GetUploadToken"},url:{method:"post",url:"Qiniu/GetDownloadUrl"}},r.default)}},s=n(140),c=n(19),l=n(4),d=n.n(l),p=n(5),u=n(22);var h=new class{constructor(){this.connectFilter=(new Map).set(p.a.CONNECT_TYPE.SERIAL,this.filterSerial.bind(this)).set(p.a.CONNECT_TYPE.BLE,this.filterBle.bind(this)).set(p.a.CONNECT_TYPE.HID,this.filterHid.bind(this)).set(p.a.CONNECT_TYPE["24G"],this.filter24G.bind(this)).set(p.a.CONNECT_TYPE.WIFI,this.filterWifi.bind(this))}filterSerial(e,t){const n=this.filterSerialByOption(e,t);return this.filterSerialBySystem(n)}filterSerialByOption(e,t){const n=t.vendorId&&t.vendorId.toLowerCase(),o=t.manufacturer&&t.manufacturer.toLowerCase(),a=[];if(d.a.isString(n)){a.push(n);const e=parseInt(n);isNaN(e)||a.push(e),n.startsWith("0x")&&a.push(n.replace("0x",""))}else if(a.push(n.toString()),a.push(n),d.a.isNumber(n)){const e=n.toString(16);a.push(e),a.push(`0x${e}`)}return d.a.filter(e,e=>{const t=-1!==a.indexOf(e.vendorId.toLowerCase())||-1!==a.indexOf(e.productId.toLowerCase());return o?t||-1!==e.manufacturer.toLowerCase().indexOf(o):t})}filterSerialBySystem(e){const t=/tty\.usbserial-/g,n=[];return e.forEach(o=>{const{comName:a}=o;if(t.test(a)){const r=a.replace(t,"tty.wchusbserial");0===e.filter(e=>e.comName===r).length&&n.push(o)}else-1===d.a.indexOf(n.map(e=>e.comName),a)&&n.push(o)}),n}filterBle(e,t){const{localName:n}=t;if(!n)return this.sortBle(e);const o=d.a.filter(e,e=>e.localName&&-1!==e.localName.toLowerCase().indexOf(n.toLowerCase()));return this.sortBle(o)}sortBle(e){return e.sort((e,t)=>e.rssi!==t.rssi?t.rssi-e.rssi:t.localName-e.localName)}filterHid(e,t){if(!Array.isArray(e))return[];let n=1046,o=65535;return t.vendorId&&t.productId&&(n=Number(t.vendorId),o=Number(t.productId)),e.filter(e=>e.vendorId===n&&e.productId===o)}filter24G(e,t){if(!Array.isArray(e))return[];let n=1046,o=65535;return t&&t.vendorId&&t.productId&&(n=Number(t.vendorId),o=Number(t.productId)),e.filter(e=>e.vendorId===n&&e.productId===o)}filterWifi(e,t){return e}filterList(e,t){const n=Object(u.b)();let o=null;try{o=n.config.options.connect[e]}catch(e){return t}return this.connectFilter.get(e)(t,o)||t}};const m={},f={add:{domain:r.default.domainconfig.mblock,method:"post",url:"mblock/feedback"}};r.default.configToRequestAction.call(m,f,r.default);var E=m,g=n(137),T=n(14),b=n(7),S=n(38),O=n.n(S);var w=new class{constructor(){this.domain="",this.timer=null,this.spriteList=[];const e={sprites:{method:"get",local:!0,loadJosn:!0,url:"static/sprites/scratch/sprites.json"},mbsprites:{method:"get",local:!0,loadJosn:!0,url:"static/sprites/makeblock/sprites.json"},customizeSprites:{method:"get",local:!0,loadJosn:!0,url:"static/sprites/customize/sprites.json"},costumes:{method:"get",local:!0,loadJosn:!0,url:"static/sprites/scratch/costumes.json"},mbcostumes:{method:"get",local:!0,loadJosn:!0,url:"static/sprites/makeblock/costumes.json"},customizeCostumes:{method:"get",local:!0,loadJosn:!0,url:"static/sprites/customize/costumes.json"},backdrops:{method:"get",local:!0,loadJosn:!0,url:"static/sprites/scratch/backdrops.json"},mbbackdrops:{method:"get",local:!0,loadJosn:!0,url:"static/sprites/makeblock/backdrops.json"},customizeBackdrops:{method:"get",local:!0,loadJosn:!0,url:"static/sprites/customize/backdrops.json"},sounds:{method:"get",local:!0,loadJosn:!0,url:"static/sprites/scratch/sounds.json"},mbsounds:{method:"get",local:!0,loadJosn:!0,url:"static/sprites/makeblock/sounds.json"},customizeSounds:{method:"get",local:!0,loadJosn:!0,url:"static/sprites/customize/sounds.json"}};r.default.configToRequestAction.call(this,e,r.default)}custom(e){return new Promise((t,n)=>{T.c.read(O.a.join(b.b.userSpriteFilePath,b.b.spriteCustom[e]).replace(/\\/g,"/")).then(o=>{try{if(o&&o.data){let n=[];const a=o.data.map(e=>({md5:e.md5,src:O.a.join(b.b.userSpriteFilePath,e.md5)})),r=O.a.join(b.b.userSpriteFilePath,b.b.spriteCustom[e]);T.c.searchExistByJson(b.b.userSpriteFilePath,a,!0,r).then(({exists:e})=>{try{n=o.data.filter(t=>-1!==e.indexOf(t.md5)),t(n)}catch(e){t(o.data)}})}else t([])}catch(e){n(e)}})})}searchExistByJson(e,t,n,o){return new Promise((a,r)=>{T.c.searchExistByJson(e,t,n,o).then(({exists:e})=>{try{const t=e.length>0;a(t)}catch(e){r(e)}})})}searchExistInJson(e,t){return new Promise((n,o)=>{T.c.searchExistInJson(e,t).then(e=>{try{const t=e.length>0;n(t)}catch(e){o(e)}})})}write(e,t,n){return new Promise((o,a)=>{this.spriteList.push(e),clearTimeout(this.timer),this.timer=setTimeout(()=>{const e=d.a.cloneDeep(this.spriteList),r=[];if(r.push({opts:{path:O.a.join(b.b.userSpriteFilePath,b.b.spriteCustom[t]),isAppend:!0,sync:!0,method:n},data:e}),t===p.a.SPRITE_TYPE.USER_LIBS&&"remove"!==n){let t=[];e.forEach(e=>{t.push({name:e.name,md5:e.md5,type:"costume"})}),r.push({opts:{path:O.a.join(b.b.userSpriteFilePath,b.b.spriteCustom[p.a.SPRITE_TYPE.USER_COSTUMES]),isAppend:!0,sync:!0,method:n},data:t})}try{this.spriteList=[],T.c.writeJson(r).then(e=>{o(e)},e=>{a(e)})}catch(t){this.spriteList=e.concat(this.spriteList),a(t)}},1e3)})}upload(e){return T.c.uploadToLocal({path:[b.b.userSpriteBasepath,e.md5]},e.source,e.property)}remove(e){return T.c.removeFromLocal({path:[b.b.userSpriteBasepath,e.md5]})}async merge(e,t){const n=O.a.join(b.b.userSpriteFilePath,b.b.spriteCustom[p.a.SPRITE_TYPE.USER_LIBS]);try{const o=await T.c.read(n),a=JSON.parse(o.data);if(e=d.a.sortBy(e),d.a.isArray(a)){const o=[];let r=[];return a.forEach((n,a)=>{-1===e.indexOf(a)?(o.push(n),t===a&&(t=o.length-1)):r=r.concat(n.json.costumes)}),o[t].json.costumes=o[t].json.costumes.concat(r),await T.c.write(n,JSON.stringify(o))}}catch(e){}}getpaginationSettings(e,t){let n,o,a,r=e.defaultPageSize,i=t.length,s=i/r,c=i%r;return s>e.current?(s=e.current,n=(s-1)*r,o=s*r,a=e.current):d.a.isEmpty(t)||0!==c?(s=Math.floor(s)+1,n=(s-1)*r,o=n+c,a=s):(n=1===s?0:(s-1)*r,o=s*r,a=s),{signStart:n,signEnd:o,current:a}}},I=n(15);const C={},v={getContent:{domain:r.default.domainconfig.extservice[I.a.getInternational],method:"get",url:"api/publish/ext/doc?n=:type&opcode=:opcode&lang=:lang"}};r.default.configToRequestAction.call(C,v,r.default);var R=C;t.default={UserService:o.a,IotService:a.a,QiniuService:i,OssService:s.a,ProjectService:c.a,ConnectService:h,Feedback:E,Extension:g.a,Sprite:w,BlockHelp:R}},650:function(e){e.exports=JSON.parse('{"passport2":{"zh":"https://passport-test.makeblock.com/","en":"https://passport-test.mblock.cc/"},"iot":"https://iothub-test.makeblock.com/","weather":"https://mweather-test.makeblock.com/","air":{"zh":"http://msapi-test.makeblock.com/","en":"http://msapi-test.mblock.cc/"},"mblock":"https://apimblock-test.makeblock.com/","mblock_edu":"https://apimblock-test.makeblock.com/","qiniu":"http://up-z2.qiniu.com/","gateway":"https://classroom-test.makeblock.com/","cloud":{"zh":"https://mblock-test.makeblock.com/","en":"https://community-test.mblock.cc/"},"ext":{"zh":"http://extapi-test.makeblock.com/api/v2/","en":"http://extapi-test.mblock.cc/api/v2/"},"extservice":{"zh":"http://extservice-test.makeblock.com/","en":"http://extservice-test.mblock.cc/"},"box":"http://platforms-test.makeblock.com/","steam-platform":"https://org-api-test.makeblock.com/"}')},651:function(e,t,n){var o={"./dev/link.json":652,"./preview/link.json":653,"./production/link.json":654,"./test/link.json":655};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=651},652:function(e){e.exports=JSON.parse('{"connect_faq":{"zh":"http://www.mblock.cc/doc/zh/faq/mblock5cheng-xiao-ben-faq.html","en":"http://www.mblock.cc/doc/en/faq/mblock-5-+-codey-rocky-faq.html"},"faq":{"zh":"http://www.mblock.cc/doc/zh/faq/mblock5cheng-xiao-ben-faq.html","en":"http://www.mblock.cc/doc/en/faq/mblock-5-+-codey-rocky-faq.html"},"guide":{"zh":"http://www.mblock.cc/doc/zh/","en":"http://www.mblock.cc/doc/en/"},"download":{"zh":"http://www.mblock.cc/zh-home/software/mblock/?noredirect=zh_CN","en":"http://www.mblock.cc/software/mblock/?noredirect=en_US"},"driver":{"zh":"https://www.mblock.cc/zh-cn/download/mlink","en":"https://www.mblock.cc/en-us/download/mlink"},"crdriver":{"zh":"https://www.mblock.cc/zh-cn/download/mlink","en":"https://www.mblock.cc/en-us/download/mlink"},"noserver_doc":{"zh":"https://www.yuque.com/makeblock-help-center-zh/mblock-5/pc-v5.2.0-connection","en":"https://www.yuque.com/makeblock-help-center-en/mblock-5/pc-v5.2.0-connection"},"cloud_data":"http://127.0.0.1:8080/#/","feedback":"http://feedback.makeblock.com/?v=mblock","ifttt":"https://ifttt.com/my_applets","protocol":"http://www.makeblock.com/cn/agreement/","homepage":{"zh":"https://mblock-dev.makeblock.com/user","en":"https://planet-dev.makeblock.com/user"},"community_convention":{"zh":"http://www.mblock.cc/zh-home/convention/","en":"http://www.mblock.cc/convention/"},"community_homePage":{"zh":"https://dev-web.makeblock.com/ide/index.html","en":"https://dev-web.makeblock.com/ide/index.html"},"mblock_web":{"zh":"https://dev-web.makeblock.com/ide/index.html","en":"https://dev-web.makeblock.com/ide/index.html"},"project_view":{"zh":"https://mblock-dev.makeblock.com/project/","en":"https://planet-dev.makeblock.com/project/"},"project_share":{"zh":"https://mblock-dev.makeblock.com/project/projectshare/","en":"https://planet-dev.makeblock.com/project/projectshare/"},"open_source":{"zh":"http://www.mblock.cc/doc/zh/open-source/open-source.html","en":"http://www.mblock.cc/doc/en/open-source/open-source.html"},"mblock_homePage":{"zh":"http://mblock.cc/","en":"http://mblock.cc/"},"extBuild_homePage":{"zh":"https://dev-web.makeblock.com/ext/index.html","en":"https://dev-web.makeblock.com/ext/index.html"},"mblock_downloadPage":{"zh":"http://www.mblock.cc/zh-home/software/?noredirect=zh-CN","en":"http://www.mblock.cc/mblock-software/"},"join":{"zh":"http://education.makeblock.com/zh-hans/trainingcenters/join/","en":"http://education.makeblock.com/trainingcenters/join/"},"ble_help":{"zh":"https://www.mblock.cc/doc/zh/faq/bluetooth.html","en":"https://www.mblock.cc/doc/en/faq/bluetooth.html"},"makex":{"zh":"https://www.makex.cc","en":"https://www.makex.io"},"python_questionnaire":{"zh":"https://jinshuju.net/f/3YFiV0?x_field_1=ide","en":"https://jinshuju.net/f/xOz1FC?x_field_1=ide"},"courses":{"zh":"https://edu.makeblock.com/#/resource/","en":"https://education.makeblock.com/resource/"}}')},653:function(e){e.exports=JSON.parse('{"connect_faq":{"zh":"http://www.mblock.cc/doc/zh/faq/mblock5cheng-xiao-ben-faq.html","en":"http://www.mblock.cc/doc/en/faq/mblock-5-+-codey-rocky-faq.html"},"faq":{"zh":"http://www.mblock.cc/doc/zh/faq/mblock5cheng-xiao-ben-faq.html","en":"http://www.mblock.cc/doc/en/faq/mblock-5-+-codey-rocky-faq.html"},"guide":{"zh":"http://www.mblock.cc/doc/zh/","en":"http://www.mblock.cc/doc/en/"},"download":{"zh":"http://www.mblock.cc/zh-home/software/mblock/?noredirect=zh_CN","en":"http://www.mblock.cc/software/mblock/?noredirect=en_US"},"driver":{"zh":"https://www.mblock.cc/zh-cn/download/mlink","en":"https://www.mblock.cc/en-us/download/mlink"},"crdriver":{"zh":"https://www.mblock.cc/zh-cn/download/mlink","en":"https://www.mblock.cc/en-us/download/mlink"},"noserver_doc":{"zh":"https://www.yuque.com/makeblock-help-center-zh/mblock-5/pc-v5.2.0-connection","en":"https://www.yuque.com/makeblock-help-center-en/mblock-5/pc-v5.2.0-connection"},"cloud_data":"https://web-iothub.mblock.cc/","feedback":"http://feedback.makeblock.com/?v=mblock","ifttt":"https://ifttt.com/my_applets","protocol":"http://www.makeblock.com/cn/agreement/","homepage":{"zh":"https://mblock.makeblock.com/user","en":"https://planet.mblock.cc/user"},"community_convention":{"zh":"https://www.mblock.cc/zh-home/convention/","en":"https://www.mblock.cc/convention/"},"community_homePage":{"zh":"https://mblock.makeblock.com","en":"https://planet.mblock.cc"},"mblock_web":{"zh":"https://ide.makeblock.com/index.html","en":"https://ide.mblock.cc/index.html"},"project_view":{"zh":"https://mblock.makeblock.com/project/","en":"https://planet.mblock.cc/project/"},"project_share":{"zh":"https://mblock.makeblock.com/project/projectshare/","en":"https://planet.mblock.cc/project/projectshare/"},"open_source":{"zh":"https://www.mblock.cc/doc/zh/open-source/open-source.html","en":"https://www.mblock.cc/doc/en/open-source/open-source.html"},"mblock_homePage":{"zh":"https://mblock.cc/","en":"https://mblock.cc/"},"extBuild_homePage":{"zh":"https://ext.makeblock.com/","en":"https://ext.mblock.cc/index.html"},"mblock_downloadPage":{"zh":"https://www.mblock.cc/zh-home/software/?noredirect=zh-CN","en":"https://www.mblock.cc/mblock-software/"},"join":{"zh":"http://education.makeblock.com/zh-hans/trainingcenters/join/","en":"http://education.makeblock.com/trainingcenters/join/"},"ble_help":{"zh":"https://www.mblock.cc/doc/zh/faq/bluetooth.html","en":"https://www.mblock.cc/doc/en/faq/bluetooth.html"},"makex":{"zh":"https://www.makex.cc","en":"https://www.makex.io"},"python_questionnaire":{"zh":"https://jinshuju.net/f/3YFiV0?x_field_1=ide","en":"https://jinshuju.net/f/xOz1FC?x_field_1=ide"},"courses":{"zh":"https://edu.makeblock.com/#/resource/","en":"https://education.makeblock.com/resource/"}}')},654:function(e){e.exports=JSON.parse('{"connect_faq":{"zh":"http://www.mblock.cc/doc/zh/faq/mblock5cheng-xiao-ben-faq.html","en":"http://www.mblock.cc/doc/en/faq/mblock-5-+-codey-rocky-faq.html"},"faq":{"zh":"http://www.mblock.cc/doc/zh/faq/mblock5cheng-xiao-ben-faq.html","en":"http://www.mblock.cc/doc/en/faq/mblock-5-+-codey-rocky-faq.html"},"guide":{"zh":"http://www.mblock.cc/doc/zh/","en":"http://www.mblock.cc/doc/en/"},"download":{"zh":"http://www.mblock.cc/zh-home/software/mblock/?noredirect=zh_CN","en":"http://www.mblock.cc/software/mblock/?noredirect=en_US"},"driver":{"zh":"https://www.mblock.cc/zh-cn/download/mlink","en":"https://www.mblock.cc/en-us/download/mlink"},"crdriver":{"zh":"https://www.mblock.cc/zh-cn/download/mlink","en":"https://www.mblock.cc/en-us/download/mlink"},"noserver_doc":{"zh":"https://www.yuque.com/makeblock-help-center-zh/mblock-5/pc-v5.2.0-connection","en":"https://www.yuque.com/makeblock-help-center-en/mblock-5/pc-v5.2.0-connection"},"cloud_data":"https://web-iothub.mblock.cc/","feedback":"http://feedback.makeblock.com/?v=mblock","ifttt":"https://ifttt.com/my_applets","protocol":"http://www.makeblock.com/cn/agreement/","homepage":{"zh":"https://mblock.makeblock.com/user","en":"https://planet.mblock.cc/user"},"community_convention":{"zh":"https://www.mblock.cc/zh-home/convention/","en":"https://www.mblock.cc/convention/"},"community_homePage":{"zh":"https://mblock.makeblock.com","en":"https://planet.mblock.cc"},"mblock_web":{"zh":"https://ide.makeblock.com/index.html","en":"https://ide.mblock.cc/index.html"},"project_view":{"zh":"https://mblock.makeblock.com/project/","en":"https://planet.mblock.cc/project/"},"project_share":{"zh":"https://mblock.makeblock.com/project/projectshare/","en":"https://planet.mblock.cc/project/projectshare/"},"open_source":{"zh":"https://www.mblock.cc/doc/zh/open-source/open-source.html","en":"https://www.mblock.cc/doc/en/open-source/open-source.html"},"mblock_homePage":{"zh":"https://mblock.cc/","en":"https://mblock.cc/"},"extBuild_homePage":{"zh":"https://ext.makeblock.com/","en":"https://ext.mblock.cc/index.html"},"mblock_downloadPage":{"zh":"https://www.mblock.cc/zh-home/software/?noredirect=zh-CN","en":"https://www.mblock.cc/mblock-software/"},"join":{"zh":"http://education.makeblock.com/zh-hans/trainingcenters/join/","en":"http://education.makeblock.com/trainingcenters/join/"},"ble_help":{"zh":"https://www.mblock.cc/doc/zh/faq/bluetooth.html","en":"https://www.mblock.cc/doc/en/faq/bluetooth.html"},"makex":{"zh":"https://www.makex.cc","en":"https://www.makex.io"},"python_questionnaire":{"zh":"https://jinshuju.net/f/3YFiV0?x_field_1=ide","en":"https://jinshuju.net/f/xOz1FC?x_field_1=ide"},"courses":{"zh":"https://edu.makeblock.com/#/resource/","en":"https://education.makeblock.com/resource/"}}')},655:function(e){e.exports=JSON.parse('{"connect_faq":{"zh":"http://www.mblock.cc/doc/zh/faq/mblock5cheng-xiao-ben-faq.html","en":"http://www.mblock.cc/doc/en/faq/mblock-5-+-codey-rocky-faq.html"},"faq":{"zh":"http://www.mblock.cc/doc/zh/faq/mblock5cheng-xiao-ben-faq.html","en":"http://www.mblock.cc/doc/en/faq/mblock-5-+-codey-rocky-faq.html"},"guide":{"zh":"http://www.mblock.cc/doc/zh/","en":"http://www.mblock.cc/doc/en/"},"download":{"zh":"http://www.mblock.cc/zh-home/download/","en":"http://www.mblock.cc/download/?noredirect=en_US"},"driver":{"zh":"https://www.mblock.cc/zh-cn/download/mlink","en":"https://www.mblock.cc/en-us/download/mlink"},"crdriver":{"zh":"https://www.mblock.cc/zh-cn/download/mlink","en":"https://www.mblock.cc/en-us/download/mlink"},"noserver_doc":{"zh":"https://www.yuque.com/makeblock-help-center-zh/mblock-5/pc-v5.2.0-connection","en":"https://www.yuque.com/makeblock-help-center-en/mblock-5/pc-v5.2.0-connection"},"cloud_data":"http://web-iothub-test.makeblock.com/#/","feedback":"http://feedback.makeblock.com/?v=mBlock","ifttt":"https://ifttt.com/my_applets","homepage":{"zh":"https://mblock-test.makeblock.com/user","en":"https://community-test.mblock.cc/user"},"community_convention":{"zh":"http://www.mblock.cc/zh-home/convention/","en":"http://www.mblock.cc/convention/"},"community_homePage":{"zh":"https://test-web.makeblock.com/ide/index.html","en":"https://test-web.mblock.cc/ide/index.html"},"mblock_web":{"zh":"https://test-web.makeblock.com/ide/index.html","en":"https://test-web.mblock.cc/ide/index.html"},"project_view":{"zh":"https://mblock-test.makeblock.com/project/","en":"https://community-test.mblock.cc/project/"},"project_share":{"zh":"https://mblock-test.makeblock.com/project/projectshare/","en":"https://community-test.mblock.cc/project/projectshare/"},"open_source":{"zh":"http://www.mblock.cc/doc/zh/open-source/open-source.html","en":"http://www.mblock.cc/doc/en/open-source/open-source.html"},"mblock_homePage":{"zh":"http://mblock.cc/","en":"http://mblock.cc/"},"extBuild_homePage":{"zh":"https://test-web.makeblock.com/ext/index.html","en":"https://test-web.mblock.cc/ext/index.html"},"mblock_downloadPage":{"zh":"http://www.mblock.cc/zh-home/software/?noredirect=zh-CN","en":"http://www.mblock.cc/mblock-software/"},"join":{"zh":"http://education.makeblock.com/zh-hans/trainingcenters/join/","en":"http://education.makeblock.com/trainingcenters/join/"},"ble_help":{"zh":"https://www.mblock.cc/doc/zh/faq/bluetooth.html","en":"https://www.mblock.cc/doc/en/faq/bluetooth.html"},"makex":{"zh":"https://www.makex.cc","en":"https://www.makex.io"},"python_questionnaire":{"zh":"https://jinshuju.net/f/3YFiV0?x_field_1=ide","en":"https://jinshuju.net/f/xOz1FC?x_field_1=ide"},"courses":{"zh":"https://edu.makeblock.com/#/resource/","en":"https://education.makeblock.com/resource/"}}')},656:function(e,t,n){var o={"./dev/socket.pc.json":657,"./preview/socket.pc.json":658,"./production/socket.pc.json":659,"./test/socket.pc.json":660};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=656},657:function(e){e.exports=JSON.parse('{"url":"http://127.0.0.1:58085","compilerUrl":"//arduinoserver.makeblock.com"}')},658:function(e){e.exports=JSON.parse('{"url":"http://127.0.0.1:58085","compilerUrl":"//arduinoserver.makeblock.com"}')},659:function(e){e.exports=JSON.parse('{"url":"http://127.0.0.1:58085","compilerUrl":"//arduinoserver.makeblock.com"}')},660:function(e){e.exports=JSON.parse('{"url":"http://127.0.0.1:58085","compilerUrl":"//arduinoserver.makeblock.com"}')},661:function(e,t,n){var o={"./dev/social.json":662,"./preview/social.json":663,"./production/social.json":664,"./test/social.json":665};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=661},662:function(e){e.exports=JSON.parse('{"qq":"https://graph.qq.com/oauth/show?which=Login&display=pc&response_type=code&redirect_uri=https%3A%2F%2Fpassport2.makeblock.com%2Fcallback%2Fqq&client_id=101351538&state=pc_qq_2_login_{0}","wechat":"https://open.weixin.qq.com/connect/qrconnect?appid=wx88c7abff9480ae61&redirect_uri=http%3A%2F%2Fpassport2.makeblock.com%2Fcallback%2Fwechat&response_type=code&scope=snsapi_login&state=pc_wechat_2_login_{0}","google":"https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=749108166547-i629ov3epca2i15bvv4fjrudcfu3jal5.apps.googleusercontent.com&redirect_uri=http://passport2.makeblock.com/callback/google&scope=https://www.googleapis.com/auth/userinfo.email&state=pc_google_3_login_{0}"}')},663:function(e){e.exports=JSON.parse('{"qq":"https://graph.qq.com/oauth/show?which=Login&display=pc&response_type=code&redirect_uri=https%3A%2F%2Fpassport2.makeblock.com%2Fcallback%2Fqq&client_id=101351538&state=pc_qq_2_login_{0}","wechat":"https://open.weixin.qq.com/connect/qrconnect?appid=wx88c7abff9480ae61&redirect_uri=http%3A%2F%2Fpassport2.makeblock.com%2Fcallback%2Fwechat&response_type=code&scope=snsapi_login&state=pc_wechat_2_login_{0}","google":"https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=749108166547-i629ov3epca2i15bvv4fjrudcfu3jal5.apps.googleusercontent.com&redirect_uri=http://passport2.makeblock.com/callback/google&scope=https://www.googleapis.com/auth/userinfo.email&state=pc_google_7_login_{0}"}')},664:function(e){e.exports=JSON.parse('{"qq":"https://graph.qq.com/oauth/show?which=Login&display=pc&response_type=code&redirect_uri=https%3A%2F%2Fpassport2.makeblock.com%2Fcallback%2Fqq&client_id=101351538&state=pc_qq_2_login_{0}","wechat":"https://open.weixin.qq.com/connect/qrconnect?appid=wx88c7abff9480ae61&redirect_uri=http%3A%2F%2Fpassport2.makeblock.com%2Fcallback%2Fwechat&response_type=code&scope=snsapi_login&state=pc_wechat_2_login_{0}","google":"https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=749108166547-i629ov3epca2i15bvv4fjrudcfu3jal5.apps.googleusercontent.com&redirect_uri=http://passport2.makeblock.com/callback/google&scope=https://www.googleapis.com/auth/userinfo.email&state=pc_google_7_login_{0}"}')},665:function(e){e.exports=JSON.parse('{"qq":"https://graph.qq.com/oauth/show?which=Login&display=pc&response_type=code&redirect_uri=https%3A%2F%2Fpassport2.makeblock.com%2Fcallback%2Fqq&client_id=101351538&state=pc_qq_3_login_{0}","wechat":"https://open.weixin.qq.com/connect/qrconnect?appid=wx88c7abff9480ae61&redirect_uri=https%3A%2F%2Fpassport2.makeblock.com%2Fcallback%2Fwechat&response_type=code&scope=snsapi_login&state=pc_wechat_6_login_{0}","google":"https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=749108166547-i629ov3epca2i15bvv4fjrudcfu3jal5.apps.googleusercontent.com&redirect_uri=https://passport2.makeblock.com/callback/google&scope=https://www.googleapis.com/auth/userinfo.email&state=pc_google_3_login_{0}"}')},7:function(e,t,n){"use strict";var o=n(26),a=n(4),r=n.n(a),i=n(5),s=n(15),c=n(17),l=n(42);var d=function(){return{file:[{key:"MENU.FILE.NEW.WEB",label:"",shortcutKey:["Ctrl+N","+N"]},{key:"MENU.FILE.OPEN.WEB",label:"",link:"/projects",shortcutKey:["Ctrl+O","+O"]},{key:"MENU.FILE.SAVEAS.WEB",label:"",shortcutKey:["Ctrl+Shift+S","++S"]},{key:"MENU.FILE.IMPORT",label:""},{key:"MENU.FILE.EXPORT",label:""},{key:"MENU.FILE.PUBLISH.TO",label:""}],edit:[{key:"MENU.EDIT.TURBO",label:"",shortcutKey:""},{key:"MENU.EDIT.TURBO.OFF",label:"",shortcutKey:""},{key:"MENU.EDIT.SHRINK",label:"",shortcutKey:"Ctrl+Shift+"},{key:"MENU.EDIT.SHRINK.OFF",label:"",shortcutKey:"Ctrl+Shift+"},{key:"MENU.EDIT.COMPANION.OPEN",label:"",shortcutKey:""},{key:"MENU.EDIT.COMPANION.CLOSE",label:"",shortcutKey:""}],tutorials:[{key:"MENU.HELP.GUIDE",label:"",shortcutKey:""},{key:"MENU.FILE.DEMOS",label:"",link:"/demos"}],other:[{key:"MENU.HELP.UPDATER.CHECKER",label:"",shortcutKey:"",disableInAppstore:!0},{key:"MENU.OTHER.ABOUT",label:"",shortcutKey:"",link:"/help/about"},{key:"MENU.OTHER.VERSION.INTRODUCE",label:"",shortcutKey:""},{key:"MENU.OTHER.DRIVER.INSTALL",label:"",shortcutKey:""},{key:"MENU.OTHER.DEFAULT.EDITOR",label:"",shortcutKey:"",link:"/defaultEditor"},{key:"MENU.OTHER.JOIN",label:"",shortcutKey:""}],user:[{key:"MENU.PROJECTS",label:"",shortcutKey:""},{key:"USER.HOME_PAGE",label:"",shortcutKey:""},{key:"USER.ACCOUNT",label:"",shortcutKey:""},{key:"USER.CLOUD_SERVICE_KEY",label:"",shortcutKey:""},{key:"USER.LOGOUT",label:"",shortcutKey:""}]}};n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return h}));let p="mblockweb",u=3e4;p="mblockpc",u=3e3;const h=new class{constructor(){this.config={showHeader:!1,logo:null,supportedLangKeysList:null,primaryColor:"",showCopyrightLogo:!1,enableRemoteExts:!1,enableCheckMlinkVersion:!1,spriteAssetConfig:[],userSpriteAssetConfig:void 0,enableProjectLoadingPage:!0,enablePresetProject:!0,defaultExts:Object(c.getDefaultExts)()||["cyberpi"],version:s.a.appVersion,enableDevice:!0,spriteBasepath:"static/resource/scratch/",userSpriteBasepath:"static/resource/scratch/",spriteCustom:{[i.a.SPRITE_TYPE.USER_LIBS]:"sprite.json",[i.a.SPRITE_TYPE.USER_COSTUMES]:"costume.json",[i.a.SPRITE_TYPE.USER_BACKDROPS]:"backdrop.json",[i.a.SPRITE_TYPE.USER_SOUNDS]:"sound.json"},userProjectFilePath:"static/projects/",userProjectFileName:"project.json",userCoverImageFilePath:"static/coverImages/",downloadDriverBtn:{text:"",handler:null},extDirPath:"exts/",userTempPath:"temp/",appRootPath:"./",langDirPath:"langs/",loadExtTimeout:u,openCodeEditor:!0,openCodeMirror:!0,showCompanionSwitch:!1,defaultCompanionMode:!1,enableShowHelp:!0,listenLeavePage:!0,disableConfirmSave:!1,platform:p,headerDropdownMenus:{}},this.guiChildren=[],this.init()}appendGuiChild(e,t){if(t){const n=e=>{const n={};for(const o in t)n[o]=e[o];return n},a=Object(o.connect)(n)(e);this.guiChildren.push(a)}else this.guiChildren.push(e)}getGuiChildren(){return this.guiChildren}init(){let e="test";e="production",this.config.domain=n(646)(`./${e}/domain.json`),this.config.link=n(651)(`./${e}/link.json`),this.config.socket=n(656)(`./${e}/socket.pc.json`),this.config.social=n(661)(`./${e}/social.json`),this.config.headerDropdownMenus=d()}setConfig(e){const t=r.a.merge(this.config,e);this.checkConfig(t),this.config=t}checkConfig(e){const t=e.supportedLangKeysList;if(t&&0!==r.a.difference(t,Object.keys(l.a.supportLangs)).length)throw Error("config.header.languageMenusupportedLangKeys")}setVersion(e){this._version=e}getVersion(){return this._version}handleDomainScheme(e=this.config.domain,t=""){for(const n in e){const o=e[n];let a=t;-1!==["iot","air","weather"].indexOf(n)&&(a="https:"),"string"==typeof o?e[n]=o.replace(/https?:/,a):this.handleDomainScheme(o,a)}}updateDefaultExt(e){Object(c.setDefaultExts)([e]),this.config.defaultExts=[e]}updatePath(e,...t){"string"==typeof e&&(/\/$/.test(e)||(e+="/"),t.forEach(t=>{this.config[t]=e}))}},m=h.config},72:function(e,t,n){"use strict";var o=n(13),a=n(3),r=n(34);a.default.on("LogConnectDevice",(e,t,n)=>{e&&e.name&&r.a.trackingAction(e.name,`connect_${t?"ok":"fail"}`,n)}),a.default.on("LogDisconnectDevice",(e,t)=>{e&&e.name&&r.a.trackingAction(e.name,"disconnect",t)}),a.default.on("LogUploadCode",(e,t,n)=>{e&&r.a.trackingAction(e,`upload_code_${t?"ok":"fail"}`,n)}),a.default.on("LogUpdateFirmware",(e,t,n)=>{e&&e.name&&r.a.trackingAction(e.name,`update_firmware_${t?"ok":"fail"}`,n)}),a.default.on("LogMblockUpdate",e=>{let t="update_mblock";void 0!==e&&(t+=e?"_ok":"_fail"),r.a.trackingAction("mblock",t,"update")}),a.default.on("LogExtension",(e,t)=>{r.a.trackingAction("extension",`${t?"load":"unload"}`,e)}),a.default.on("LogDeviceExtension",(e,t)=>{r.a.trackingAction("device_extension",`${t?"load":"unload"}`,e)}),a.default.on("LogPreviewExtension",(e,t)=>{r.a.trackingAction("preview_extension",`${t?"load":"unload"}`,e)}),a.default.on("LogPreviewDeviceExtension",(e,t)=>{r.a.trackingAction("preview_device_extension",`${t?"load":"unload"}`,e)}),a.default.on("LogBlockDoc",e=>{r.a.trackingAction("block_doc",`open_${e.extensionName}`,e.blockName)}),a.default.on("OpenExampleProgram",e=>{r.a.trackingAction("example_program",`choose_${e.type}`,e.label)}),a.default.on("OpenPresetProgram",e=>{r.a.trackingAction("activity_project","load_activity_project",e)}),a.default.on("ShareGoogleClass",e=>{r.a.trackingAction("share_project","share_google_class",e)}),a.default.on("ViewExampleLink",e=>{r.a.trackingAction("example_program",`view_example_page_${e.type}`,e.label)}),a.default.on("LoadExtension",(e,t)=>{r.a.trackingAction("extension",`load_${e?"official":"third_party"}_extension`,t)}),a.default.on("PythonEditorLink",e=>{r.a.trackingAction("Python_IDE","Click_test_entry",`From_${e?"en":"zh"}_IDE`)}),a.default.on("ChangeExtensionTab",e=>{r.a.trackingAction("extension_center","click_tab",`click_${e}s_tab`)}),a.default.on("ChangeExtensionSpriteTag",e=>{r.a.trackingAction("extension_center","click_sprites_label",e)}),a.default.on("ChangeExtensionDeviceTag",e=>{r.a.trackingAction("extension_center","click_devices_label",e)}),a.default.on("ViewExtensionLink",e=>{r.a.trackingAction("extension_center","click_detail_link",e)}),a.default.on("OpenExtensionCenter",()=>{r.a.trackingAction("extension_center","click_center_btn","click_enter_btn")}),a.default.on("CloseExtensionCenter",()=>{r.a.trackingAction("extension_center","click_center_btn","click_exit_btn")}),a.default.on("OpenExtensionCenterLink",()=>{r.a.trackingAction("extension_center","click_center_btn","click_ext_btn")});var i=n(4),s=n.n(i),c=(n(18),n(19)),l=n(79),d=n(102),p=n(30),u=(n(15),n(17)),h=n(115),m=n(99),f=n(21),E=n(5),g=n(63),T=n(159);n.d(t,"e",(function(){return b})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return O})),n.d(t,"f",(function(){return w})),n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return v}));const b=e=>{O(e)},S=e=>{e=Object(u.safeHttps)(e);const t=document.querySelector("meta[name=thumbnail]");t&&(t.content=e)},O=e=>{const{intlr:t,project:n}=e.getState(),{projectId:o,projectType:a}=n;if(p.a&&!o&&!c.a.isConfirmName){if(-1!==s.a.indexOf([E.a.PROJECT_TYPE.EXAMPLE,E.a.PROJECT_TYPE.LOCAL,E.a.PROJECT_TYPE.PRESET],a))return;const o=c.a.getNewProjectName(t.messages["FILENAME.EMPTY"],n.projects);e.dispatch(p.a.setName(o))}},w=e=>{"/"===o.a.location.pathname&&(e.dispatch(l.e.uploadCodePrepare()),o.a.push("/upload/code"))},I=(e,t)=>{e.dispatch(d.g.checker(t))},C=e=>{e.preventDefault(),e.returnValue=""},v=()=>{window.removeEventListener("beforeunload",C)};let R={info:null,isReset:!1,options:{}};const A=(e,t=!1,n={})=>{const{connect:r,intlr:i}=f.a.getState();if(r.connectedType!==E.a.CONNECT_TYPE.SERIAL)return void g.a.warning(i.messages["CONNECT.FIRMWARE.BLE.WARN"]);null==e?(e=R.info,t=R.isReset,n=R.options):R={info:e,isReset:t,options:n};let s=[],c="";e.firmware&&(s=e.firmware.map(e=>{const t="string"==typeof e.url?e.url:e.url.url;if(!c&&e.isFactory&&(c=t),e.modules){const n=[];for(const t of e.modules)n.push({type:t.type,url:t.url.url,version:t.version});n.push({type:"",url:t,version:e.version});const o=JSON.stringify(n);return{text:`${Object(m.a)(e.name)}(${e.version||"-"})`,value:o}}return{text:`${Object(m.a)(e.name)}(${e.version||"-"})`,value:t}})),Object(h.a)("updateFirmware",{title:"MENU.HELP.UPDATEFIRMWARE",width:"340px",fields:[{id:"device",label:"UPDATER.FRIMWARE.F.DEVICE.TEXT",type:"input",value:e.name,props:{readOnly:!0}},{id:"firmware",label:"UPDATER.FRIMWARE.F.VERSION.TEXT",type:"select",options:s,value:t?c:s[0].value,props:{disable:t}}],buttons:[{id:"cancel",ghost:!0,text:"BUTTON.CANCEL.TEXT",style:{flex:"auto"},handle:e=>{e.close()}},{id:"update",text:"BUTTON.UPDATE.TEXT",style:{flex:"auto"},handle:e=>{let t=e.values.firmware;"["==t[0]&&(t=JSON.parse(t)),o.a.push("/updater/firmware/progress"),a.default.emit("uploadFirmwarePrepare"),(e=>{if(Object(T.isArray)(e)){const t=[];for(const{url:n}of e)t.push(fetch(n));return Promise.all(t).then(e=>{const t=e.map(e=>e.arrayBuffer());return Promise.all(t)},e=>{a.default.emit("downloadFirmwareFail",e)}).then(t=>{const n=[];for(let o=0;o<t.length;++o)n.push({type:e[o].type,data:t[o],version:e[o].version});a.default.emit("downloadFirmwareOK",n)},e=>{a.default.emit("downloadFirmwareFail",e)})}if(Object(T.isString)(e))return fetch(e).then(e=>e.arrayBuffer()).then(e=>{a.default.emit("downloadFirmwareOK",e)}).catch(e=>{a.default.emit("downloadFirmwareFail",e)})})(t).then(()=>{e.close()})}}]})};a.default.on("ShowUpdateFirmware",(e,t={})=>{A(e,!1,t)}),a.default.on("ShowResetFactoryFirmware",(e,t={})=>{A(e,!0,t)})},74:function(e,t,n){"use strict";var o=n(4),a=n.n(o),r=n(229),i=n.n(r),s=n(7),c=n(3);const l=s.b.socket.url,d=2147483647,p=3e5,u=function(e,t){0};class h{constructor(){this.client=i()(l,{autoConnect:!1}),this.initializationMessageChannelData(),this.connectEmitFunc=null,this.disconnectEmitFunc=null,this.dataEmitFunc=null,this.checkMlinkFunc=null,this.isConnected=!1,this.isSocketLinked=!1,this.listenerVecter(),setInterval(()=>{this.cleanDirtyData()},p),this.preSocketId=null,this.sendMessage=a.a.throttle(this.sendMessage.bind(this),5)}establishChannel(){return this.preSocketId&&this.preSocketId===this.client.id?this.client.connected:(this.client.open(),this.preSocketId=this.client.id,this.checkMlinkVersion(),this.client.connected&&(c.default.emit("MlinkConnected",this.client),this.isSocketLinked=!0),this.client.connected)}checkMlinkVersion(){this.client.emit("check_mlink_version")}close(){this.client&&this.client.close(),this.isSocketLinked=!1}listenerVecter(){this.client.on("s2c_send",(e,t)=>{const n=`${t.connectType}.${t.method}.${e}`;u("["+n+"]  <=",t),a.a.isFunction(this.channelMessageHandleMap[n])&&this.channelMessageHandleMap[n](t.error,t.data),this.channelMessageHandleMap&&a.a.has(this.channelMessageHandleMap,n)&&(delete this.channelMessageTimeHandleMap[n],delete this.channelMessageHandleMap[n])}),this.client.on("connect",()=>{this.isConnected=!0,this.initializationMessageChannelData(),a.a.isFunction(this.connectEmitFunc)&&this.connectEmitFunc("socket.io-client connected."),u("s2c=>","socket.io-client connect.")}),this.client.on("disconnect",()=>{this.isConnected=!1,this.initializationMessageChannelData(),a.a.isFunction(this.disconnectEmitFunc)&&this.disconnectEmitFunc("socket.io-client disconnect."),u("s2c=>","socket.io-client disconnect.")}),this.client.on("s2c_receive",e=>{a.a.isFunction(this.dataEmitFunc)&&this.dataEmitFunc(e)}),this.client.on("mlink_version",e=>{a.a.isFunction(this.checkMlinkFunc)&&this.checkMlinkFunc(e)})}initializationMessageChannelData(){this.messageId=0,this.channelMessageHandleMap={},this.channelMessageTimeHandleMap={}}cleanDirtyData(){for(const e in this.channelMessageTimeHandleMap){const t=(new Date).getTime()-this.channelMessageTimeHandleMap[e];p<=t&&(a.a.isFunction(this.channelMessageHandleMap[e])&&this.channelMessageHandleMap[e]("["+e+"]",{}),delete this.channelMessageTimeHandleMap[e],delete this.channelMessageHandleMap[e])}}getMessageId(){return this.messageId+=1,this.messageId>=d-1&&(this.messageId=0),`${this._getRandomString(8)}.${this.messageId}`}_getRandomString(e){e=e||32;const t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=t.length;let o="";for(let a=0;a<e;a++)o+=t.charAt(Math.floor(Math.random()*n));return o}sendMessage(e,t){const n=this.getMessageId(),o=`${e.connectType}.${e.cmd}.${n}`;this.channelMessageHandleMap[o]=t,this.channelMessageTimeHandleMap[o]=(new Date).getTime(),this.client.emit("c2s_send",n,e),u("["+o+"]  =>",e)}addConnectListener(e){this.connectEmitFunc=e}addDisconnectListener(e){this.disconnectEmitFunc=e}addDataListener(e){this.dataEmitFunc=e}addCheckMlinkListenser(e){this.checkMlinkFunc=e}}t.a=new class{constructor(){this.runtime=new h}}},748:function(e,t){},754:function(e,t){},756:function(e,t){},76:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"f",(function(){return b}));var o=n(4),a=n.n(o),r=n(17),i=n(7),s=n(15),c=n(78),l=n(42),d=n(332),p=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};const u=(e="",t)=>{try{if(/^(http|https):\/\//.test(e))return window.IS_PREVIEW_EXTENSION&&"js"===Object(r.getFileSuffix)(e)?`${e}?${new Date}`:e;let n=s.a.isLocal;if(n=!0,n)return`${i.b.extDirPath}${e}`.replace(/\\/g,"/");if(t){const n=c.a.getExt(t);if(n&&n.extractPath)return Object(d.a)(`${n.extractPath}${e}`)}return`${c.a.extractPath}${e}`}catch(t){return e}},h=(e,t=!1,n)=>p(void 0,void 0,void 0,(function*(){if(e)return window.require||(yield Object(r.getReady)(()=>void 0!==window.require)),new Promise((o,a)=>{try{window.require([t?e:u(e,n)],e=>{o(e)},e=>{a(e)})}catch(e){a(e)}})})),m=(e,t)=>(t||(t="mblockweb",t="mblockpc"),null==e||e.indexOf(t)>-1),f=(e,t)=>e?"string"==typeof e?e:e[t]||e.en||e[Object.keys(e)[0]]:"Undefined",E={pen:"scratch-pen",music:"scratch-music",DeepLearning:"tm",Cognitive:"cognitive"},g=(e,t,n)=>{if(!a.a.has(l.a.localeData,e))return;const{mscratchMsgs:o}=l.a.localeData[e];if(!o)return;const{extI18n:r}=o,i=r[E[t]||t];return i?i[n]:void 0};let T=null;const b=()=>T instanceof Promise?T:window.AMDLoader?Promise.resolve(window.require):(T=new Promise(e=>{const t=document.querySelector(`[src="vs/loader.js?v${i.b.version}"]`);t?t.onload=()=>{e(window.require),T=null}:(e(window.require),T=null)}),T)},78:function(e,t,n){"use strict";var o=n(56),a=n(137),r=n(76),i=n(18),s=n(7),c=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};const l=(e,t)=>{let n=e.filter(e=>Object(r.d)(e.platform,s.b.platform||""));if(!t)return{list:n};n=n.filter(e=>{var n,o,a,r;Array.isArray(e.targets)?e.targets=e.targets.map(e=>e.toLowerCase()):"string"==typeof e.targets&&(e.targets=e.targets.toLowerCase()),e.categorys&&null!==e.categorys&&"all"!==e.categorys||(e.categorys="");let i=(!t.target||e.targets.includes(t.target.toLowerCase()))&&JSON.stringify(e).includes(t.searchText||"")&&e.categorys.includes(t.category);return!e.targets.includes(null===(n=t.target)||void 0===n?void 0:n.toLowerCase())&&(null===(o=e.remoteTargets)||void 0===o?void 0:o.includes(null===(r=null===(a=t)||void 0===a?void 0:a.target)||void 0===r?void 0:r.toLowerCase()))?(i=!0,e.needUpdateForSupport=!0):e.needUpdateForSupport&&delete e.needUpdateForSupport,i});const o=n.length;return t.pageSize&&t.pageNumber&&(n=n.slice((t.pageNumber-1)*t.pageSize,t.pageNumber*t.pageSize)),{list:n,totalCount:o,pageNumber:t.pageNumber}};var d=new class{constructor(){this.extTags=[],this.devices=[],this.exts=[],this.extractPath=s.b.extDirPath}fetchDevices(e){return c(this,void 0,void 0,(function*(){return this.devices.length&&e&&e(l(this.devices)),this.devices=yield o.c.getExtList(o.b.device,t=>{e&&e(l(t))}),this.devices}))}fetchExts(e,t){return c(this,void 0,void 0,(function*(){return this.exts.length&&e&&e(l(this.exts,t)),this.exts=yield o.c.getExtList(o.b.ext,n=>{e&&e(l(n,t))}),this.exts}))}fetchLocalExtsByType(e){return c(this,void 0,void 0,(function*(){let t=(yield o.c.getLocalExtList(e))||[];return t.length||(t=(yield o.c.getAppExtList(e))||[]),t}))}fetchByIds(e,t){return c(this,void 0,void 0,(function*(){let n=[];this.devices.length?n=this.devices:(o.c.waitInitExtDir&&(yield o.c.waitInitExtDir),n=yield this.fetchLocalExtsByType(o.b.device));const a=[],r=[];if(n.length&&e.forEach(e=>{const t=n.find(t=>t.id.toLowerCase()===e.toLowerCase());t?a.push(t):r.push(e)}),a.length&&t&&t(a),r.length){const e=this.exts.length?this.exts:yield this.fetchLocalExtsByType(o.b.ext),n=[];e.length&&r.forEach(t=>{const o=e.find(e=>e.id.toLowerCase()===t.toLowerCase());o&&(n.push(o),a.push(o))}),t&&t(n)}return a}))}getExt(e){return this.devices.find(t=>t.id.toLowerCase()===e.toLowerCase())||this.exts.find(t=>t.id.toLowerCase()===e.toLowerCase())}onListUpdate(e){return o.c.onListUpdate(e)}fetchTags(e){return c(this,void 0,void 0,(function*(){return"sprite"===e?yield this.fetchExtTags():"device"===e?this.fetchDeviceTags():void 0}))}fetchExtTags(){return c(this,void 0,void 0,(function*(){if(0===this.extTags.length){let e=[];try{e=yield a.a.getExtTagList(),o.c.saveExtTagsToFile(e)}catch(t){e=yield o.c.getLocalExtTags()}e.unshift({id:0,name:"all",title:{en:"All",zh:""}}),this.extTags=e.map(e=>Object.assign(Object.assign({},e),{key:e.name}))}return this.extTags}))}fetchDeviceTags(){let e=i.a.instance.getLoadedDevices()||[];return e=e.filter(e=>e.id===e.targets[0].id),e.map(e=>{const{id:t,info:n}=e,{zh:o,en:a}=n.translationMap;return{id:t,key:t,name:t,title:{zh:o.extensionName,en:a.extensionName}}})}};t.a=d},786:function(e,t){},787:function(e,t){},79:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var o=n(4),a=n.n(o),r=n(3),i=n(5);const s="UPLOAD_FIRMWARE",c="UPLOAD_READY",l="UPLOAD_CODE",d="UPLOAD_CODE_PROGRESS";let p=null;const u=e=>({type:e,payload:{progress_status:i.a.UPLOAD_STATUS.READY,progress_percent:0}}),h=(e,t,n)=>{const o=u(e);return{state:o,result:(e,s)=>{if(e)o.payload.progress_status=i.a.UPLOAD_STATUS.FAILED,r.default.emit("UploadCodeFail"),clearInterval(p),a.a.isFunction(n)&&n();else if(m(o),s&&"progress"==s.type){const e=parseInt(s.percent);o.payload.progress_percent=e,o.payload.progress_status=i.a.UPLOAD_STATUS.PROCESSING}else s&&"finish"==s.type&&(clearInterval(p),o.payload.progress_percent=100,o.payload.progress_status=i.a.UPLOAD_STATUS.UPLOADED,r.default.emit("UploadedCode"),a.a.isFunction(t)&&t());return o}}},m=e=>{const t=Mscratch.instance.extensions.getEditingTarget();if(t&&t.config.shouldConnect&&t.config.shouldConnect.length||!t.config.shouldConnect)for(const e of t.config.shouldConnect)if("hid"===e)return clearInterval(p),!1;let n=0,o=0;clearInterval(p),p=setInterval(()=>{const t=e.payload.progress_percent;if(100!==t)return n>5?(clearInterval(p),void r.default.emit("UploadCodeFail")):void(o!==t?o=t:n++);clearInterval(p)},1e3)};t.e={uploadFirmwarePrepare:()=>u(s),uploadFirmwareProgress:e=>({type:s,payload:{progress_status:i.a.UPLOAD_STATUS.PROCESSING,progress_percent:e}}),uploadFirmwareFinished:()=>({type:s,payload:{progress_status:i.a.UPLOAD_STATUS.UPLOADED,progress_percent:100}}),uploadFirmwareFail:()=>({type:s,payload:{progress_status:i.a.UPLOAD_STATUS.FAILED,progress_percent:0}}),uploadCodePrepare:()=>u(c),uploadCode:()=>{const e=h(l);return t=>{t(e.state)}},uploadCodeFail:()=>{const e=u(l);return e.payload.progress_status=i.a.UPLOAD_STATUS.FAILED,t=>{t(e)}},uploadCodeProgress:(e,t)=>{const n=h(d);return e?n.result(e):n.result(null,t)}}},834:function(e){e.exports=JSON.parse('{"name":"Empty","md5":"cd21514d0531fdffb22204e0ec5ed84a.svg","type":"sprite","tags":[],"info":[0,1,1],"json":{"objName":"Empty","sounds":[{"soundName":"pop","soundID":-1,"md5":"83a9787d4cb6f3b7632b4ddfebf74367.wav","sampleCount":258,"rate":11025,"format":""}],"costumes":[{"costumeName":"costume1","baseLayerID":-1,"baseLayerMD5":"cd21514d0531fdffb22204e0ec5ed84a.svg","bitmapResolution":1,"rotationCenterX":0,"rotationCenterY":0}],"currentCostumeIndex":0,"scratchX":36,"scratchY":28,"scale":1,"direction":90,"rotationStyle":"normal","isDraggable":false,"indexInLibrary":59,"visible":true,"spriteInfo":{}}}')},842:function(e,t){},848:function(e,t){},85:function(e,t,n){"use strict";var o=n(87);let a=new class{constructor(){this.uploadDrivers={},this.middlewares={},this.firmwareDrivers={};for(let e in o.a.drivers)this.uploadDrivers[e]=o.a.drivers[e];for(let e in o.a.upload.middlewares)this.middlewares[e]=o.a.upload.middlewares[e];for(let e in o.a.firmware)this.firmwareDrivers[e]=o.a.firmware[e]}addUploadDriver(e,t){this.uploadDrivers[e]=t}getUploadDriver(e){return this.uploadDrivers[e]}addFirmwareDriver(e,t){this.firmwareDrivers[e]=t}getFirmwareDriver(e){return this.firmwareDrivers[e]}addMiddleware(e,t){this.middlewares[e]=t}getMiddleware(e){return this.middlewares[e]}};t.a=a},86:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r}));const o={SERIAL:"serialport",BLE:"ble",HID:"hid",WIRELESS:"wireless",WIFI:"wifi","24G":"24g"},a={IDLE:"idle",CONNECTED:"connected",NOT_CONNECTED:"not_connected",NOT_SERVICE:"not_server",CONNECTING:"connecting",CONNECT_SUCCESS:"connect_success",CONNECT_FAIL:"connect_fail",CONNECT_ERROR:"connect_error",CONNECT_TIMEOUT:"connect_timeout",CONNECT_CANCEL:"connect_cancel"},r={SCAN_READY:"scan_ready",SCANNING:"scanning",SCAN_SUCCESS:"scan_success",SCAN_FAIL:"scan_fail",SCAN_TIMEOUT:"scan_timeout",SCAN_CANCEL:"scan_cancel"}},87:function(e,t,n){"use strict";var o=n(184),a=n(49);const r=n(4),i=n(670),s=n(217),c=n(264);var l=function(e,t,n,o){let l,d;l=c.promisify(t=>{a.a.info("open ok ,callback",e),t(null,e)}),d=()=>{};let p={timeout:200,stabDelay:100,cmdexeDelay:25,synchLoops:32,byteDelay:0,pollValue:83,pollIndex:3},u=i(e),h=r.extend({},u,{sync:function(e,t){this.progressHandle=n,this.length=-1,this.progress=-1,this.baseProgress=-1,a.a.info("stk500v2Instance sync"),u.sync.call(this,e,t)},loadAddress:function(e,t){var n=e<<1,o=this.baseProgress+Math.round(100*n/this.length);if(this.progress!==o){this.progress=o;var a=this;this.progressHandle&&setTimeout((function(){a.progressHandle(o)}),0)}u.loadAddress.call(this,e,(function(e,n){t(e,n)}))},upload:function(e,t,n){this.baseProgress=0,this.length=e.length,u.upload.call(this,e,t,n)}}),m=c.promisify(e.set.bind(e)),f=c.promisify(h.sync.bind(h)),E=c.promisify(h.enterProgrammingMode.bind(h)),g=c.promisify(h.upload.bind(h)),T=c.promisify(h.exitProgrammingMode.bind(h));setTimeout(()=>{c.join(s.parse(t).data,l().then((function(){a.a.info("open serial port ok")})).delay(1).then((function(){return m({rts:!0,dtr:!0})})).delay(10).then((function(){return m({rts:!1,dtr:!1})})).delay(10).then((function(){return m({rts:!0,dtr:!0})})).delay(10).then((function(){return a.a.info("begin sync"),f(5)})).delay(1).then((function(){return a.a.info("syn ok"),E(p)})).delay(1),(function(e){return e})).then((function(e){return g(e,256)})).then((function(){return T()})).then((function(){return m({rts:!1,dtr:!1})})).then(()=>{o(null,!0)}).catch(e=>{o(e,null)})},600)},d=n(510),p=n(29);var u=function(e,t,n,o){let a=p.default.serviceChannel;if(!a)return void o("microbit service not available");const r={connectType:"microbit",cmd:"upload",params:{pyScript:t}};n(1),a.sendMessage(r,(e,t)=>{e?o(e):(o(null,t),n(100))})},h={stk500v1:o.a,stk500v2:l,avr109:d.a,microbit:u},m=(n(229),n(7),n(3));let f;f=async function(e){const t={connectType:"arduino",cmd:"compile",params:{options:e.options,code:e.code}},n=e=>{m.default.emit("CompilerLog",e)},o=await new Promise((e,o)=>{const a=window.MbApi.getServiceChannel();a?(a.addListener(t.connectType,"log",(e,t)=>{n(t)}),a.sendMessage(t,(r,i)=>{a.removeListener(t.connectType,"log"),r?(n(r),o(r)):e(i)})):o("microbit service not available")});return n("arduino build finish"),e.code=o.code,e};var E={name:"arduino",process:f};const g=e=>{let t=[],n=[],o=e.split("");for(var a=0,r=o.length;a<r;a+=8)n.push(o.slice(a,a+8));for(let e of n){let n=e.join(""),o=parseInt(n,2).toString(16);parseInt(n,2)<16&&(o=`0${o}`),t.push(o)}return t=t.join(""),t},T=e=>{const t=e.match(/codey\.face(?:_at)?\(([\s\S]*?)\)/g);if(!t)return e;for(let n=0;n<t.length;n++){const o=t[n].split(",")[0].replace(/codey.face(?:_at)?\(/,"").replace(")","");if("'"===o.charAt(0)||'"'===o.charAt(0)||o.length>200){const t=o.trim().split("'").join("").replace(/\s/g,"");let n=t;if(t.length>34){const e=[];let o=0;for(;o<16;){e[o]="";let n=0;for(;n<8;)e[o]+=t[16*n+o],n++;o++}n="'"+g(e.join(""))+"'"}32===t.length&&(n="'"+t+"'"),e=e.replace(o,n)}}return e};var b={process:async function(e){return e.code=T(e.code),e},name:"codey"},S={middlewares:{[E.name]:E.process,[b.name]:b.process}};var O=(e,t,n,a)=>{if("string"==typeof t)Object(o.a)(e,t,n,a);else if(t instanceof ArrayBuffer){const r=new TextDecoder("utf-8").decode(new Uint8Array(t));Object(o.a)(e,r,n,a)}else a("unsupported image data type")};var w=(e,t,n,o)=>{if("string"==typeof t)l(e,t,n,o);else if(t instanceof ArrayBuffer){const a=new TextDecoder("utf-8").decode(new Uint8Array(t));l(e,a,n,o)}else o("unsupported image data type")};const I=n(751),C=n(753),v=n(829),R=n(24).Buffer,A={BOOTLOADER_FLASH_OFFSET:4096,FLASH_SIZES:{"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64},STUB_CODE:{data_start:1073736612,data:R.from("08c0fe3f","hex"),text:R.from("f820f43ff830f43f36410091fdffc0200088098080245648ff91faffc0200088098080245648ff1df00000001020f43f0020f43f00000008364100e5fcff81fbff0c02c02000290891faff21faffc02000226900c0200028095672ffc0200088080c128080042028301df0000000004036410065fcff169aff81edff91fcffc020009908c0200098085679ff1df00000000000010000800098c0ff3fffffff000420f43f36410021fcff32220416430565f8ff16ea04a5fbff58420cf80c1341f4ff57a80b5822805510cc3541f2ff1c03882240581125f3ff81f0ff80851051f0ffc02000890581d2ffc02000426800c0200048085674ff884248223088c03a34894239221df0000800f43f1c00f43f0000f43f90c0ff3f0840ff3f8080000084800000404000004880ff3f1000f43f94c0ff3f36410021f4ff31f7ff41f7ffc0200058024a4361f1ffc02000280620207416e209c6230061eeffb1eeffc02000a22600a0a07425a80096ca0491eaff81ebffb1ebff808980b0b980c02000c808921b00a0a0749080f41b989090f4c02000925b008a8cc02000a24800821b0091e1ff8080f497983ec02000a80481e0ff91ddff379a194602007ce8871ae94609000000c020003908c020009904460200c020009908c02000390481d1ff0c098a83c020009258000b22260202c6d9ffc6d4ff0021ceffc0200059021df00000502d064036410041a4ff583430356316e30358145a53505c4186000065e8ff8844a61804882487a5f2e5e0ff169affa81430c32020b22081f2ffe008008c3a22a0c4295458143a55591458343035c039341df0000820f43f0000400070e2fa3f48240640f0220640366100e5d9ffad0181fcffe008003d0a0c12ecea980182a2008089108901a5deff91f2ff81f3ffc02000a809808a20c02000826900b22100a1efff81f0ffe00800a023831df00000ff0f0000364100a178ff91fdff82a001824a00326a01308c41226a033030b49a22892a2a83808c410c02894a295aa5f8ff2d0a32a0c5a023931df0002c92004036410082a0c0ad0287920ea2a0db81fbffe00800a2a0dc86030082a0db87920881f7ffe00800a2a0dd81f4ffe008001df00000003641003a3206020000a202001b22e5fbff3792f41df0000000100000581000007cda0540d82e06409cda05401cdb0540362121a2d11081faffe008008609000051f6ffbd01504363cd04ad0281f6ffe00800ecfacd04bd01a2d11081f3ffe008004a224033c05663fda1ecffb2d1101aaa81eeffe00800a1e9ff1c0b1aaa25f8ff2d031df022a0631df00000364100a2a0c081cdffe008001df0000068100000701000007410000078100000fc670040a49200400868004036412161f9ff81f9ff1a661a88490672d1100c062c0a590862671a81f6ffe0080081cfff47b802463600ad0781cfffe008004d0651efff61cbff1a556a818905062d000081e9ff4063c01a888808bd01606863cd0620a22081c5ffe008008cea91e1ff0c055267166d059a51460d000025f6ff60b620ad01e5ecffa5f5ffcd0610b12070a72081baffe008006a226a4437b4cc81d6ff5064c01a8888088736a306efff000081d4ffe0080081d1ff108880b22800657500f7ea0df6460a60b580a24b001b6606f7ff7cebb79ad7264627a1a5ff70b7201aaa81a7ffe0080065efffa1a0ff1c0b1aaae5e5ffa5eeff2c0a81c3ffe008001df052271a37b5d157b48ec6f2ff1df0000000c0fe3f4f484149a4ebff3f34f109400c00f43f3840f43fffff0000000001008c800000104000000040000000c0fe3f04c0fe3f102700001400f43fffff0f00a4ebff3f08c0fe3fb0c0ff3f7c680040ec670040588600406c2a064038320640cc2c06404c2c064034850040cc90004030ef0540589200404c820040142c064036c10021e0ff0c0a22610842a00081efffe0080021dbff31dcff0601004262004b223732f765e2ff0c4ba2c12025d9ffa5e1ff41e0fe21e0feb1d4ff0c0c2a240c5ac02000490281e2ffe0080031d0ff22a101c0200058032c0a202520c0200029038184ffe0080081dbffe0080021c9ffc020003802ccba1cc220231022c2f80c1320a3830c0b81d4ffe00800f1c2ffd152ffc1c2ffb1a5fee2a1000c0a81cfffe0080031a4fe52d32b41c2fe61bcff6a24c0200068021676ffc0200078020c06c0200069020c122241102207010c2822411182510969512692081c3667121f460800002207036207028022116022206642112827c0200028022951460100001c2222510965d4ff0c8ba2c11025cbff22070382070280221180822021a2ff87b211a2a0c065c6ffa2a0ee25c6ffe5d1ff46ddff6207010cd227960206910067324e666602c6af00f67620663602c66500f64608662602c64b0046ae00664602067b00665602868e0086aa000c92279602068600673208667602c68b0086a500669602c683000cb227960246790046a1001c32279602c6390067322866b602c643001c0267320a0cf2279602062e000699001c12279602864b001c2227960246630046940022a0d127162d67320922a0d0271618c68f000022a0d227960286250022a0d3279602462501468a000c1216183ead022d0a868500268802868300c6f8000000e5afff604620602280162a01867e0000a0ac418172ffe0080056da1e42d4f040a2c0cc2486010100a060f45616fe615aff860300a0a0f5816affe00800569a1c6044c040a2c04736ea860300a0ac418163ffe00800561a1b42d4f040a2c056a4fe46f2000c0622a0c0268802466a0086f200000066b80286f00086460066b80286db00c6600022a00126b802065f009227048144ff62a00022a0c2871902c65d00b857a82765aaffc6d3000000000c1466b82ca847813bff0c0622a0c2871a024655008837b857a82720881189c1e5a7ff2117fe88c1696222d22b8922a046832d048649009112fe0c06a2090022a0c6679a028648006827285982c8f08066c092a0c060299362c7189d06b2a0efc60100a209001b99a0bb3060a9c0872af1820705a20704620706808811a0982000661190862062070792a0c1806601806620608bc08029930c064633000081f9fd0c0692080022a0c6679902c62e00983822a0c8671902062c006248002858062a001c8227980246a3000c060c124626000066480246a70006200066b80206a90046010066480206a9000c0622a0c0061e0066b80246a700061800c1fffe0c06a80c0c1282c8f09d06809293a0269320991022a0c6679952b1f9fe6d09d80b22a0c9873d4580e0140c0622a0c0679e3a62c7182d0ec602002a9698094b22990a4baa0c1920edc08732ed161924a90ce90b868e0000006688028692000c120c06c60100000062a00022a0ff20a074a596ff60a0746596ff25a2ff56a2c76207010cf8871631673815664602065600666602c65b002636024617ff061b00001c2227960206500022a0d227164b1c12271602c610ff461b00a1d2fe81dffee0080061d1fe81d1fec020006806b837808610c08811606435806680b06682b82720a220b0b6c281d5fee00800a2a3e881d2fee008004600ff0000d22705c22704b22703a827259cff86fbfe00b2070322070280bb1120bb20b2cbf0a2c718257dff46f5fe00000062070382070280661180662022c71862c6f00c19861d0041b4fe71b0fde8046971e077c0796178250c3977360292a00199d1e9c16563ff98d171adfee8c1a1acfebd029901f2c118dd07c2c11c81b3fee008009d0ab825a871a0bbc0b925a066c0b804aa22a861aabb0ba9a0a920b904a0af0570bbc0cc9ac2db800c1dc0ad8316aa00ad0799d12574ff98d179048cb678338c77907f319077c09697f7d6890022a0c72953063e000056490f28331612b222a0c8060100000022a0c9295346c4fe00a82756bab08195fee00800a184fe8190fee008008192fee00800c6bcfe683716e6ae20a220818dfee00800a2a3e88188fee00800e0060086b5fe0089c18189fee0080088c1a08293ad084603ff282768376082208080b41608c1c685ffb22703a22702257fff22a0000c16a026934681fff877e867d857c847b837a8270c128171fee008006d0a0c0a602a83067dffa8270c0b816bfee008000c020676ff0028276837c0200069020c062d060675ff2159fe8857682789022157fe690206f6ff9155fe0c08680922a0c86028836d022151fe890989020c126028830666ff0028331622f1468afe1df000003641009d0282a0c0280387990ecc320c12c606000c0229037ce21df0261205262212060c0082a0db8029238799290c22290306080022a0dc2799080c1229032d081df00082a0dd7cf287990b0c12290322a0db1df0007cf21df00000","hex"),text_start:1074393088,entry:1074394468}},y=233,N=16384,k=3,L=8,P=30,D=16,M=17,x=8,U=.1,_=239,j=19,q=18,F=2,B=5,G=6,H=7,V=6144,z="8MB",K=e=>{if(-1<e.indexOf("MB"))return 1024*parseInt(e.substring(0,e.indexOf("MB")))*1024;if(-1<e.indexOf("KB"))return 1024*parseInt(e.substring(0,e.indexOf("KB")));throw new Error("Unknown size "+e)};const W=new class{constructor(){this.init()}init(){this.buf=[],this.temp=[]}write(e){const t=K(z);if(this.temp.length>t)throw new Error("");return e.forEach((e,t)=>{this.temp.push(e)}),this.slip_write(),!0}read(){let e=[];return this.buf.length>0&&(e=this.buf.shift()),R.from(e)}slip_write(){let e,t=!1,n=null,o=0;for(;0<this.temp.length&&o!==this.temp.length;){if(e=this.temp[o],null===n){if(192!==e){this.temp.splice(0,o+1),o=0;continue}n=[]}else if(t)if(t=!1,220===e)n.push(192);else{if(221!==e){this.temp.splice(0,o+1),o=0;continue}n.push(219)}else if(219===e)t=!0;else{if(192===e){this.temp.splice(0,o+1),o=0,this.buf.push(n),0!==n.length&&(n=null);continue}n.push(e)}o++}}};class Y{constructor(e){this.recevie=!1,this.inst=e,this.isOpen=!0,this.inst.on("data",e=>{this.recevie=!0,W.write(e)}),this.inst.on("disconnect",()=>{this.isOpen=!1})}write(e){if(this.recevie=!1,!this.isOpen)throw new Error("serialport is diconnect");W.buf=[],this.inst.write(e,"utf8",()=>{})}}class X{constructor(e,t,n,o,a){this.firmwareDataBuffer=R.from(t),this.progressHandle=n,this.progresscb=o,this._port=e,this.tag=a,this.initEsp()}initEsp(){this.flash_size=z,this.addrIdx=4096,this.flash_mode="dio",this.flash_freq="keep",this.compress=!0,this.flashingGo=!1,this.STATUS_BYTES_LENGTH=4,this.IS_STUB=!1,this._port.inst.set({rts:!0,dtr:!0})}pad_to(e,t,n=255){const o=e.length%t;if(0!==o){const a=[];for(let e=0;e<t-o;e++)a.push(n);e=R.concat([e,R.from(a)])}return e}_update_image_flash_params(e,t,n){if(n.length<8)return n;let[o,a,r,i]=new I("BBBB").unpack(n.slice(0,4));if(e!==A.BOOTLOADER_FLASH_OFFSET||o!==y)return n;"keep"!==t.flash_mode&&(r={qio:0,qout:1,dio:2,dout:3}[t.flash_mode]);let s=15&i;"keep"!==t.flash_freq&&(s={"40m":0,"26m":1,"20m":2,"80m":15}[t.flash_freq]);let c=240&i;"keep"!==t.flash_size&&(c=A.FLASH_SIZES[t.flash_size]);const l=new I("BB").pack(r,c+s);return 0!==l.compare(n.slice(2,4))&&(n=R.concat([n.slice(0,2),l,n.slice(4)])),n}async flash_defl_begin(e,t,n){const o=parseInt((t+N-1)/N),a=parseInt((e+N-1)/N);let r,i;return this.IS_STUB?(r=e,i=k):(r=a*N,i=this.timeout_per_mb(P,r)),await this.check_command("enter compressed flash mode",D,new I("<IIII").pack(r,o,N,n),0,i),o}async check_command(e,t=null,n=[],o=0,a=k){const[r,i]=await this.command(t,n,o,a);if(i.length<this.STATUS_BYTES_LENGTH)throw new Error(`Failed to ${e}. Only got ${i.length} byte status response.`);if("00"!==i.slice(i.length-this.STATUS_BYTES_LENGTH).slice(0,1).toString("hex"))throw new Error(`Failed to ${e}`);return i.length>this.STATUS_BYTES_LENGTH?i.slice(0,i.length-this.STATUS_BYTES_LENGTH):r}read_from_pool(e,t){let n=0;return new Promise(o=>{const a=setInterval(()=>{const r=W.read();if(0===r.length&&n++,10*t<n)return clearInterval(a),void o(!1);try{const[,t,,n]=new I("<BBHI").unpack(r.slice(0,8)),i=r.slice(8);null!==e&&t!==e||(clearInterval(a),o([n,i]))}catch(e){}},100)})}async command(e=null,t,n=0,o=k){if(null!==e){const o=R.concat([new I("<BBHI").pack(0,e,t.length,n),t]);await this.write(o)}const a=await this.read_from_pool(e,o);if(!1!==a)return a;throw new Error("Response doesn't match request")}async write(e){const t=[192];return e.forEach((e,n)=>{219===e?(t.push(219),t.push(221)):192===e?(t.push(219),t.push(220)):t.push(e)}),t.push(192),await this._port.inst.drain(),this._port.write(t),new Promise(e=>{const t=(new Date).getTime(),n=setInterval(()=>{(this._port.recevie||2e3<(new Date).getTime()-t)&&(clearInterval(n),e())},100)})}timeout_per_mb(e,t){const n=e*(t/1e6);return n<k?k:n}checksum(e,t=_){return e.forEach((e,n)=>{t^="number"==typeof e?e:e.charCodeAt()}),t}async flash_defl_block(e,t,n=k){await this.check_command(`write compressed data to flash after seq ${t}`,M,R.concat([new I("<IIII").pack(e.length,t,0,0),e]),this.checksum(e),n)}async flash_md5sum(e,t){const n=this.timeout_per_mb(L,t),o=await this.check_command("calculate md5sum",j,new I("<IIII").pack(e,t,0,0),0,n);if(32===o.length)return o.toString("utf8");if(16===o.length)return o.toString("hex").toLowerCase();throw new Error(`MD5Sum command returned unexpected result: ${o.toString()}`)}async flash_defl_finish(e=!1){const t=new I("<I").pack(Number(!e));await this.check_command("leave compressed flash mode",q,t)}async flash_begin(e,t){const n=parseInt((e+N-1)/N),o=this.get_erase_size(t,e);await this.check_command("enter Flash download mode",F,new I("<IIII").pack(o,n,N,t),0,k)}get_erase_size(e,t){return t}async mem_begin(e,t,n,o){return await this.check_command("enter RAM download mode",B,new I("<IIII").pack(e,t,n,o))}async mem_block(e,t){return await this.check_command("write to target RAM",H,R.concat([new I("<IIII").pack(e.length,t,0,0),e]),this.checksum(e))}async mem_finish(e=0){const t=new I("<II").pack(Number(0===e),e);try{return await this.check_command("leave RAM download mode",G,t,0,k)}catch(e){if(this.IS_STUB)throw e;return}}async run_stub(){const e=A.STUB_CODE;for(const t of["text","data"])if(e[t]){const n=e[t+"_start"],o=e[t].length,a=parseInt((o+V-1)/V);await this.mem_begin(o,a,V,n);for(let n=0;n<a;n++){const o=n*V;let a=o+V;a=a>e[t].length?e[t].length:a,await this.mem_block(e[t].slice(o,a),n)}}await this.mem_finish(e.entry);const t=W.read();if("OHAI"!==t.toString())throw new Error(`Failed to start stub. Unexpected response: ${t.toString()}`);return this.IS_STUB=!0}async _connect_attempt(e="default_reset_connect_attempt",t=!1){if(!this._port.isOpen)throw new Error("serialport is diconnect");let n=null;if("no_reset_no_sync"===e)return n;"no_reset"!==e&&(this._port.inst.set({dtr:!1,rts:!0}),await this.sleep(.1),t&&await this.sleep(1.2),this._port.inst.set({dtr:!0,rts:!1}),t&&await this.sleep(.4),await this.sleep(.05),this._port.inst.set({dtr:!1,rts:!1}));for(let e=0;e<5;e++)try{return await this._port.inst.drain(),await this.sync(),null}catch(e){await this.sleep(.05),n=e}return n}async sync(){const e=[7,7,18,32];for(let t=0;t<32;t++)e.push(85);const t=R.from(e);await this.command(x,t,0,U);for(let e=0;e<7;e++)await this.command()}sleep(e){return new Promise(t=>{setTimeout(()=>{t()},1e3*e)})}async connect(e="default_reset"){let t;try{for(let n=0;n<7;n++){if(t=await this._connect_attempt(e,!1),null===t)return;if(t=await this._connect_attempt(e,!0),null===t)return}}catch(e){}throw new Error("Failed to Boot.")}async hard_reset(){this._port.inst.set({rts:!0,dtr:!1}),await this.sleep(.1),this._port.inst.set({rts:!1,dtr:!1})}async write_flash(){const e={};e.flash_size=this.flash_size,e.flash_mode=this.flash_mode,e.flash_freq=this.flash_freq,e.compress=this.compress,await this.connect("default_reset");const t=K(e.flash_size),n=parseInt(this.addrIdx,10);if(t<n+this.firmwareDataBuffer.length)throw new Error(`Firmware (length ${this.firmwareDataBuffer.length}) at offset ${n} will not fit in ${t} bytes of flash. Use --flash-size argument, or change flashing address.`);let o=this.pad_to(this.firmwareDataBuffer,4);o=this._update_image_flash_params(n,e,o);const a=C.createHash("md5").update(o).digest("hex"),r=o.length;await this.run_stub(),this.flashingGo=!0;const i=o;o=v.deflateSync(i,{level:9});const s=r/o.length;this.STATUS_BYTES_LENGTH=2;const c=await this.flash_defl_begin(r,o.length,n);let l,d=0,p=0,u=0,h=(new Date).getTime();for(;o.length>0;)p=parseInt(100*(d+1)/c),p<100&&this.progressHandle(this.tag,this.progresscb,p),l=o.slice(0,N),await this.flash_defl_block(l,d,k*s),o=o.slice(N),d+=1,u+=l.length;if(h=(new Date).getTime()-h,await this.flash_md5sum(n,r)!==a)throw new Error("MD5 of file does not match data in flash!");await this.flash_begin(0,0),await this.flash_defl_finish(!1),await this.hard_reset(),this.progressHandle(this.tag,this.progresscb,100)}}var J=class{constructor(e,t,n,o,a){const r=new Y(e);this.currentTag=a,this.esptool=new X(r,t,n,o,a)}async bootLoad(e,t){try{W.init(),this.esptool.initEsp(),await this.esptool.write_flash(),e(this.currentTag,t,null,()=>{})}catch(n){e(this.currentTag,t,n,null)}}};let $=null;class Q{constructor(){this.tag=(new Date).getTime()}call(e,t,n,o){$===e&&t(n,o)}progress(e,t,n){$===e&&t(n)}}var Z=async function(e,t,n,o,a){const r=new Q;$=r.tag;try{new J(e,t,r.progress,n,$).bootLoad(r.call,o)}catch(e){o("new esp drivers fail.")}},ee=n(15),te=n(230),ne=n(13);let oe="esptoolByExec";const ae=e=>{window.uploadFirmwareMode=oe=e},re=function(){ne.a.replace("/"),te.a.disconnect(null,!0)};var ie=function(e,t,n,o,a){a=a||{};const r=function(){Z(e,t,n,o,a)};if(!ee.a.isWindows||"esptoolByExec"!==oe||"esptoolByExec"!==a.driverName)return void r();const i=p.default.serviceChannel;if(!i)return void o("esptoolByExec service not available");if(!e||!e.options)return void o("port not found");i.sendMessage({connectType:"esptoolByExec",cmd:"",params:{}},(e,t)=>{e&&e.toString().includes("unknown")?r():s()});const s=function(){m.default.on("firmware.update.cancel",t=>{const n=e.connectType+"."+e.options.port;t&&t.address===n&&i.client.emit("esptoolByExec.cancel")}),m.default.on("disconnect",()=>{re()}),i.client.on("disconnect",(e,t)=>{ae("js")});const r={connectType:"esptoolByExec",cmd:"upload",params:{options:Object.assign({port:e,data:t},a)}};te.a.setSoftDisconnectMode(!0),e.close(()=>{i.sendMessage(r,(e,t)=>{if(te.a.setSoftDisconnectMode(!1),e){if(ae("js"),o(e),e.toString().includes("unknown"))return void re()}else o(null,t)})},!0),i.client.on("esptoolByExec.progress",e=>{n(e.percent)}),i.client.on("esptoolByExec.portDisconnect",()=>{re()})}},se={stk500v1:O,stk500v2:w,esptool:Z,esptoolByExec:ie};t.a={drivers:h,upload:S,firmware:se}},897:function(e,t){},92:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),t.b={CANCELED:"canceled",PENDING:"pending",FAILED:"failed",DONE:"done",TIMEOUT:"timeout"};const o={CANCELED:"canceled",PENDING:"pending",FAILED:"failed",DONE:"done",TIMEOUT:"timeout"}},99:function(e,t,n){"use strict";var o=n(4),a=n.n(o);const r=n(51).default,i=n(3).default;let s={};(()=>{const e=()=>window.mstore?window.mstore.getState().intlr.messages:r.intlInitialState.messages;a.a.isEmpty(s)&&(s=e()),i.on("SwitchLanguage",()=>{setTimeout(()=>{s=e()},0)})})();t.a=e=>a.a.isString(e)?a.a.has(s,e)?-1===e.indexOf(".")?a.a.get(s,e):s[e]:window.Mscratch.instance.formatMessageId(e):a.a.has(s,e.id)?-1===e.id.indexOf(".")?a.a.get(s,e.id):s[e.id]:window.Mscratch.instance.formatMessageId(e.id)}});