(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[4],{1006:function(n,e,t){var r=t(1007);"string"==typeof r&&(r=[[n.i,r,""]]);var i={hmr:!0,transform:void 0};t(21)(r,i);r.locals&&(n.exports=r.locals)},1007:function(n,e,t){(e=n.exports=t(20)(!1)).push([n.i,'/*\n  舞台下方编辑区域、代码编辑主区域、toolbox 区域\n*/\n/* #E5F0FF */\n/* #E9F1FC */\n/* #D9E3F2 */\n/* 90% transparent version of motion-primary */\n/* #FFFFFF */\n/* 25% transparent version of ui-white */\n/* 15% transparent version of black */\n/* #575E75 */\n/* #4C97FF */\n/* #3373CC */\n/* 35% transparent version of motion-primary */\n/* #FF661A */\n/* #E64D00 */\n/* #CF63CF */\n/* #BD42BD */\n/* #FFAB19 */\n/* #FF8C1A */\n/* #0FBD8C */\n/* 主页面背景颜色 */\n/* tab 栏常规 */\n/* 主色调颜色（蓝色）：包含：选中的字体颜色、主要按钮颜色 */\n/* border 颜色 */\n/* 灰色提示文字颜色 */\n/* 辅助文字颜色 */\n/* 分割线颜色 */\n/* 一般字体颜色 */\n/* 主要按钮hover颜色 */\n/* 按钮点击颜色 */\n/* 危险按钮颜色 */\n/* 危险按钮hover颜色 */\n/* mobile style */\n/* 25% transparent version of ui-white */\n.terminal_container {\n    position: relative;\n    max-height: 320px;\n    background-color: #fff;\n    border-radius: 0 0 12px 12px;\n    overflow: hidden;\n}\n.terminal_split-bar {\n    width: 100%;\n    height: 100%;\n    cursor: row-resize;\n    opacity: 0;\n    -webkit-box-flex: 1;\n    -webkit-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    height: 40px;\n}\n.terminal_log-header {\n    background-color: #fff;\n    border-bottom: 1px solid var(--LINE-COLOR);\n    border-top: 1px solid var(--LINE-COLOR);\n    font-size: 12px;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n    -webkit-justify-content: space-between;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.terminal_log-header .terminal_title {\n    padding: 0 1em;\n    opacity: 0;\n    visibility: hidden;\n}\n.terminal_header-right {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    height: 100%;\n    padding: 0 14px;\n}\n.terminal_header-right a {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    height: 100%;\n    text-align: center;\n    text-decoration: none;\n    color: #6a6a6a;\n    padding: 0 4px;\n}\n.terminal_header-right a:hover {\n    color: #46b5ff;\n}\n.terminal_log-container {\n    overflow: auto;\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text;\n    font-size: 12px;\n    height: calc(100% - 46px);\n    font-family: Menlo, Monaco, "Courier New", monospace;\n}\n.terminal_log {\n    margin: 0;\n    padding: 3px 6px 3px 24px;\n    margin-bottom: -1px;\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text;\n    position: relative;\n    min-height: 2.25em;\n    white-space: normal;\n    line-height: 18px;\n    border-top: 1px solid #ececec;\n    color: #333;\n    -webkit-font-smoothing: auto;\n}\n.terminal_log-container .terminal_log:first-child {\n    border-top: none;\n}\n.terminal_log::before {\n    position: absolute;\n    left: 6px;\n    font-size: 12px;\n    /* content: "\\279C"; */\n    top: 4px;\n}\n.terminal_log.terminal_error {\n    border-top: 1px solid rgb(254, 203, 204);\n    border-bottom: 1px solid rgb(254, 203, 204);\n    background: rgb(254, 236, 236);\n    color: rgb(251, 13, 32);\n}\n.terminal_log.terminal_error::before {\n    content: "\\2717";\n}\n.terminal_log.terminal_info {\n    color: rgb(106, 106, 106);\n}\n.terminal_log.terminal_warn {\n    border-color: 1px solid rgb(255, 244, 181);\n    background: rgb(255, 251, 223);\n    color: rgb(78, 51, 5);\n}\n.terminal_log.terminal_warn::before {\n    content: "\\26A0";\n    color: #f1b10a;\n}\n.terminal_log.terminal_trace {\n    border-top-color: rgba(200, 80, 80, 0.5);\n    border-bottom-color: rgba(200, 80, 80, 0.5);\n    color: rgb(200, 80, 80);\n    background-color: rgba(200, 80, 80, 0.1);\n}\n.terminal_trigger-bar {\n    cursor: pointer;\n    height: 24px;\n    position: absolute;\n    top: -24px;\n    border: 1px solid #ccc;\n    display: block;\n    left: 50%;\n    -webkit-transform: translateX(-50%);\n        -ms-transform: translateX(-50%);\n            transform: translateX(-50%);\n    z-index: 100;\n}\n.terminal_log-line {\n    margin: 0;\n}',""]),e.locals={container:"terminal_container","split-bar":"terminal_split-bar",splitBar:"terminal_split-bar","log-header":"terminal_log-header",logHeader:"terminal_log-header",title:"terminal_title","header-right":"terminal_header-right",headerRight:"terminal_header-right","log-container":"terminal_log-container",logContainer:"terminal_log-container",log:"terminal_log",error:"terminal_error",info:"terminal_info",warn:"terminal_warn",trace:"terminal_trace","trigger-bar":"terminal_trigger-bar",triggerBar:"terminal_trigger-bar","log-line":"terminal_log-line",logLine:"terminal_log-line"}},1008:function(n,e,t){"use strict";(function(n){t.d(e,"a",(function(){return r}));let r=async e=>{try{n.eval(e)}catch(n){console.error(n)}}}).call(this,t(64))},1009:function(n,e,t){var r=t(1010);"string"==typeof r&&(r=[[n.i,r,""]]);var i={hmr:!0,transform:void 0};t(21)(r,i);r.locals&&(n.exports=r.locals)},1010:function(n,e,t){(e=n.exports=t(20)(!1)).push([n.i,"/*\n  舞台下方编辑区域、代码编辑主区域、toolbox 区域\n*/\n/* #E5F0FF */\n/* #E9F1FC */\n/* #D9E3F2 */\n/* 90% transparent version of motion-primary */\n/* #FFFFFF */\n/* 25% transparent version of ui-white */\n/* 15% transparent version of black */\n/* #575E75 */\n/* #4C97FF */\n/* #3373CC */\n/* 35% transparent version of motion-primary */\n/* #FF661A */\n/* #E64D00 */\n/* #CF63CF */\n/* #BD42BD */\n/* #FFAB19 */\n/* #FF8C1A */\n/* #0FBD8C */\n/* 主页面背景颜色 */\n/* tab 栏常规 */\n/* 主色调颜色（蓝色）：包含：选中的字体颜色、主要按钮颜色 */\n/* border 颜色 */\n/* 灰色提示文字颜色 */\n/* 辅助文字颜色 */\n/* 分割线颜色 */\n/* 一般字体颜色 */\n/* 主要按钮hover颜色 */\n/* 按钮点击颜色 */\n/* 危险按钮颜色 */\n/* 危险按钮hover颜色 */\n/* mobile style */\n/* 25% transparent version of ui-white */\n/* origin is 0.625rem 0.55rem 0.6rem */\n/* layout contants from `layout-constants.js` */\n/* 3.6rem; */\n/* blocks 区样式 */\n/* mobile style */\n/* Theme2 */\n/* 通用的间隔 */\n/* 圆角大小 */\n/* 弹窗标题高度 */\n/* 弹窗底部高度 */\n/* 侧边栏阴影 */\n/* 边框 */\n/* 最蓝 */\n/* 背景蓝 #E2F4FF*/\n/* mobile style */\n.run-button_run-btn {\n    position: relative;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n        -ms-flex-align: center;\n            align-items: center;\n    color: #fff;\n    width: 6.8rem;\n    height: 32px;\n    border:0;\n    border-radius: 16px;\n    margin-left: 20px;\n    cursor: pointer;\n    padding: 0;\n}\n.run-button_run-btn > span {\n    width: 1rem;\n    height: 100%;\n    margin-right: .5rem;\n    overflow: hidden;\n    font-size: 14px;\n}\n.run-button_run-btn > span > svg {\n    -webkit-transform: scale(2);\n        -ms-transform: scale(2);\n            transform: scale(2);\n}",""]),e.locals={"run-btn":"run-button_run-btn",runBtn:"run-button_run-btn"}},1014:function(n,e,t){"use strict";t.r(e);var r=t(11),i=t.n(r),o=t(0),a=t.n(o),s=t(16),l=t(3),c=t.n(l),h=t(8),d=t.n(h),m=t(22),g=t(377),p=t(23),u=t(9),b=t(6),f=t(69),x=t(12),v=t(91),w=t(17),_=t(866),y=t(1008),F=t(47),C=t(1009),k=t.n(C);class M extends a.a.PureComponent{constructor(n){super(n),this.state={running:!1},this.runningListener=this.runningListener.bind(this),this.runCode=this.runCode.bind(this)}componentDidUpdate(n,e){n.editingTarget!==this.props.editingTarget&&this.props.editingTarget&&this.setState({running:F.a.isRunning(this.props.editingTarget.id)||!1})}runCode(){const n=u.a.currentSprite;if(!n)return;const e=u.a.getCodeType(),t=u.a.getSpriteCodes(),r=t&&t[e];"python"===e&&r?this.state.running?F.a.clearID(n.id):_.a(r,n.getName()):"javascript"===e&&r&&y.a(r)}componentDidMount(){F.a.addChangeListener(this.runningListener)}componentWillUnmount(){F.a.removeChangeListener(this.runningListener)}runningListener(n){this.setState({running:n})}render(){return!this.props.visible||u.a.getDeviceId()?null:a.a.createElement(v.a,{onClick:this.runCode,className:k.a.runBtn,solid:!0},a.a.createElement(m.a,{type:this.state.running?"running":"run",color:"#fff",hover:!1}),a.a.createElement(w.a,{id:`gui.editor.${this.state.running?"running":"run"}`,defaultMessage:this.state.running?"running":"run"}))}}var E=M,L=t(1006),D=t.n(L);t.d(e,"default",(function(){return N}));const S=320,T=41;class B extends a.a.Component{constructor(n){super(n),this.mouseMoveTimer=null,this.state={height:200,startY:0,isLockHeight:!1,isMouseDown:!1,dataSource:[]},Object(r.bindAll)(this,["handleMouseUp","handleMouseMove","onLog"])}componentDidMount(){window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("mouseleave",this.handleMouseUp),window.addEventListener("mousemove",this.handleMouseMove),b.a.addListener(f.a.layout.code.log,this.onLog),this.mounted=!0,this.setState({dataSource:g.a.dataSource.data.data}),g.a.dataSource.onChagneHandler=i.a.throttle(n=>{let e=[...n.data],t=n.buffer.info;t&&e.push({type:"info",msg:t});let r=n.buffer.log;r&&e.push({type:"info",msg:r});let i=n.buffer.warn;i&&e.push({type:"warn",msg:i});let o=n.buffer.error;o&&e.push({type:"error",msg:o}),this.mounted&&this.setState({dataSource:e},()=>{this.logContainer.scrollTop=this.logContainer.scrollHeight})},100)}componentWillUnmount(){window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("mouseleave",this.handleMouseUp),window.removeEventListener("mousemove",this.handleMouseMove),b.a.removeListener(f.a.layout.code.log,this.onLog),this.clearMouseMoveTimer(),this.mounted=!1}clearMouseMoveTimer(){this.mouseMoveTimer&&clearTimeout()}handleClick(){this.setState({height:"320px"})}handleMouseDown(n){const{isMouseDown:e,height:t}=this.state;e||(this.startHeight=parseInt(t),this.setState({startY:n.clientY,isMouseDown:!0}))}handleMouseUp(){const{isMouseDown:n}=this.state;n&&this.setState({isMouseDown:!1})}handleMouseMove(n){this.clearMouseMoveTimer();let{isMouseDown:e,startY:t,height:r}=this.state;if(e&&this.container){this.startHeight||(this.startHeight=parseInt(r));let e=this.startHeight+t-n.clientY;if(e=Math.max(e,T),e=Math.min(e,S),e===this.startHeight)return;this.setState({height:`${e}px`},()=>{let{mode:n}=this.props;this.setState({isLockHeight:"block"===n&&0!==this.state.height})})}}handleClean(){g.a.dataSource.clean()}onLog(n,e,...t){"trace"===e||"debug"===e||"info"===e?g.a.info(...t):"warn"===e?g.a.warn(...t):"error"===e&&g.a.error(...t),this.logContainer&&x.b.toBottom(this.logContainer)}render(){const{height:n,dataSource:e}=this.state,{isBlock:t,deviceId:r,editingTarget:i}=this.props;return a.a.createElement("div",{className:D.a.container,ref:n=>this.container=n,style:{height:n}},a.a.createElement("div",{className:D.a.logHeader},a.a.createElement("div",{className:D.a.headerLeft},a.a.createElement(E,{visible:!t&&!r,editingTarget:i})),a.a.createElement("span",{className:D.a.splitBar,onMouseDown:this.handleMouseDown.bind(this)}),a.a.createElement("div",{className:D.a.headerRight},a.a.createElement(m.a,{type:"clear",color:"var(--PRIMARY-COLOR)",width:16,height:16,onClick:this.handleClean.bind(this),title:Object(p.a)("gui.terminal.clear")}))),a.a.createElement("div",{id:"codeConsole",className:D.a.logContainer,ref:n=>this.logContainer=n},e.map((n,e)=>a.a.createElement("div",{key:e,className:d()(D.a.log,D.a[n.type])},n.msg.split("\n").filter(n=>n.trim().length>0).map((n,e)=>a.a.createElement("pre",{className:D.a.logLine,key:e},n))))))}}B.propTypes={mode:c.a.string};const N=Object(s.connect)(({vm:n,intl:e})=>{const t=n.editingTarget;return{editingTarget:t,deviceId:t&&u.a.getDeviceId(t),messages:e.messages}})(B)}}]);
//# sourceMappingURL=mblock.8cc4e67e076a7108.js.map