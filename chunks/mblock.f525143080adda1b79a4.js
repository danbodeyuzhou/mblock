(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1182:function(e,t,n){(e.exports=n(68)(!1)).push([e.i,".connect-page {\n  text-align: center;\n  background-color: transparent;\n}\n.connect-page .checker .message {\n  font-size: 12px;\n}\n.connect-page .checker .img-wrap .drive-content {\n  text-align: left;\n}\n.connect-page .checker .img-wrap .drive-img {\n  margin: 0 10px 0 0;\n}\n.connect-type-image {\n  width: 30%;\n  display: block;\n  margin: 0 auto;\n}\n.icon-ble {\n  font-size: 10em !important;\n  color: #999;\n}\n.connect-icon {\n  display: block;\n  font-size: 6em !important;\n  color: #bdbdbd;\n  margin: 25px 0 40px;\n}\n.connect-icon svg {\n  width: 100%;\n}\n.helpTip {\n  /* text-align: center; */\n  /* margin-top: 1em; */\n  max-width: 320px;\n  max-height: 200px;\n  overflow-y: auto;\n  margin-top: 30px;\n  padding-left: 1.5em;\n  text-align: left;\n  color: #888888;\n}\n.helpTip li {\n  list-style: none;\n  line-height: 1.6;\n  text-indent: -1.5em;\n}\n.helpTip li::before {\n  padding: 0 12px 0 0;\n  content: '\\2022';\n  color: var(--BTN-HOVER-COLOR);\n  font-style: normal;\n  text-decoration: none;\n}\n.helpTip li a {\n  text-decoration: underline;\n}\n.helpTip.fail {\n  color: #ff7272;\n  margin: 30px 0 30px 0;\n}\n.helpTip.fail li::before {\n  color: #ff7272;\n}\n.helpTip.fail li a {\n  color: var(--BTN-HOVER-COLOR);\n}\n.btn-connect {\n  width: 100%;\n}\n.hid-description {\n  text-align: left;\n  display: inline-block;\n}\n.ble-select-wrap {\n  position: relative;\n}\n.ble-select-wrap .anticon-loading {\n  position: absolute;\n  left: 0em;\n  top: 0.75em;\n}\n.ble-select-wrap .ant-select-selection-selected-value {\n  width: 100%;\n}\n.connect-only-tip {\n  color: #999;\n  font-size: 12px !important;\n  margin-top: 1rem;\n  line-height: 1.5;\n  text-align: left;\n}\n.connect-only-tip .mblock-icon {\n  color: #fdc02f;\n  margin-right: 3px;\n}\n.icon-wifi {\n  font-size: 6rem !important;\n}\n.icon-warning {\n  font-size: 3rem !important;\n}\n.connect-all-text {\n  color: #888;\n}\n.connected-text {\n  color: #ccc;\n  margin-left: 0.5rem;\n  display: inline-block;\n  transform: scale(0.85);\n}\n.blessi {\n  color: var(--BTN-HOVER-COLOR);\n}\n.connect-option-inner {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.connect-option-inner span {\n  max-width: 86%;\n  display: inline-block;\n  vertical-align: middle;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.connect-option:hover.ant-select-dropdown-menu-item-selected,\n.connect-option:hover .ant-select-dropdown-menu-item-selected:hover {\n  background-color: var(--BTN-HOVER-COLOR) !important;\n  color: white;\n}\n.connect-option:hover span {\n  color: white;\n}\n.connect-option:hover .blessi {\n  color: white;\n}\n.nodriver-modal .message {\n  font-size: 14px;\n  font-weight: 300;\n  color: #5a5a5a;\n  margin-bottom: 20px;\n}\n.nodriver-modal .img-wrap {\n  text-align: center;\n  margin-bottom: 10px;\n}\n.nodriver-modal .img-wrap .drive-img {\n  width: 100px;\n}\n.nodriver-modal .download {\n  font-size: 16px;\n  color: var(--BTN-HOVER-COLOR);\n  text-align: center;\n  text-decoration: underline;\n  line-height: 22px;\n}\n.nodriver-modal .download .link-icon {\n  margin-top: 4px;\n}\n.nodriver-modal .download .link-text {\n  font-weight: 600;\n  margin-left: 0.5rem;\n}\n.checker-modal-footer {\n  text-align: center !important;\n  position: relative;\n}\n.checker-modal-footer a {\n  position: absolute;\n  right: 0;\n  line-height: 32px;\n  color: #b3b3b3;\n  text-decoration: underline;\n}\n.checker-footer {\n  border-top: 1px solid #e0e5eb;\n  padding-top: 8px;\n}\n.checker-footer button {\n  margin: 5px 2px;\n  font-size: 14px;\n}\n.checker .message {\n  font-size: 14px;\n  color: #455671;\n  margin-bottom: 20px;\n}\n.checker .img-wrap {\n  margin-bottom: 10px;\n  display: flex;\n  align-items: flex-start;\n  flex-direction: row;\n}\n.checker .img-wrap .drive-img {\n  margin: 0 30px 0 14px;\n  width: 100px;\n  pointer-events: none;\n}\n.checker .img-wrap .drive-content {\n  flex: 1;\n}\n.checker .img-wrap .drive-content p {\n  margin-bottom: 5px;\n  font-size: 14px;\n  color: #455671;\n}\n.checker .img-wrap .drive-content ul {\n  padding-left: 1.5em;\n  text-align: left;\n  color: #909aaa;\n}\n.checker .img-wrap .drive-content ul li {\n  list-style: none;\n  line-height: 1.6;\n  text-indent: -1.5em;\n  word-break: break-word;\n}\n.checker .img-wrap .drive-content ul li::before {\n  padding: 0 12px 0 0;\n  content: '\\2022';\n  color: var(--BTN-HOVER-COLOR);\n  font-style: normal;\n  text-decoration: none;\n}\n.checker .img-wrap .drive-content ul li a {\n  text-decoration: underline;\n}\n.connect-nosupport {\n  padding: 10px 0;\n}\n.connect-nosupport p {\n  word-break: keep-all;\n}\n.connect-nosupport-tip {\n  line-height: 20px;\n  font-size: 14px;\n  font-weight: 500;\n  color: #455671;\n}\n.connect-nosupport-desc {\n  line-height: 16px;\n  color: #909aaa;\n}\n.helptip {\n  font-size: 14px;\n  margin-bottom: 2rem;\n}\n.ant-select-dropdown-menu-item:hover {\n  background-color: var(--BTN-HOVER-COLOR);\n}\n.noble-help {\n  float: right;\n  margin-top: 6px;\n}\n",""])},1185:function(e,t,n){var i=n(1182);"string"==typeof i&&(i=[[e.i,i,""]]);var a={transform:void 0},o=n(88)(i,a);i.locals&&(e.exports=i.locals),i.locals||e.hot.accept(1182,(function(){var t=n(1182);"string"==typeof t&&(t=[[e.i,t,""]]),o(t)})),e.hot.dispose((function(){o()}))},1195:function(e){e.exports=JSON.parse('{"2.1.1":{"version":"v2.1.1","createdAt":"20200927","logs":{"zh":["新增对乐高 WeDo 2.0 、乐高 EV3 的设备支持","能力再次升级整合，同时支持网页端图形化编辑器和 Python 编辑器","新增软件界面，慧编程体系的软件都可以快速启动啦～"],"en":["Support new devices LEGO WeDo 2.0 and LEGO EV3.","This time mLink comes with more powerful abilities, making it available for both block-based coding and Python editors.","Newly added software interface, allowing all mBlock-related software users to quickly start it."]},"affectedConnectType":[]},"2.0.0":{"version":"v2.0.0","createdAt":"20200703","logs":{"zh":["能力再次升级整合，同时支持网页端图形化编辑器和 Python 编辑器","新增软件界面，慧编程体系的软件都可以快速启动啦～"],"en":["This time mLink comes with more powerful abilities, making it available for both block-based coding and Python editors.","Newly added software interface, allowing all mBlock-related software users to quickly start it."]},"affectedConnectType":[]},"1.4.0":{"version":"v1.4.0","createdAt":"20191108","logs":{"zh":["支持Tello无人机","支持 WiFi 连接类的设备","解决蓝牙设备的连接问题","优化用户体验"],"en":["Support Tello drone","Support Wi-Fi enabled devices","Fixed Bluetooth connectivity issues","Improved user experience"]},"affectedConnectType":["ble","wifi"]},"1.3.0":{"version":"v1.3.0","createdAt":"20190905","logs":{"zh":["支持在网页端蓝牙连接","支持 mBot 2.4G 连接"],"en":["Bluetooth powered for mBlock Web","2.4G Wi-Fi powered for mBot"]},"affectedConnectType":["ble","24g"]}}')},1196:function(e,t,n){"use strict";e.exports=function(){}},1197:function(e,t,n){var i=n(546),a=n(1198),o=n(1201),s="Expected a function",r=Math.max,c=Math.min;e.exports=function(e,t,n){var l,p,h,d,u,m,f=0,v=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError(s);function C(t){var n=l,i=p;return l=p=void 0,f=t,d=e.apply(i,n)}function b(e){var n=e-m;return void 0===m||n>=t||n<0||g&&e-f>=h}function E(){var e=a();if(b(e))return T(e);u=setTimeout(E,function(e){var n=t-(e-m);return g?c(n,h-(e-f)):n}(e))}function T(e){return u=void 0,y&&l?C(e):(l=p=void 0,d)}function N(){var e=a(),n=b(e);if(l=arguments,p=this,m=e,n){if(void 0===u)return function(e){return f=e,u=setTimeout(E,t),v?C(e):d}(m);if(g)return clearTimeout(u),u=setTimeout(E,t),C(m)}return void 0===u&&(u=setTimeout(E,t)),d}return t=o(t)||0,i(n)&&(v=!!n.leading,h=(g="maxWait"in n)?r(o(n.maxWait)||0,t):h,y="trailing"in n?!!n.trailing:y),N.cancel=function(){void 0!==u&&clearTimeout(u),f=0,l=m=p=u=void 0},N.flush=function(){return void 0===u?d:T(a())},N}},1198:function(e,t,n){var i=n(1199);e.exports=function(){return i.Date.now()}},1199:function(e,t,n){var i=n(1200),a="object"==typeof self&&self&&self.Object===Object&&self,o=i||a||Function("return this")();e.exports=o},1200:function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(39))},1201:function(e,t){e.exports=function(e){return e}},1235:function(e,t,n){"use strict";var i=n(2),a=n.n(i),o=n(10),s=n.n(o),r=n(96),c=n.n(r),l=n(6),p=n.n(l),h=n(11),d=n.n(h),u=n(8),m=n.n(u),f=n(9),v=n.n(f),g=n(0),y=n.n(g),C=n(16),b=n(35),E=n.n(b),T=n(1),N=n.n(T),S=37,O=38,k=39,x=40,w=n(12),I=n.n(w);function B(e){var t=[];return y.a.Children.forEach(e,(function(e){e&&t.push(e)})),t}function P(e,t){for(var n=B(e),i=0;i<n.length;i++)if(n[i].key===t)return i;return-1}function R(e,t){e.transform=t,e.webkitTransform=t,e.mozTransform=t}function A(e){return"transform"in e||"webkitTransform"in e||"MozTransform"in e}function L(e){return"left"===e||"right"===e}function _(e,t){return+getComputedStyle(e).getPropertyValue(t).replace("px","")}function D(e){return Object.keys(e).reduce((function(t,n){return"aria-"!==n.substr(0,5)&&"data-"!==n.substr(0,5)&&"role"!==n||(t[n]=e[n]),t}),{})}function W(e,t){return+e.getPropertyValue(t).replace("px","")}function j(e,t,n,i,a){var o=_(a,"padding-"+e);if(!i||!i.parentNode)return o;var s=i.parentNode.childNodes;return Array.prototype.some.call(s,(function(a){var s=getComputedStyle(a);return a!==i?(o+=W(s,"margin-"+e),o+=W(s,"margin-"+n),o+=a[t],"content-box"===s.boxSizing&&(o+=W(s,"border-"+e+"-width")+W(s,"border-"+n+"-width")),!1):(o+=W(s,"margin-"+e),!0)})),o}var K=function(e){function t(){return p()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v()(t,e),d()(t,[{key:"render",value:function(){var e,t=this.props,n=t.id,i=t.className,o=t.destroyInactiveTabPane,r=t.active,c=t.forceRender,l=t.rootPrefixCls,p=t.style,h=t.children,d=t.placeholder,u=E()(t,["id","className","destroyInactiveTabPane","active","forceRender","rootPrefixCls","style","children","placeholder"]);this._isActived=this._isActived||r;var m=l+"-tabpane",f=I()((e={},s()(e,m,1),s()(e,m+"-inactive",!r),s()(e,m+"-active",r),s()(e,i,i),e)),v=o?r:this._isActived;return y.a.createElement("div",a()({style:p,role:"tabpanel","aria-hidden":r?"false":"true",className:f,id:n},D(u)),v||c?h:d)}}]),t}(y.a.Component),M=K;function U(e){var t=void 0;return y.a.Children.forEach(e.children,(function(e){!e||t||e.props.disabled||(t=e.key)})),t}K.propTypes={className:N.a.string,active:N.a.bool,style:N.a.any,destroyInactiveTabPane:N.a.bool,forceRender:N.a.bool,placeholder:N.a.node,rootPrefixCls:N.a.string,children:N.a.node,id:N.a.string},K.defaultProps={placeholder:null};var H=function(e){function t(e){p()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));z.call(n);var i=void 0;return i="activeKey"in e?e.activeKey:"defaultActiveKey"in e?e.defaultActiveKey:U(e),n.state={activeKey:i},n}return v()(t,e),d()(t,[{key:"componentWillReceiveProps",value:function(e){var t,n;"activeKey"in e?this.setState({activeKey:e.activeKey}):(t=e,n=this.state.activeKey,y.a.Children.map(t.children,(function(e){return e&&e.key})).indexOf(n)>=0||this.setState({activeKey:U(e)}))}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,i=t.navWrapper,o=t.tabBarPosition,r=t.className,c=t.renderTabContent,l=t.renderTabBar,p=t.destroyInactiveTabPane,h=E()(t,["prefixCls","navWrapper","tabBarPosition","className","renderTabContent","renderTabBar","destroyInactiveTabPane"]),d=I()((e={},s()(e,n,1),s()(e,n+"-"+o,1),s()(e,r,!!r),e));this.tabBar=l();var u=[y.a.cloneElement(this.tabBar,{prefixCls:n,navWrapper:i,key:"tabBar",onKeyDown:this.onNavKeyDown,tabBarPosition:o,onTabClick:this.onTabClick,panels:t.children,activeKey:this.state.activeKey}),y.a.cloneElement(c(),{prefixCls:n,tabBarPosition:o,activeKey:this.state.activeKey,destroyInactiveTabPane:p,children:t.children,onChange:this.setActiveKey,key:"tabContent"})];return"bottom"===o&&u.reverse(),y.a.createElement("div",a()({className:d,style:t.style},D(h)),u)}}]),t}(y.a.Component),z=function(){var e=this;this.onTabClick=function(t,n){e.tabBar.props.onTabClick&&e.tabBar.props.onTabClick(t,n),e.setActiveKey(t)},this.onNavKeyDown=function(t){var n=t.keyCode;if(n===k||n===x){t.preventDefault();var i=e.getNextActiveKey(!0);e.onTabClick(i)}else if(n===S||n===O){t.preventDefault();var a=e.getNextActiveKey(!1);e.onTabClick(a)}},this.setActiveKey=function(t){e.state.activeKey!==t&&("activeKey"in e.props||e.setState({activeKey:t}),e.props.onChange(t))},this.getNextActiveKey=function(t){var n=e.state.activeKey,i=[];y.a.Children.forEach(e.props.children,(function(e){e&&!e.props.disabled&&(t?i.push(e):i.unshift(e))}));var a=i.length,o=a&&i[0].key;return i.forEach((function(e,t){e.key===n&&(o=t===a-1?i[0].key:i[t+1].key)})),o}},G=H;H.propTypes={destroyInactiveTabPane:N.a.bool,renderTabBar:N.a.func.isRequired,renderTabContent:N.a.func.isRequired,navWrapper:N.a.func,onChange:N.a.func,children:N.a.node,prefixCls:N.a.string,className:N.a.string,tabBarPosition:N.a.string,style:N.a.object,activeKey:N.a.string,defaultActiveKey:N.a.string},H.defaultProps={prefixCls:"rc-tabs",destroyInactiveTabPane:!1,onChange:function(){},navWrapper:function(e){return e},tabBarPosition:"top",children:null,style:{}},H.TabPane=M;var V=function(e){function t(){return p()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v()(t,e),d()(t,[{key:"getTabPanes",value:function(){var e=this.props,t=e.activeKey,n=e.children,i=[];return y.a.Children.forEach(n,(function(n){if(n){var a=n.key,o=t===a;i.push(y.a.cloneElement(n,{active:o,destroyInactiveTabPane:e.destroyInactiveTabPane,rootPrefixCls:e.prefixCls}))}})),i}},{key:"render",value:function(){var e,t,n=this.props,i=n.prefixCls,o=n.children,r=n.activeKey,c=n.tabBarPosition,l=n.animated,p=n.animatedWithMargin,h=n.style,d=I()((e={},s()(e,i+"-content",!0),s()(e,l?i+"-content-animated":i+"-content-no-animated",!0),e));if(l){var u=P(o,r);if(-1!==u){var m=p?function(e,t){var n=L(t)?"marginTop":"marginLeft";return s()({},n,100*-e+"%")}(u,c):{transform:t=function(e,t){return(L(t)?"translateY":"translateX")+"("+100*-e+"%) translateZ(0)"}(u,c),WebkitTransform:t,MozTransform:t};h=a()({},h,m)}else h=a()({},h,{display:"none"})}return y.a.createElement("div",{className:d,style:h},this.getTabPanes())}}]),t}(y.a.Component),F=V;V.propTypes={animated:N.a.bool,animatedWithMargin:N.a.bool,prefixCls:N.a.string,children:N.a.node,activeKey:N.a.string,style:N.a.any,tabBarPosition:N.a.string},V.defaultProps={animated:!0};var $=G,X=n(32);function q(e,t){var n=e.props,i=n.styles,a=n.panels,o=n.activeKey,s=e.props.getRef("root"),r=e.props.getRef("nav")||s,c=e.props.getRef("inkBar"),l=e.props.getRef("activeTab"),p=c.style,h=e.props.tabBarPosition,d=P(a,o);if(t&&(p.display="none"),l){var u=l,m=A(p);if("top"===h||"bottom"===h){var f=function(e,t){return j("left","offsetWidth","right",e,t)}(u,r),v=u.offsetWidth;v===s.offsetWidth?v=0:i.inkBar&&void 0!==i.inkBar.width&&(v=parseFloat(i.inkBar.width,10))&&(f+=(u.offsetWidth-v)/2),m?(R(p,"translate3d("+f+"px,0,0)"),p.width=v+"px",p.height=""):(p.left=f+"px",p.top="",p.bottom="",p.right=r.offsetWidth-f-v+"px")}else{var g=function(e,t){return j("top","offsetHeight","bottom",e,t)-_(e.parentNode,"height")}(u,r),y=u.offsetHeight;i.inkBar&&void 0!==i.inkBar.height&&(y=parseFloat(i.inkBar.height,10))&&(g+=(u.offsetHeight-y)/2),m?(R(p,"translate3d(0,"+g+"px,0)"),p.height=y+"px",p.width=""):(p.left="",p.right="",p.top=g+"px",p.bottom=r.offsetHeight-g-y+"px")}}p.display=-1!==d?"block":"none"}var Y=function(e){function t(){return p()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this;this.timeout=setTimeout((function(){q(e,!0)}),0)}},{key:"componentDidUpdate",value:function(){q(this)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,i=t.styles,a=t.inkBarAnimated,o=n+"-ink-bar",r=I()((e={},s()(e,o,!0),s()(e,a?o+"-animated":o+"-no-animated",!0),e));return y.a.createElement("div",{style:i.inkBar,className:r,key:"inkBar",ref:this.props.saveRef("inkBar")})}}]),t}(y.a.Component),J=Y;Y.propTypes={prefixCls:N.a.string,styles:N.a.object,inkBarAnimated:N.a.bool,saveRef:N.a.func},Y.defaultProps={prefixCls:"",inkBarAnimated:!0,styles:{},saveRef:function(){}};var Q=n(1196),Z=n.n(Q),ee=function(e){function t(){return p()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v()(t,e),d()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.panels,i=t.activeKey,o=t.prefixCls,s=t.tabBarGutter,r=t.saveRef,c=[];return y.a.Children.forEach(n,(function(t,l){if(t){var p=t.key,h=i===p?o+"-tab-active":"";h+=" "+o+"-tab";var d={};t.props.disabled?h+=" "+o+"-tab-disabled":d={onClick:e.props.onTabClick.bind(e,p)};var u={};i===p&&(u.ref=r("activeTab")),Z()("tab"in t.props,"There must be `tab` property on children of Tabs."),c.push(y.a.createElement("div",a()({role:"tab","aria-disabled":t.props.disabled?"true":"false","aria-selected":i===p?"true":"false"},d,{className:h,key:p,style:{marginRight:s&&l===n.length-1?0:s}},u),t.props.tab))}})),y.a.createElement("div",{ref:r("navTabsContainer")},c)}}]),t}(y.a.Component),te=ee;ee.propTypes={activeKey:N.a.string,panels:N.a.node,prefixCls:N.a.string,tabBarGutter:N.a.number,onTabClick:N.a.func,saveRef:N.a.func},ee.defaultProps={panels:[],prefixCls:[],tabBarGutter:null,onTabClick:function(){},saveRef:function(){}};var ne=function(e){function t(){return p()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.onKeyDown,i=e.className,o=e.extraContent,r=e.style,c=e.tabBarPosition,l=e.children,p=E()(e,["prefixCls","onKeyDown","className","extraContent","style","tabBarPosition","children"]),h=I()(t+"-bar",s()({},i,!!i)),d="top"===c||"bottom"===c,u=d?{float:"right"}:{},m=o&&o.props?o.props.style:{},f=l;return o&&(f=[Object(g.cloneElement)(o,{key:"extra",style:a()({},u,m)}),Object(g.cloneElement)(l,{key:"content"})],f=d?f:f.reverse()),y.a.createElement("div",a()({role:"tablist",className:h,tabIndex:"0",ref:this.props.saveRef("root"),onKeyDown:n,style:r},D(p)),f)}}]),t}(y.a.Component),ie=ne;ne.propTypes={prefixCls:N.a.string,className:N.a.string,style:N.a.object,tabBarPosition:N.a.oneOf(["left","right","top","bottom"]),children:N.a.node,extraContent:N.a.node,onKeyDown:N.a.func,saveRef:N.a.func},ne.defaultProps={prefixCls:"",className:"",style:{},tabBarPosition:"top",extraContent:null,children:null,onKeyDown:function(){},saveRef:function(){}};var ae=n(111),oe=n(1197),se=n.n(oe),re=function(e){function t(e){p()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.prevTransitionEnd=function(e){if("opacity"===e.propertyName){var t=n.props.getRef("container");n.scrollToActiveTab({target:t,currentTarget:t})}},n.scrollToActiveTab=function(e){var t=n.props.getRef("activeTab"),i=n.props.getRef("navWrap");if((!e||e.target===e.currentTarget)&&t){var a=n.isNextPrevShown()&&n.lastNextPrevShown;if(n.lastNextPrevShown=n.isNextPrevShown(),a){var o=n.getScrollWH(t),s=n.getOffsetWH(i),r=n.offset,c=n.getOffsetLT(i),l=n.getOffsetLT(t);c>l?(r+=c-l,n.setOffset(r)):c+s<l+o&&(r-=l+o-(c+s),n.setOffset(r))}}},n.prev=function(e){n.props.onPrevClick(e);var t=n.props.getRef("navWrap"),i=n.getOffsetWH(t),a=n.offset;n.setOffset(a+i)},n.next=function(e){n.props.onNextClick(e);var t=n.props.getRef("navWrap"),i=n.getOffsetWH(t),a=n.offset;n.setOffset(a-i)},n.offset=0,n.state={next:!1,prev:!1},n}return v()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this;this.componentDidUpdate(),this.debouncedResize=se()((function(){e.setNextPrev(),e.scrollToActiveTab()}),200),this.resizeEvent=Object(ae.a)(window,"resize",this.debouncedResize)}},{key:"componentDidUpdate",value:function(e){var t=this.props;if(e&&e.tabBarPosition!==t.tabBarPosition)this.setOffset(0);else{var n=this.setNextPrev();this.isNextPrevShown(this.state)!==this.isNextPrevShown(n)?this.setState({},this.scrollToActiveTab):e&&t.activeKey===e.activeKey||this.scrollToActiveTab()}}},{key:"componentWillUnmount",value:function(){this.resizeEvent&&this.resizeEvent.remove(),this.debouncedResize&&this.debouncedResize.cancel&&this.debouncedResize.cancel()}},{key:"setNextPrev",value:function(){var e=this.props.getRef("nav"),t=this.props.getRef("navTabsContainer"),n=this.getScrollWH(t||e),i=this.getOffsetWH(this.props.getRef("container")),a=this.getOffsetWH(this.props.getRef("navWrap")),o=this.offset,s=i-n,r=this.state,c=r.next,l=r.prev;if(s>=0)c=!1,this.setOffset(0,!1),o=0;else if(s<o)c=!0;else{c=!1;var p=a-n;this.setOffset(p,!1),o=p}return l=o<0,this.setNext(c),this.setPrev(l),{next:c,prev:l}}},{key:"getOffsetWH",value:function(e){var t=this.props.tabBarPosition,n="offsetWidth";return"left"!==t&&"right"!==t||(n="offsetHeight"),e[n]}},{key:"getScrollWH",value:function(e){var t=this.props.tabBarPosition,n="scrollWidth";return"left"!==t&&"right"!==t||(n="scrollHeight"),e[n]}},{key:"getOffsetLT",value:function(e){var t=this.props.tabBarPosition,n="left";return"left"!==t&&"right"!==t||(n="top"),e.getBoundingClientRect()[n]}},{key:"setOffset",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Math.min(0,e);if(this.offset!==n){this.offset=n;var i={},a=this.props.tabBarPosition,o=this.props.getRef("nav").style,s=A(o);i="left"===a||"right"===a?s?{value:"translate3d(0,"+n+"px,0)"}:{name:"top",value:n+"px"}:s?{value:"translate3d("+n+"px,0,0)"}:{name:"left",value:n+"px"},s?R(o,i.value):o[i.name]=i.value,t&&this.setNextPrev()}}},{key:"setPrev",value:function(e){this.state.prev!==e&&this.setState({prev:e})}},{key:"setNext",value:function(e){this.state.next!==e&&this.setState({next:e})}},{key:"isNextPrevShown",value:function(e){return e?e.next||e.prev:this.state.next||this.state.prev}},{key:"render",value:function(){var e,t,n,i,a=this.state,o=a.next,r=a.prev,c=this.props,l=c.prefixCls,p=c.scrollAnimated,h=c.navWrapper,d=c.prevIcon,u=c.nextIcon,m=r||o,f=y.a.createElement("span",{onClick:r?this.prev:null,unselectable:"unselectable",className:I()((e={},s()(e,l+"-tab-prev",1),s()(e,l+"-tab-btn-disabled",!r),s()(e,l+"-tab-arrow-show",m),e)),onTransitionEnd:this.prevTransitionEnd},d||y.a.createElement("span",{className:l+"-tab-prev-icon"})),v=y.a.createElement("span",{onClick:o?this.next:null,unselectable:"unselectable",className:I()((t={},s()(t,l+"-tab-next",1),s()(t,l+"-tab-btn-disabled",!o),s()(t,l+"-tab-arrow-show",m),t))},u||y.a.createElement("span",{className:l+"-tab-next-icon"})),g=l+"-nav",C=I()((n={},s()(n,g,!0),s()(n,p?g+"-animated":g+"-no-animated",!0),n));return y.a.createElement("div",{className:I()((i={},s()(i,l+"-nav-container",1),s()(i,l+"-nav-container-scrolling",m),i)),key:"container",ref:this.props.saveRef("container")},f,v,y.a.createElement("div",{className:l+"-nav-wrap",ref:this.props.saveRef("navWrap")},y.a.createElement("div",{className:l+"-nav-scroll"},y.a.createElement("div",{className:C,ref:this.props.saveRef("nav")},h(this.props.children)))))}}]),t}(y.a.Component),ce=re;re.propTypes={getRef:N.a.func.isRequired,saveRef:N.a.func.isRequired,tabBarPosition:N.a.oneOf(["left","right","top","bottom"]),prefixCls:N.a.string,scrollAnimated:N.a.bool,onPrevClick:N.a.func,onNextClick:N.a.func,navWrapper:N.a.func,children:N.a.node,prevIcon:N.a.node,nextIcon:N.a.node},re.defaultProps={tabBarPosition:"left",prefixCls:"",scrollAnimated:!0,onPrevClick:function(){},onNextClick:function(){},navWrapper:function(e){return e}};var le=function(e){function t(){var e,n,i,a;p()(this,t);for(var o=arguments.length,s=Array(o),r=0;r<o;r++)s[r]=arguments[r];return n=i=m()(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),i.getRef=function(e){return i[e]},i.saveRef=function(e){return function(t){t&&(i[e]=t)}},a=n,m()(i,a)}return v()(t,e),d()(t,[{key:"render",value:function(){return this.props.children(this.saveRef,this.getRef)}}]),t}(y.a.Component),pe=le;le.propTypes={children:N.a.func},le.defaultProps={children:function(){return null}};var he=function(e){function t(){return p()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v()(t,e),d()(t,[{key:"render",value:function(){var e=this;return y.a.createElement(pe,null,(function(t,n){return y.a.createElement(ie,a()({saveRef:t},e.props),y.a.createElement(ce,a()({saveRef:t,getRef:n},e.props),y.a.createElement(te,a()({saveRef:t},e.props)),y.a.createElement(J,a()({saveRef:t,getRef:n},e.props))))}))}}]),t}(y.a.Component),de=function(e){function t(){return p()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.tabBarStyle,n=e.animated,i=void 0===n||n,o=e.renderTabBar,s=e.tabBarExtraContent,r=e.tabPosition,l=e.prefixCls,p="object"===(void 0===i?"undefined":c()(i))?i.inkBar:i,h="left"===r||"right"===r,d=h?"up":"left",u=h?"down":"right",m=g.createElement("span",{className:l+"-tab-prev-icon"},g.createElement(X.a,{type:d,className:l+"-tab-prev-icon-target"})),f=g.createElement("span",{className:l+"-tab-next-icon"},g.createElement(X.a,{type:u,className:l+"-tab-next-icon-target"})),v=a()({},this.props,{inkBarAnimated:p,extraContent:s,style:t,prevIcon:m,nextIcon:f}),y=void 0;return y=o?o(v,he):g.createElement(he,v),g.cloneElement(y)}}]),t}(g.Component),ue=n(60);var me=function(e){function t(){p()(this,t);var e=m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.removeTab=function(t,n){if(n.stopPropagation(),t){var i=e.props.onEdit;i&&i(t,"remove")}},e.handleChange=function(t){var n=e.props.onChange;n&&n(t)},e.createNewTab=function(t){var n=e.props.onEdit;n&&n(t,"add")},e}return v()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=C.findDOMNode(this);e&&!function(){if("undefined"!=typeof window&&window.document&&window.document.documentElement){var e=window.document.documentElement;return"flex"in e.style||"webkitFlex"in e.style||"Flex"in e.style||"msFlex"in e.style}return!1}()&&-1===e.className.indexOf(" no-flex")&&(e.className+=" no-flex")}},{key:"render",value:function(){var e,t=this,n=this.props,i=n.prefixCls,o=n.className,r=void 0===o?"":o,l=n.size,p=n.type,h=void 0===p?"line":p,d=n.tabPosition,u=n.children,m=n.animated,f=void 0===m||m,v=n.tabBarExtraContent,y=n.hideAdd,C="object"===(void 0===f?"undefined":c()(f))?f.tabPane:f;"line"!==h&&(C="animated"in this.props&&C),Object(ue.a)(!(h.indexOf("card")>=0&&("small"===l||"large"===l)),"Tabs[type=card|editable-card] doesn't have small or large size, it's by design.");var b=I()(r,(e={},s()(e,i+"-vertical","left"===d||"right"===d),s()(e,i+"-"+l,!!l),s()(e,i+"-card",h.indexOf("card")>=0),s()(e,i+"-"+h,!0),s()(e,i+"-no-animation",!C),e)),E=[];return"editable-card"===h&&(E=[],g.Children.forEach(u,(function(e,n){var a=e.props.closable,o=(a=void 0===a||a)?g.createElement(X.a,{type:"close",className:i+"-close-x",onClick:function(n){return t.removeTab(e.key,n)}}):null;E.push(g.cloneElement(e,{tab:g.createElement("div",{className:a?void 0:i+"-tab-unclosable"},e.props.tab,o),key:e.key||n}))})),y||(v=g.createElement("span",null,g.createElement(X.a,{type:"plus",className:i+"-new-tab",onClick:this.createNewTab}),v))),v=v?g.createElement("div",{className:i+"-extra-content"},v):null,g.createElement($,a()({},this.props,{className:b,tabBarPosition:d,renderTabBar:function(){return g.createElement(de,a()({},t.props,{tabBarExtraContent:v}))},renderTabContent:function(){return g.createElement(F,{animated:C,animatedWithMargin:!0})},onChange:this.handleChange}),E.length>0?E:u)}}]),t}(g.Component);t.a=me;me.TabPane=M,me.defaultProps={prefixCls:"ant-tabs",hideAdd:!1}},1292:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(1170),s=n(26),r=n(1163),c=n(1235),l=n(1178),p=n(17),h=n(13),d=n(144),u=n(5),m=n(22),f=n(4),v=n.n(f),g=n(63),y=n(1164),C=n(32),b=n(1176),E=n(1179),T=n(67),N=n(41),S=n(14),O=n(7),k=(n(15),n(99)),x=n(76),w=n(52);n(1185);class I extends a.a.Component{constructor(e){super(e)}render(){const{intlr:e}=this.props;return a.a.createElement("div",{className:"connect-nosupport"},a.a.createElement(w.a,{type:"icon-chatu_buzhichiUSB",className:"connect-icon"}),a.a.createElement("p",{className:"connect-nosupport-tip"},e.messages["CONNECT.NO.SUPPORT.CH340"]),a.a.createElement("p",{className:"connect-nosupport-desc"},e.messages["CONNECT.NO.SUPPORT.ARM"]))}}var B=Object(s.connect)(e=>({intlr:e.intlr}))(I);function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const R=u.a.CONNECT_STATUS,A=u.a.SCAN_STATUS;class L extends a.a.Component{constructor(e){super(e),P(this,"getEditingTarget",()=>{try{const e=Object(m.b)();this.option=e.config.options.connect.serialport;const t=this.option&&this.option.tips&&this.option.tips.fail||[];this.failTips=t.map(t=>{let n=t;return 0===t.indexOf(`${e.deviceId}.`)&&(n=t.replace(`${e.deviceId}.`,"")),Object(x.c)(this.props.intlr.langKey,e.deviceId,n)||Object(k.a)(t)})}catch(e){}}),P(this,"handleChange",e=>{this.props.current(e)}),P(this,"handleChangeIsShowAll",e=>{const{connect:t}=this.props,{type:n}=t;this.props.setIsShowAll(e.target.checked),this.props.discovery(n)}),P(this,"handleConnect",()=>{const{connect:e,device:t,connectDevice:n}=this.props,{type:i,current:a,scanData:o}=e;if(null==a&&v.a.isEmpty(o[i])){const{intlr:e}=this.props;g.a.warning(e.messages["CONNECT.CHOOSE.SERIAL"])}else{const e=v.a.find(o[i],{comName:a})||o[i][0];let s=115200;try{if(v.a.isNumber(Number(this.option.baudRate))){[1200,9600,19200,38400,43e3,56e3,57600,115200,230400].indexOf(Number(this.option.baudRate))>=0&&(s=Number(this.option.baudRate))}}catch(e){}n(t,i,{...this.option,baudRate:s,...e},()=>{const{intlr:e}=this.props;g.a.success(e.messages["CONNECT.MESSAGE.SUCCESS"]),h.a.replace("/")},()=>{const{intlr:e}=this.props;g.a.error(e.messages["CONNECT.MESSAGE.FAIL"]),clearInterval(this.discoveryTimer),this.discoveryTimer=null})}}),this.discoveryTimer=null,this.option=null,this.failTips=[]}componentDidMount(){const{connect:e}=this.props,{type:t}=e;this.props.setIsShowAll(!1),this.props.discovery(t),this.loopDiscovery(t),this.getEditingTarget()}componentWillUnmount(){this.discoveryTimer&&clearInterval(this.discoveryTimer),this.discoveryTimer=null}allowLoopScan(){return!this.isConnecting()||!this.isConnectedSucc()}loopDiscovery(e){const{connect:t}=this.props;e===t.type&&(this.discoveryTimer=setInterval(()=>{const{status:t}=this.props;this.discoveryTimer&&this.allowLoopScan()&&t!==R.NOT_SERVICE&&this.props.discovery(e)},5e3))}isScaning(){const{scanStatus:e,scanData:t,type:n}=this.props.connect;return e===A.SCANNING&&v.a.isEmpty(t[n])}isConnecting(){const{status:e}=this.props.connect;return e===R.CONNECTING}isConnectedSucc(){const{status:e}=this.props.connect;return e===R.CONNECT_SUCCESS}isConnected(){const{status:e}=this.props.connect;return e===R.CONNECTED}enableConnectBtn(){const{scanData:e,type:t}=this.props.connect;return this.isScaning()||v.a.isEmpty(e[t])}placeholder(e="100%"){return a.a.createElement(y.a,{style:{width:e,margin:"0 auto"},defaultValue:"",key:"placeholder_select",disabled:!0},this.placeholderOption())}optionPrefix(){return a.a.createElement(C.a,{type:"loading",style:{marginRight:"1em",color:"var(--BTN-HOVER-COLOR)",border:"1px solid #ddd",borderRadius:"50%"}})}placeholderOption(){const{intlr:e}=this.props;return a.a.createElement(y.a.Option,{value:"",disabled:!0},this.optionPrefix(),e.messages["SCANING.SERIAL"])}emptyOption(){const{intlr:e}=this.props;return a.a.createElement(y.a.Option,{value:"",disabled:!0},e.messages["CONNECT.LIST.EMPTY"])}scanResultOptions(){const{connect:e,intlr:t}=this.props,{scanData:n,devices:i,type:o}=e;let s=[];return n&&n[o]&&(s=n[o]),v.a.isEmpty(s)?this.emptyOption():s.map((e,n)=>{const o=v.a.some(i,{address:e.address,connected:!0});return a.a.createElement(y.a.Option,{key:n,value:e.comName,disabled:this.isConnecting()},e.comName,o&&a.a.createElement("small",{className:"connected-text"},t.messages["CONNECT.CONNECTED"]))})}scanResult(e="100%"){return a.a.createElement(y.a,{dropdownMatchSelectWidth:!0,defaultActiveFirstOption:!1,defaultValue:this.props.connect.current,value:this.props.connect.current,onChange:this.handleChange,disabled:this.enableConnectBtn(),style:{width:e,margin:"0 auto"},key:"scan_result"},this.scanResultOptions())}result(e){return this.scanResult(e)}content(e){const{connect:t}=this.props,{scanData:n}=t,i=n[u.a.CONNECT_TYPE.SERIAL]||[];return v.a.isEmpty(i)&&this.isScaning()?this.placeholder(e):this.result(e)}getLink(){const{intlr:e}=this.props;return O.b.link.connect_faq[e.langKey]}render(){const{intlr:e,env:t}=this.props,n=this.option&&this.option.helpLink||"";return t.isArmOS?a.a.createElement(B,null):a.a.createElement(b.a,null,a.a.createElement(w.a,{type:"icon-tishilianjieUSBshebei",className:"icon-tishilianjieUSBshebei connect-icon"}),a.a.createElement(b.a.Item,null,a.a.createElement(E.a,{onChange:this.handleChangeIsShowAll},a.a.createElement("span",{className:"connect-all-text"},e.messages["SHOW.CONNECTABLE.DEVICES.TEXT"]))),a.a.createElement(b.a.Item,null,this.content()),a.a.createElement(b.a.Item,null,a.a.createElement(T.a,{className:"btn-connect",type:"primary",loading:this.isConnecting(),disabled:this.enableConnectBtn(),onClick:this.handleConnect},e.messages["CONNECT.BUTTON.TEXT"]),a.a.createElement("ul",{className:"helpTip"},this.failTips.map((e,t)=>a.a.createElement("li",{key:t},e))," ",n&&a.a.createElement("li",null,e.messages["CONNECT.PROBLEM.TIP"],a.a.createElement("a",{href:n,rel:"nofollow me noopener noreferrer",target:"_blank",onClick:e=>S.c.openLink(e,n)},e.messages["CONNECT.HELPLINK.TEXT"])))))}}var _=Object(s.connect)(e=>({intlr:e.intlr,connect:e.connect,env:e.env}),e=>({discovery:t=>e(N.k.discovery(t)),current:t=>e(N.k.current(t)),connectDevice:(t,n,i,a,o)=>{e(N.k.connect(t,n,i,a,o))},setIsShowAll:t=>e(N.k.setIsShowAll(t))}))(L);var D=n(29);function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const j=u.a.CONNECT_STATUS,K=u.a.SCAN_STATUS;class M extends a.a.Component{constructor(e){super(e),W(this,"getEditingTarget",()=>{try{const e=Object(m.b)();this.option=e.config.options.connect.ble;const t=this.option&&this.option.tips&&this.option.tips.fail||[];this.failTips=t.map(t=>{let n=t;return 0===t.indexOf(`${e.deviceId}.`)&&(n=t.replace(`${e.deviceId}.`,"")),Object(x.c)(this.props.intlr.langKey,e.deviceId,n)||Object(k.a)({id:""})(t)})}catch(e){}}),W(this,"handleChange",e=>{this.props.current(e)}),W(this,"handleChangeIsShowAll",e=>{const{connect:t}=this.props,{type:n}=t;this.props.setIsShowAll(e.target.checked),this.props.discovery(n)}),W(this,"handleConnect",()=>{const{connect:e,device:t,connectDevice:n}=this.props,{type:i,current:a,scanData:o}=e;if(null==a&&v.a.isEmpty(o[i])){const{intlr:e}=this.props;g.a.warning(e.messages["CONNECT.CHOOSE.BLE"])}else{const e=v.a.find(o[i],{comName:a})||o[i][0];n(t,i,{...e,...this.option},()=>{const{intlr:e}=this.props;g.a.success(e.messages["CONNECT.MESSAGE.SUCCESS"]),h.a.replace("/")},()=>{const{intlr:e}=this.props;g.a.error(e.messages["CONNECT.MESSAGE.FAIL"]),clearInterval(this.discoveryTimer),this.discoveryTimer=null,this.loopDiscovery(i)})}}),W(this,"ableSignal",e=>e>-45?"strong":e<-90?"week":"middle"),this.discoveryTimer=null,this.isFirstDiscover=!0,this.option=null,this.failTips=[]}componentDidMount(){}componentWillMount(){const{connect:e}=this.props,{type:t}=e;this.props.setIsShowAll(!1),this.props.discovery(t),this.loopDiscovery(t),this.getEditingTarget()}componentWillUnmount(){this.discoveryTimer&&clearInterval(this.discoveryTimer),this.discoveryTimer=null}allowLoopScan(){return!this.isConnecting()||!this.isConnectedSucc()}loopDiscovery(e){this.discoveryTimer=setInterval(()=>{if(e!==h.a.location.pathname.split("/")[2])return clearInterval(this.discoveryTimer),void(this.discoveryTimer=null);const{status:t}=this.props;this.discoveryTimer&&this.allowLoopScan()&&t!==j.NOT_SERVICE&&this.props.discovery(e)},3e3)}isScaning(){const{scanStatus:e,scanData:t,type:n}=this.props.connect;return e===K.SCANNING&&v.a.isEmpty(t[n])}isConnecting(){const{status:e}=this.props.connect;return e===j.CONNECTING}isConnectedSucc(){const{status:e}=this.props.connect;return e===j.CONNECT_SUCCESS}isConnected(){const{status:e}=this.props.connect;return e===j.CONNECTED}enableConnectBtn(){const{scanData:e,type:t}=this.props.connect;return this.isScaning()||v.a.isEmpty(e[t])}placeholder(e="100%"){return a.a.createElement(y.a,{style:{width:e,margin:"0 auto"},defaultValue:"",key:"placeholder_select",disabled:!0},this.placeholderOption())}optionPrefix(){return a.a.createElement(C.a,{type:"loading",style:{marginRight:"1em",color:"#46B5FF",border:"1px solid #ddd",borderRadius:"50%"}})}placeholderOption(){const{intlr:e}=this.props;return a.a.createElement(y.a.Option,{value:"",disabled:!0},this.optionPrefix(),e.messages["SCANING.BLE"])}emptyOption(){const{intlr:e}=this.props;return a.a.createElement(y.a.Option,{value:"",disabled:!0},e.messages["CONNECT.LIST.EMPTY"])}content(e){const{connect:t}=this.props,{scanData:n}=t,i=n[u.a.CONNECT_TYPE.BLE]||[];if(!v.a.isEmpty(i)&&this.isFirstDiscover)this.isFirstDiscover=!1;else if(v.a.isEmpty(i)&&this.isScaning()||this.isFirstDiscover)return this.placeholder(e);return this.result(e)}scanResultOptions(){const{connect:e}=this.props,{scanData:t,type:n}=e;let i=[];return t&&t[n]&&(i=t[n]),v.a.isEmpty(i)?this.emptyOption():i.map((e,t)=>a.a.createElement(y.a.Option,{key:t,className:"connect-option",value:e.comName,disabled:this.isConnecting()},a.a.createElement("div",{className:"connect-option-inner"},a.a.createElement("span",{title:e.localName},e.localName),a.a.createElement(w.a,{type:`icon-ssi-${this.ableSignal(e.rssi)}`,className:"blessi",style:{fontSize:16}}))))}scanResult(e="100%"){return a.a.createElement(y.a,{dropdownMatchSelectWidth:!0,defaultActiveFirstOption:!1,defaultValue:this.props.connect.current,value:this.props.connect.current,onChange:this.handleChange,disabled:this.enableConnectBtn(),style:{width:e,margin:"0 auto"},key:"scan_result"},this.scanResultOptions())}result(){return a.a.createElement("section",{className:"ble-select-wrap"},this.scanResult(),this.isScaning()&&a.a.createElement(C.a,{type:"loading"}))}getLink(){const{intlr:e}=this.props;return O.b.link.connect_faq[e.langKey]}render(){const{intlr:e}=this.props,t=this.option&&this.option.helpLink||"";return a.a.createElement(b.a,null,a.a.createElement(w.a,{type:"icon-tishilanyalianjieshebei",className:"icon-tishilanyalianjieshebei connect-icon"}),a.a.createElement(b.a.Item,null,a.a.createElement(E.a,{onChange:this.handleChangeIsShowAll},a.a.createElement("span",{className:"connect-all-text"},e.messages["SHOW.CONNECTABLE.DEVICES.TEXT"]))),a.a.createElement(b.a.Item,null,this.content()),a.a.createElement(b.a.Item,null,a.a.createElement(T.a,{className:"btn-connect",type:"primary",loading:this.isConnecting(),disabled:this.enableConnectBtn(),onClick:this.handleConnect},e.messages["CONNECT.BUTTON.TEXT"]),a.a.createElement("a",{className:"noble-help",href:O.b.link.ble_help[e.langKey]||O.b.link.ble_help.en,target:"_blank"},e.messages["CONNECT.BLE.HELP"]||"Can not find my Bluetooth device ?"),a.a.createElement("ul",{className:"helpTip"},this.failTips.map((e,t)=>a.a.createElement("li",{key:t},e))," ",t&&a.a.createElement("li",null,e.messages["CONNECT.PROBLEM.TIP"],a.a.createElement("a",{href:t,rel:"nofollow me noopener noreferrer",target:"_blank",onClick:e=>S.c.openLink(e,t)},e.messages["CONNECT.HELPLINK.TEXT"])))))}}var U=Object(s.connect)(e=>({intlr:e.intlr,connect:e.connect}),e=>({discovery:t=>e(N.k.discovery(t)),current:t=>e(N.k.current(t)),connectDevice:(t,n,i,a,o)=>{e(N.k.connect(t,n,i,a,o))},setIsShowAll:t=>e(N.k.setIsShowAll(t))}))(M);function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const z=u.a.CONNECT_STATUS,G=u.a.SCAN_STATUS,V={vendorId:1046,productId:65535};class F extends a.a.Component{constructor(e){super(e),H(this,"getEditingTarget",()=>{try{const{connect:e,intlr:t}=this.props,n=Object(m.b)();this.option=n.config.options.connect[e.type];const i=this.option&&this.option.tips&&this.option.tips.fail||[];this.failTips=i.map(e=>{let i=e;return 0===e.indexOf(`${n.deviceId}.`)&&(i=e.replace(`${n.deviceId}.`,"")),Object(x.c)(t.langKey,n.deviceId,i)||Object(k.a)(e)})}catch(e){}}),H(this,"handleChange",e=>{this.props.current(e)}),H(this,"handleChangeIsShowAll",e=>{const{connect:t}=this.props,{type:n}=t;this.props.setIsShowAll(e.target.checked),this.props.discovery(n)}),H(this,"handleConnect",()=>{const{connect:e,device:t,connectDevice:n}=this.props,{type:i,scanData:a}=e;if(this.stopScan(),!v.a.isEmpty(a[i])){const e=a[i][0];n(t,i,e,()=>{const{intlr:e}=this.props;g.a.success(e.messages["CONNECT.MESSAGE.SUCCESS"]),h.a.replace("/")},()=>{const{intlr:e}=this.props;g.a.error(e.messages["CONNECT.MESSAGE.FAIL"]),this.loopDiscovery(i)})}}),this.discoveryTimer=null,this.option=null,this.failTips=[]}componentWillMount(){const{connect:e}=this.props,{type:t}=e;this.props.setIsShowAll(!1),this.getEditingTarget(),this.loopDiscovery(t)}componentWillUnmount(){this.stopScan()}allowLoopScan(){return!this.isConnecting()||!this.isConnectedSucc()}stopScan(){this.discoveryTimer&&clearInterval(this.discoveryTimer),this.discoveryTimer=null}loopDiscovery(e){this.props.discovery(e);const{connect:t}=this.props;e===t.type&&(this.discoveryTimer=setInterval(()=>{const{status:t}=this.props;this.discoveryTimer&&this.allowLoopScan()&&t!==z.NOT_SERVICE&&this.props.discovery(e)},5e3))}isScaning(){const{scanStatus:e,scanData:t,type:n}=this.props.connect;return e===G.SCANNING&&v.a.isEmpty(t[n])}isConnecting(){const{status:e}=this.props.connect;return e===z.CONNECTING}isConnectedSucc(){const{status:e}=this.props.connect;return e===z.CONNECT_SUCCESS}isConnected(){const{status:e}=this.props.connect;return e===z.CONNECTED}scanResultOptions(){const{connect:e,intlr:t}=this.props,{scanData:n,devices:i,type:o}=e;let s=[];return n&&n[o]&&(s=n[o]),v.a.isEmpty(s)?a.a.createElement(y.a.Option,{value:"",disabled:!0},t.messages["CONNECT.LIST.EMPTY"]):s.map((e,n)=>{const o=v.a.some(i,{address:e.address,connected:!0});return a.a.createElement(y.a.Option,{key:n,value:e.path,disabled:this.isConnecting()},V.vendorId===e.vendorId&&V.productId===e.productId?"Makeblock 2.4G Wireless Serial":e.product,o&&a.a.createElement("small",{className:"connected-text"},t.messages["CONNECT.CONNECTED"]))})}scanResult(e="100%"){return a.a.createElement(y.a,{dropdownMatchSelectWidth:!0,defaultActiveFirstOption:!1,defaultValue:this.props.connect.current,value:this.props.connect.current,onChange:this.handleChange,disabled:this.enableConnectBtn(),style:{width:e,margin:"0 auto"},key:"scan_result"},this.scanResultOptions())}content(e){const{connect:t}=this.props,{scanData:n}=t,i=n[u.a.CONNECT_TYPE.SERIAL]||[];return v.a.isEmpty(i)&&this.isScaning()?this.placeholder(e):this.scanResult(e)}enableConnectBtn(){const{scanData:e,type:t}=this.props.connect;return this.isScaning()||v.a.isEmpty(e[t])}placeholder(e="100%"){const{intlr:t}=this.props;return a.a.createElement(y.a,{style:{width:e,margin:"0 auto"},defaultValue:"",key:"placeholder_select",disabled:!0},a.a.createElement(y.a.Option,{value:"",disabled:!0},this.optionPrefix(),t.messages["SCANING.SERIAL"]))}optionPrefix(){return a.a.createElement(C.a,{type:"loading",style:{marginRight:"1em",color:"var(--BTN-HOVER-COLOR)",border:"1px solid #ddd",borderRadius:"50%"}})}getLink(){const{intlr:e}=this.props;return O.b.link.connect_faq[e.langKey]}render(){const{intlr:e}=this.props,t=this.option&&this.option.helpLink||"";return a.a.createElement(b.a,null,a.a.createElement(w.a,{type:"icon-24G",className:"icon-24G connect-icon"}),a.a.createElement(b.a.Item,{style:{visibility:"hidden"}},a.a.createElement(E.a,{onChange:this.handleChangeIsShowAll},a.a.createElement("span",{className:"connect-all-text"},e.messages["SHOW.CONNECTABLE.DEVICES.TEXT"]))),a.a.createElement(b.a.Item,null,this.content()),a.a.createElement(b.a.Item,null,a.a.createElement(T.a,{className:"btn-connect",type:"primary",loading:this.isConnecting(),disabled:this.enableConnectBtn(),onClick:this.handleConnect},e.messages["CONNECT.BUTTON.TEXT"]),a.a.createElement("ul",{className:"helpTip"},this.failTips.map((e,t)=>a.a.createElement("li",{key:t},e))," ",t&&a.a.createElement("li",null,e.messages["CONNECT.PROBLEM.TIP"],a.a.createElement("a",{href:t,rel:"nofollow me noopener noreferrer",target:"_blank",onClick:e=>S.c.openLink(e,t)},e.messages["CONNECT.HELPLINK.TEXT"])))))}}var $=Object(s.connect)(e=>({intlr:e.intlr,connect:e.connect}),e=>({discovery:t=>e(N.k.discovery(t)),current:t=>e(N.k.current(t)),connectDevice:(t,n,i,a,o)=>{e(N.k.connect(t,n,i,a,o))},setIsShowAll:t=>e(N.k.setIsShowAll(t))}))(F),X=n(218),q=n(3);const Y=u.a.CONNECT_STATUS;u.a.SCAN_STATUS;class J extends a.a.Component{constructor(e){super(e),this.discoveryTimer=null,this.option=null,this.selectedSSid=null,this.state={enableConnectBtn:!1,wifiList:[]},q.default.on("enableConnectBtn",e=>{this.setState({enableConnectBtn:e})})}componentWillMount(){q.default.on("ConnectBroken",()=>{this.props.connect.status=Y.NOT_CONNECTED,this.stopScan()}),this.ummonted=!1,this.getEditingTarget(),this.loopWifiList()}componentWillUnmount(){this.ummonted=!0,this.isConnected()||this.stopScan()}getEditingTarget(){try{const e=Object(m.b)();this.option=e.config.options.connect.wifi,this.mode=this.option.mode;const t=this.option.defaultConnectBtnState;if(this.mode&&(this.mode=this.mode.toUpperCase(),"STA"===this.mode)){let e=!0;t&&(e=JSON.parse(t)),this.changeConnectBtn(e)}}catch(e){}}checkStopScan(){this.shouldStopScan()&&this.stopScan()}shouldStopScan(){return"wifi"!==this.props.connect.type||!(!this.ummonted||this.isConnected())}stopScan(){clearInterval(this.currentInterval),this.selectedSSid=null}loopWifiList(){clearInterval(this.currentInterval),"STA"!==this.mode&&(this.currentInterval=setInterval(()=>{this.checkStopScan(),X.a.get_wifi_list().then(e=>{e=this.filter(e);const t=this.preConnectedSsid!==this.currentConnectedSsid();(e.length||t)&&(this.setState({wifiList:e}),this.selectedSSid||(this.selectedSSid=e[0]&&e[0].ssid||""),this.setCurrent(e))})},2500))}filter(e){const t=this.option.ssid||"";return e.filter(e=>{if(e.ssid)return e.ssid.includes(t)})}setCurrent(e){let t=!1;e.map((e,n)=>{e.isConnected&&(this.props.connect.current=e,this.preConnectedSsid=e.ssid,t=!0,this.checkConnectBtnState())}),t||(this.props.connect.current=null,this.checkConnectBtnState())}currentConnectedSsid(){return this.props.connect.current&&this.props.connect.current.ssid}changeConnectBtn(e){this.preState!==e&&(this.preState=e,this.setState({enableConnectBtn:e}))}handleChange(e){e&&(this.selectedSSid=e),this.checkConnectBtnState()}checkConnectBtnState(){if("STA"===this.mode)return;const{connectionInfo:e}=this.props.connect,t=this.currentConnectedSsid()===this.selectedSSid;this.changeConnectBtn(t),!t&&this.isConnected()&&(this.props.disconnect(e.connectionId,this.props.device),this.props.connect.status=Y.NOT_CONNECTED)}handleConnect(){const{connect:e,device:t,connectDevice:n}=this.props,{type:i}=e,a=this.state.wifiList,o=a&&a[0]||!1;v.a.isEmpty(a)&&"STA"!==this.mode||n(t,i,o,()=>{const{intlr:e}=this.props;g.a.success(e.messages["CONNECT.MESSAGE.SUCCESS"]),h.a.replace("/")},()=>{const{intlr:e}=this.props;g.a.error(e.messages["CONNECT.MESSAGE.FAIL"])})}isConnecting(){const{status:e}=this.props.connect;return e===Y.CONNECTING}isConnected(){const{status:e}=this.props.connect;return e===Y.CONNECTED||e===Y.CONNECT_SUCCESS}scanResultOptions(e){const{connect:t,intlr:n}=this.props,{devices:i}=t;return e.map((e,t)=>{const o=v.a.some(i,{address:e.address,connected:!0});return a.a.createElement(y.a.Option,{key:t,value:e.ssid},e.ssid,o&&a.a.createElement("small",{className:"connected-text"},n.messages["CONNECT.CONNECTED"]))})}validSelect(e){return a.a.createElement(y.a,{dropdownMatchSelectWidth:!0,defaultActiveFirstOption:!1,defaultValue:this.selectedSSid,value:this.selectedSSid,onChange:this.handleChange.bind(this),style:{width:"100%",margin:"0 auto"},key:"scan_result"},this.scanResultOptions(e))}emptySelect(){const{intlr:e}=this.props;return a.a.createElement(y.a,{dropdownMatchSelectWidth:!0,disabled:!0,value:""},a.a.createElement(y.a.Option,{value:"",disabled:!0},e.messages["CONNECT.LIST.EMPTY"]))}getIcon(){let e="icon-ap";"STA"===this.mode&&(e="icon-sta");const t=e+" connect-icon icon-wifi";return a.a.createElement(w.a,{type:e,className:t})}content(){const{connect:e}=this.props,{type:t}=e,n=this.state.wifiList;return n.length?this.validSelect(n):this.emptySelect()}render(){const{intlr:e}=this.props,t=this.option&&this.option.tips&&this.option.tips.fail||[],n=this.option&&this.option.helpLink||"";return a.a.createElement(b.a,null,this.getIcon(),"STA"===this.mode?"":a.a.createElement(b.a.Item,null,this.content()),a.a.createElement(T.a,{className:"btn-connect",type:"primary",loading:this.isConnecting(),disabled:!this.state.enableConnectBtn,onClick:this.handleConnect.bind(this)},e.messages["CONNECT.BUTTON.TEXT"]),a.a.createElement(b.a.Item,null,a.a.createElement("ul",{className:"helpTip"},t.map((e,t)=>a.a.createElement("li",{key:t},Object(k.a)(e)))," ",n&&a.a.createElement("li",null,e.messages["CONNECT.PROBLEM.TIP"],a.a.createElement("a",{href:n,rel:"nofollow me noopener noreferrer",target:"_blank",onClick:e=>S.c.openLink(e,n)},e.messages["CONNECT.HELPLINK.TEXT"])))))}}var Q=Object(s.connect)(e=>({intlr:e.intlr,connect:e.connect}),e=>({discovery:t=>e(N.k.discovery(t)),current:t=>e(N.k.current(t)),connectDevice:(t,n,i,a,o)=>{e(N.k.connect(t,n,i,a,o))},disconnect:(t,n)=>{e(N.k.disconnect("wifi",t,n))}}))(J),Z=n(18);const ee=n(1195);var te=new class{getNeedUpdateConnectType(){const e=D.default.getUseMlinkVersion()||"",t=this.getDifferVersions(e);return this.getNoRepeatConnectType(t)}getDifferVersions(e){if(""===e)return ee;const t={},n=Object.keys(ee);for(let i=0;i<n.length;i++){if(!(this.compare(e,n[i])<0))break;t[n[i]]=ee[n[i]]}return t}getNoRepeatConnectType(e){let t=[];for(const n in e)t=t.concat(e[n].affectedConnectType||[]);return t=[...new Set(t)],t}compare(e,t){const n=e.split(".")||[],i=t.split(".")||[],a=Math.min(n.length,i.length);let o=0,s=0;for(;o<a&&0==(s=parseInt(n[o])-parseInt(i[o]));)o++;return 0===s?0:s>0?1:-1}};function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ie=u.a.CONNECT_TYPE;class ae extends a.a.Component{constructor(e){super(e),ne(this,"handleCancel",()=>{h.a.replace("/")}),ne(this,"handleSwitchTab",e=>{const{switchConnectType:t}=this.props;t(e),this.setState({type:e})}),ne(this,"getConnections",e=>{const t=Object(m.c)();return t&&Array.isArray(t.shouldConnect)?e.filter(e=>t.shouldConnect.includes(e)):[e[0]]}),ne(this,"content",(e,t)=>a.a.createElement(e,{device:this.device}));const{match:t,intlr:n}=e,i=h.a.location.search;this.device={deviceId:Object(p.getQueryString)(i,"deviceId"),name:Object(p.getQueryString)(i,"name")},this.needUpdateConnectType=te.getNeedUpdateConnectType(),O.b.enableCheckMlinkVersion||(this.needUpdateConnectType=[]);let o=null;!d.a.isChromeOS&&!d.a.isLinuxOS?(this.connectMap={[ie.SERIAL]:{type:ie.SERIAL,name:n.messages["CONNECT.SERIAL"],path:`${t.path}/${ie.SERIAL}`,Component:_},[ie["24G"]]:{type:ie["24G"],name:n.messages["CONNECT.HID"],path:`${t.path}/${ie["24G"]}`,Component:$},[ie.BLE]:{type:ie.BLE,name:n.messages["CONNECT.BLE"],path:`${t.path}/${ie.BLE}`,Component:U},[ie.WIFI]:{type:ie.WIFI,name:"Wi-Fi",path:`${t.path}/${ie.WIFI}`,Component:Q}},o=this.getConnections([ie.SERIAL,ie.BLE,ie.WIFI,ie["24G"]])):(this.connectMap={[ie.SERIAL]:{type:ie.SERIAL,name:n.messages["CONNECT.SERIAL"],path:`${t.path}/${ie.SERIAL}`,Component:_}},o=this.getConnections([ie.SERIAL])),this.state={animated:!1,type:o[0],connectList:o}}changeHistoryByType(e=this.state.type){const{location:t}=h.a,n=this.connectMap[e].path;t.pathname!==n&&(h.a.replace(n+t.search),this.handleSwitchTab(e))}componentDidMount(){Z.a.instance.setBlocklyChaffHide(),this.props.switchConnectType(ie.SERIAL),this.changeHistoryByType()}componentDidUpdate(){this.changeHistoryByType()}render(){const{animated:e,connectList:t,type:n}=this.state;return a.a.createElement(r.a,{width:320,visible:!0,bodyStyle:{paddingTop:"0"},maskClosable:!1,keyboard:!1,onCancel:this.handleCancel,footer:null},a.a.createElement(c.a,{tabBarStyle:{textAlign:"center",width:"260px",margin:"0 auto 24px auto"},tabBarGutter:10,animated:e,defaultActiveKey:n,onChange:this.handleSwitchTab},t.map(e=>this.connectMap[e]).map(({type:e,name:t,path:n,Component:i})=>{return a.a.createElement(c.a.TabPane,{tab:t,key:e},a.a.createElement(l.a,{className:"connect-page"},a.a.createElement(o.b,{path:n,render:()=>this.content(i,!0)})))})))}}t.default=Object(s.connect)(e=>({intlr:e.intlr,connect:e.connect}),e=>({switchConnectType:t=>e(N.k.switchMode(t))}))(ae)}}]);